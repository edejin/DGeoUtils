/* eslint-disable max-lines,max-statements,max-lines-per-function */
import {DPoint, DPolygon, createCanvas} from '../src';
import {JSDOM} from 'jsdom';
const {document} = (new JSDOM('...')).window;
import 'jest-canvas-mock';
import {Feature} from 'geojson';

// createCanvas.document = document;

describe('DPolygon', () => {
  describe('constructor', () => {
    test('1', () => {
      expect(new DPolygon([])).toEqual({
        holes: [],
        pPoints: [],
        properties: {},
        searchStore: {}
      });
    });
    test('1', () => {
      expect(new DPolygon([
        new DPoint(1, 2),
        new DPoint(3, 4)
      ])).toEqual({
        holes: [],
        pPoints: [
          {
            x: 1,
            y: 2,
            z: undefined,
            properties: {}
          },
          {
            x: 3,
            y: 4,
            z: undefined,
            properties: {}
          }
        ],
        properties: {},
        searchStore: {}
      });
    });
  });

  describe('parseFromWKT', () => {
    test('1', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((1 2, 3 4), (5 6, 7 8))')).toEqual({
        holes: [
          {
            holes: [],
            pPoints: [
              {
                x: 5,
                y: 6,
                z: undefined,
                properties: {}
              },
              {
                x: 7,
                y: 8,
                z: undefined,
                properties: {}
              }
            ],
            properties: {},
            searchStore: {}
          }
        ],
        pPoints: [
          {
            x: 1,
            y: 2,
            z: undefined,
            properties: {}
          },
          {
            x: 3,
            y: 4,
            z: undefined,
            properties: {}
          }
        ],
        properties: {},
        searchStore: {}
      });
    });
    test('2', () => {
      expect(DPolygon.parseFromWKT('LINESTRING (30 10, 10 30, 40 40)')).toEqual({
        holes: [],
        pPoints: [
          {
            x: 30,
            y: 10,
            z: undefined,
            properties: {}
          },
          {
            x: 10,
            y: 30,
            z: undefined,
            properties: {}
          },
          {
            x: 40,
            y: 40,
            z: undefined,
            properties: {}
          }
        ],
        properties: {},
        searchStore: {}
      });
    });
    test('3', () => {
      expect(DPolygon.parseFromWKT('POINT (30 10)')).toEqual({
        holes: [],
        pPoints: [
          {
            x: 30,
            y: 10,
            z: undefined,
            properties: {}
          }
        ],
        properties: {},
        searchStore: {}
      });
    });
  });

  describe('createSquareBySize', () => {
    test('1', () => {
      expect(DPolygon.createSquareBySize(new DPoint(10, 20))).toEqual({
        holes: [],
        pPoints: [
          {
            x: 0,
            y: 0,
            z: undefined,
            properties: {}
          },
          {
            x: 0,
            y: 20,
            z: undefined,
            properties: {}
          },
          {
            x: 10,
            y: 20,
            z: undefined,
            properties: {}
          },
          {
            x: 10,
            y: 0,
            z: undefined,
            properties: {}
          },
          {
            x: 0,
            y: 0,
            z: undefined,
            properties: {}
          }
        ],
        properties: {},
        searchStore: {}
      });
    });
  });

  describe('points', () => {
    test('1', () => {
      const t = new DPolygon([new DPoint(10, 20)]);
      expect(t.points).toEqual([
        {
          x: 10,
          y: 20,
          z: undefined,
          properties: {}
        }
      ]);
      t.points = [
        new DPoint(30, 40),
        new DPoint(50, 60)
      ];
      expect(t.points).toEqual([
        {
          x: 30,
          y: 40,
          z: undefined,
          properties: {}
        },
        {
          x: 50,
          y: 60,
          z: undefined,
          properties: {}
        }
      ]);
    });
  });

  describe('min/max', () => {
    test('1', () => {
      const {minX, maxX, minY, maxY} = new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40)
      ]);
      expect(minX).toBe(10);
      expect(maxX).toBe(30);
      expect(minY).toBe(20);
      expect(maxY).toBe(40);
    });
  });

  describe('center', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40)
      ]).center).toEqual({
        x: 20,
        y: 30,
        z: undefined,
        properties: {}
      });
    });
  });

  describe('h/w or dX/dY', () => {
    test('1', () => {
      const {h, w, dX, dY} = new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40)
      ]);
      expect(h).toBe(20);
      expect(w).toBe(20);
      expect(dX).toBe(20);
      expect(dY).toBe(20);
    });
  });

  describe('extend', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40)
      ]).extend).toEqual({
        holes: [],
        pPoints: [
          {
            x: 10,
            y: 20,
            z: undefined,
            properties: {}
          },
          {
            x: 30,
            y: 20,
            z: undefined,
            properties: {}
          },
          {
            x: 30,
            y: 40,
            z: undefined,
            properties: {}
          },
          {
            x: 10,
            y: 40,
            z: undefined,
            properties: {}
          },
          {
            x: 10,
            y: 20,
            z: undefined,
            properties: {}
          }
        ],
        properties: {},
        searchStore: {}
      });
    });
  });

  describe('size', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40)
      ]).size).toEqual({
        x: 20,
        y: 20,
        z: undefined,
        properties: {}
      });
    });
  });

  describe('leftTop', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40)
      ]).leftTop).toEqual({
        x: 10,
        y: 20,
        z: undefined,
        properties: {}
      });
    });
  });

  describe('rightBottom', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40)
      ]).rightBottom).toEqual({
        x: 30,
        y: 40,
        z: undefined,
        properties: {}
      });
    });
  });

  describe('length', () => {
    test('1', () => {
      const t = new DPolygon([new DPoint(10, 20)]);
      expect(t.length).toBe(1);
      t.points = [
        new DPoint(30, 40),
        new DPoint(50, 60)
      ];
      expect(t.length).toBe(2);
    });
  });

  describe('fullLength', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40)
      ]).extend.fullLength).toEqual(60);
    });
  });

  describe('fullLengthLatLon', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(54.67002284109996, 24.44224870136031),
        new DPoint(54.638408708073136, 24.464663447044494)
      ]).extend.fullLengthLatLon).toEqual(8902.364255651624);
    });
  });

  describe('perimeter', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40)
      ]).extend.perimeter).toEqual(80);
    });
    test('2', () => {
      expect(new DPolygon([
        new DPoint(54.67002284109996, 24.44224870136031),
        new DPoint(54.638408708073136, 24.464663447044494)
      ]).extend.loop().degreeToMeters()
        .run().perimeter).toEqual(12520.695924467407);
    });
  });

  describe('points distance proportions', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40)
      ]).extend.pointsDistanceProportions).toEqual([0, 0.25, 0.5, 0.75, 1]);
    });
    test('2', () => {
      expect(new DPolygon([
        new DPoint(1, 2),
        new DPoint(2, 0),
        new DPoint(30, 1),
        new DPoint(50, 0)
      ]).pointsDistanceProportions).toEqual([0, 0.044473284169364934, 0.6017219376042804, 1]);
    });
    test('3', () => {
      expect(new DPolygon([
        new DPoint(1, 0),
        new DPoint(2, 0),
        new DPoint(3, 0),
        new DPoint(100, 0)
      ]).pointsDistanceProportions.map((v) => parseFloat(v.toFixed(2)))).toEqual([0, 0.01, 0.02, 1]);
    });
  });

  describe('perimeterLatLon', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(54.67002284109996, 24.44224870136031),
        new DPoint(54.638408708073136, 24.464663447044494)
      ]).extend.perimeterLatLon).toEqual(11397.562331475727);
    });
  });

  describe('area', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40)
      ]).extend.area).toBe(400);
    });
    test('2', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((35 10, 45 45, 15 40, 10 20, 35 10), ' +
        '(20 30, 35 35, 30 20, 20 30))').area).toBe(675);
    });
  });

  describe('deintersection', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(10, 10),
        new DPoint(30, 30),
        new DPoint(10, 30),
        new DPoint(30, 10),
        new DPoint(10, 10)
      ]).deintersection).toEqual({
        pPoints: [
          {
            x: 10,
            y: 10,
            z: undefined,
            properties: {}
          },
          {
            x: 20,
            y: 20,
            z: undefined,
            properties: {}
          },
          {
            x: 10,
            y: 30,
            z: undefined,
            properties: {}
          },
          {
            x: 30,
            y: 30,
            z: undefined,
            properties: {}
          },
          {
            x: 20,
            y: 20,
            z: undefined,
            properties: {}
          },
          {
            x: 30,
            y: 10,
            z: undefined,
            properties: {}
          },
          {
            x: 10,
            y: 10,
            z: undefined,
            properties: {}
          }
        ],
        holes: [],
        properties: {},
        searchStore: {}
      });
    });
    test('2', () => {
      expect(DPolygon.parse([
        [1, 1],
        [11, 1],
        [11, 11],
        [9, 10],
        [6, 7],
        [7, 6],
        [9, 10],
        [1, 11]
      ]).deintersection.open().toArrayOfCoords()).toEqual([
        [1, 1],
        [11, 1],
        [11, 11],
        [9, 10],
        [7, 6],
        [6, 7],
        [9, 10],
        [1, 11]
      ]);
    });
    test('3', () => {
      expect(DPolygon.parse([
        [1, 1],
        [11, 1],
        [11, 11],
        [9, 10],
        [6, 7],
        [7, 6],
        [9, 10],
        [12, 12],
        [10, 12],
        [9, 10],
        [1, 11]
      ]).deintersection.open().toArrayOfCoords()).toEqual([
        [1, 1],
        [11, 1],
        [11, 11],
        [9, 10],
        [7, 6],
        [6, 7],
        [9, 10],
        [12, 12],
        [10, 12],
        [9, 10],
        [1, 11]
      ]);
    });
    test('4', () => {
      expect((DPolygon.parse({
        type: 'Feature',
        properties: {},
        geometry: {
          coordinates: [
            [
              [
                -11.753753083726423,
                -11.663803812085916
              ],
              [
                9.14625082356909,
                -4.110301846286163
              ],
              [
                -12.328982549065387,
                -3.536355031864346
              ],
              [
                3.3556075391623494,
                -12.488795384197303
              ],
              [
                0.40276295042508536,
                2.9410238220041975
              ],
              [
                -11.753753083726423,
                -11.663803812085916
              ]
            ]
          ],
          type: 'Polygon'
        }
      }) as DPolygon).deintersection.toGeoJSONFeature()).toEqual({
        geometry: {
          coordinates: [
            [
              [
                -11.753753083726423,
                -11.663803812085916
              ],
              [
                -3.3873123760146613,
                -8.640075844724713
              ],
              [
                -7.3528872823449145,
                -6.3766075225097705
              ],
              [
                -5.148501571663558,
                -3.728260475287737
              ],
              [
                1.7141812393587632,
                -3.9116724489519106
              ],
              [
                2.2305151972231276,
                -6.609728299997067
              ],
              [
                -3.3873123760146613,
                -8.640075844724713
              ],
              [
                3.3556075391623494,
                -12.488795384197303
              ],
              [
                2.2305151972231276,
                -6.609728299997067
              ],
              [
                9.14625082356909,
                -4.110301846286163
              ],
              [
                1.7141812393587632,
                -3.9116724489519106
              ],
              [
                0.40276295042508536,
                2.9410238220041975
              ],
              [
                -5.148501571663558,
                -3.728260475287737
              ],
              [
                -12.328982549065387,
                -3.536355031864346
              ],
              [
                -7.3528872823449145,
                -6.3766075225097705
              ],
              [
                -11.753753083726423,
                -11.663803812085916
              ]
            ]
          ],
          type: 'Polygon'
        },
        properties: {},
        type: 'Feature'
      });
    });
    test('5', () => {
      expect((DPolygon.parse({
        type: 'Feature',
        properties: {},
        geometry: {
          coordinates: [
            [
              [
                -15.783213193468868,
                -18.189652497164047
              ],
              [
                12.477169249523087,
                9.563014247548352
              ],
              [
                13.374324247714213,
                7.789311149975774
              ],
              [
                -9.652654039168993,
                -21.980446713087275
              ],
              [
                -2.32588822061561,
                -18.80412189510804
              ],
              [
                -16.082264859532557,
                -6.526901078693157
              ],
              [
                9.586336477577618,
                -16.142048867245265
              ],
              [
                -10.99838653645449,
                1.4334980499083656
              ],
              [
                15.766737576221374,
                -8.651205911034651
              ],
              [
                -6.213559879440112,
                7.9867924286293
              ],
              [
                11.779382028708966,
                0.038073181772972475
              ],
              [
                9.187600922825965,
                11.669406240174837
              ],
              [
                -15.783213193468868,
                -18.189652497164047
              ]
            ]
          ],
          type: 'Polygon'
        }
      }) as DPolygon).deintersection.toGeoJSONFeature()).toEqual({
        geometry: {
          coordinates: [
            [
              [
                -15.783213193468868,
                -18.189652497164047
              ],
              [
                -9.703832555401181,
                -12.219491788868726
              ],
              [
                -5.20690368419726,
                -16.232887917562437
              ],
              [
                -9.652654039168993,
                -21.980446713087275
              ],
              [
                -2.32588822061561,
                -18.80412189510804
              ],
              [
                -5.20690368419726,
                -16.232887917562437
              ],
              [
                -1.8290829035629619,
                -11.865970752335175
              ],
              [
                -7.268882810964591,
                -9.828287461263137
              ],
              [
                -9.703832555401181,
                -12.219491788868726
              ],
              [
                -10.326037613732304,
                -11.664189393860816
              ],
              [
                -8.427682266056266,
                -9.39421519251464
              ],
              [
                -7.268882810964591,
                -9.828287461263137
              ],
              [
                -2.869023654445435,
                -5.507474565653228
              ],
              [
                0.719359984234594,
                -8.571290627466423
              ],
              [
                -1.8290829035629619,
                -11.865970752335175
              ],
              [
                9.586336477577618,
                -16.142048867245265
              ],
              [
                0.719359984234594,
                -8.571290627466423
              ],
              [
                4.067284146548742,
                -4.243024434035244
              ],
              [
                -0.015113869082409406,
                -2.7048370800343884
              ],
              [
                -2.869023654445435,
                -5.507474565653228
              ],
              [
                -4.215680308341549,
                -4.357678807618777
              ],
              [
                -2.1581518152134267,
                -1.8973719932738398
              ],
              [
                -0.015113869082409406,
                -2.7048370800343884
              ],
              [
                3.435009417171275,
                0.683302552708434
              ],
              [
                6.237148673920752,
                -1.4377783105214896
              ],
              [
                4.067284146548742,
                -4.243024434035244
              ],
              [
                15.766737576221374,
                -8.651205911034651
              ],
              [
                6.237148673920752,
                -1.4377783105214896
              ],
              [
                8.499491843658584,
                1.4870261309111843
              ],
              [
                5.570876084270943,
                2.780797020192401
              ],
              [
                3.435009417171275,
                0.683302552708434
              ],
              [
                1.331575266192262,
                2.275498198931005
              ],
              [
                2.7838196020194363,
                4.01203144620446
              ],
              [
                5.570876084270943,
                2.780797020192401
              ],
              [
                10.163294918676355,
                7.290710136920219
              ],
              [
                10.795182035110892,
                4.454942297622196
              ],
              [
                8.499491843658584,
                1.4870261309111843
              ],
              [
                11.779382028708966,
                0.038073181772972475
              ],
              [
                10.795182035110892,
                4.454942297622196
              ],
              [
                13.374324247714213,
                7.789311149975774
              ],
              [
                12.477169249523087,
                9.563014247548352
              ],
              [
                10.163294918676355,
                7.290710136920219
              ],
              [
                9.187600922825965,
                11.669406240174837
              ],
              [
                2.7838196020194363,
                4.01203144620446
              ],
              [
                -6.213559879440112,
                7.9867924286293
              ],
              [
                1.331575266192262,
                2.275498198931005
              ],
              [
                -2.1581518152134267,
                -1.8973719932738398
              ],
              [
                -10.99838653645449,
                1.4334980499083656
              ],
              [
                -4.215680308341549,
                -4.357678807618777
              ],
              [
                -8.427682266056266,
                -9.39421519251464
              ],
              [
                -16.082264859532557,
                -6.526901078693157
              ],
              [
                -10.326037613732304,
                -11.664189393860816
              ],
              [
                -15.783213193468868,
                -18.189652497164047
              ]
            ]
          ],
          type: 'Polygon'
        },
        properties: {},
        type: 'Feature'
      });
    });
    test('6', () => {
      expect((DPolygon.parse({
        type: 'Feature',
        properties: {},
        geometry: {
          coordinates: [
            [
              [
                4.438384727728732,
                -15.97309888762615
              ],
              [
                6.927631546005614,
                1.2405136818645843
              ],
              [
                -7.012150636345098,
                1.4395988631368652
              ],
              [
                -6.514301272690432,
                -7.796079368048751
              ],
              [
                20.319779428334897,
                -9.174763577515947
              ],
              [
                19.224510828293234,
                13.21947864036649
              ],
              [
                -15.82408437304531,
                11.615064847987995
              ],
              [
                -16.172578927604434,
                -14.82116707595766
              ],
              [
                4.438384727728732,
                -15.97309888762615
              ]
            ]
          ],
          type: 'Polygon'
        }
      }) as DPolygon).deintersection.toGeoJSONFeature()).toEqual({
        geometry: {
          coordinates: [
            [
              [
                4.438384727728732,
                -15.97309888762615
              ],
              [
                5.531360794867167,
                -8.414962655691433
              ],
              [
                -6.514301272690432,
                -7.796079368048751
              ],
              [
                -7.012150636345098,
                1.4395988631368652
              ],
              [
                6.927631546005614,
                1.2405136818645843
              ],
              [
                5.531360794867167,
                -8.414962655691433
              ],
              [
                20.319779428334897,
                -9.174763577515947
              ],
              [
                19.224510828293234,
                13.21947864036649
              ],
              [
                -15.82408437304531,
                11.615064847987995
              ],
              [
                -16.172578927604434,
                -14.82116707595766
              ],
              [
                4.438384727728732,
                -15.97309888762615
              ]
            ]
          ],
          type: 'Polygon'
        },
        properties: {},
        type: 'Feature'
      });
    });
  });

  describe('filledDeintersection', () => {
    test('0', () => {
      expect((DPolygon.parse({
        type: 'Feature',
        properties: {},
        geometry: {
          coordinates: [
            [
              [
                4.438384727728732,
                -15.97309888762615
              ],
              [
                6.927631546005614,
                1.2405136818645843
              ],
              [
                -7.012150636345098,
                1.4395988631368652
              ],
              [
                -6.514301272690432,
                -7.796079368048751
              ],
              [
                20.319779428334897,
                -9.174763577515947
              ],
              [
                19.224510828293234,
                13.21947864036649
              ],
              [
                -15.82408437304531,
                11.615064847987995
              ],
              [
                -16.172578927604434,
                -14.82116707595766
              ],
              [
                4.438384727728732,
                -15.97309888762615
              ]
            ]
          ],
          type: 'Polygon'
        }
      }) as DPolygon).filledDeintersection.toGeoJSONFeature()).toEqual({
        geometry: {
          coordinates: [
            [
              [
                4.438384727728732,
                -15.97309888762615
              ],
              [
                5.531360794867167,
                -8.414962655691433
              ],
              [
                20.319779428334897,
                -9.174763577515947
              ],
              [
                19.224510828293234,
                13.21947864036649
              ],
              [
                -15.82408437304531,
                11.615064847987995
              ],
              [
                -16.172578927604434,
                -14.82116707595766
              ],
              [
                4.438384727728732,
                -15.97309888762615
              ]
            ],
            [
              [
                -6.514301272690432,
                -7.796079368048751
              ],
              [
                -7.012150636345098,
                1.4395988631368652
              ],
              [
                6.927631546005614,
                1.2405136818645843
              ],
              [
                5.531360794867167,
                -8.414962655691433
              ],
              [
                -6.514301272690432,
                -7.796079368048751
              ]
            ]
          ],
          type: 'Polygon'
        },
        properties: {},
        type: 'Feature'
      });
    });
    test('1', () => {
      expect((DPolygon.parse({
        type: 'Feature',
        properties: {},
        geometry: {
          coordinates: [
            [
              [
                -11.753753083726423,
                -11.663803812085916
              ],
              [
                9.14625082356909,
                -4.110301846286163
              ],
              [
                -12.328982549065387,
                -3.536355031864346
              ],
              [
                3.3556075391623494,
                -12.488795384197303
              ],
              [
                0.40276295042508536,
                2.9410238220041975
              ],
              [
                -11.753753083726423,
                -11.663803812085916
              ]
            ]
          ],
          type: 'Polygon'
        }
      }) as DPolygon).filledDeintersection.toGeoJSONFeature()).toEqual({
        geometry: {
          coordinates: [
            [
              [
                -11.753753083726423,
                -11.663803812085916
              ],
              [
                -3.3873123760146613,
                -8.640075844724713
              ],
              [
                3.3556075391623494,
                -12.488795384197303
              ],
              [
                2.2305151972231276,
                -6.609728299997067
              ],
              [
                9.14625082356909,
                -4.110301846286163
              ],
              [
                1.7141812393587632,
                -3.9116724489519106
              ],
              [
                0.40276295042508536,
                2.9410238220041975
              ],
              [
                -5.148501571663558,
                -3.728260475287737
              ],
              [
                -12.328982549065387,
                -3.536355031864346
              ],
              [
                -7.3528872823449145,
                -6.3766075225097705
              ],
              [
                -11.753753083726423,
                -11.663803812085916
              ]
            ],
            [
              [
                -7.3528872823449145,
                -6.3766075225097705
              ],
              [
                -5.148501571663558,
                -3.728260475287737
              ],
              [
                1.7141812393587632,
                -3.9116724489519106
              ],
              [
                2.2305151972231276,
                -6.609728299997067
              ],
              [
                -3.3873123760146613,
                -8.640075844724713
              ],
              [
                -7.3528872823449145,
                -6.3766075225097705
              ]
            ]
          ],
          type: 'Polygon'
        },
        properties: {},
        type: 'Feature'
      });
    });
    test('2', () => {
      expect((DPolygon.parse({
        type: 'Feature',
        properties: {},
        geometry: {
          coordinates: [
            [
              [
                -15.783213193468868,
                -18.189652497164047
              ],
              [
                12.477169249523087,
                9.563014247548352
              ],
              [
                13.374324247714213,
                7.789311149975774
              ],
              [
                -9.652654039168993,
                -21.980446713087275
              ],
              [
                -2.32588822061561,
                -18.80412189510804
              ],
              [
                -16.082264859532557,
                -6.526901078693157
              ],
              [
                9.586336477577618,
                -16.142048867245265
              ],
              [
                -10.99838653645449,
                1.4334980499083656
              ],
              [
                15.766737576221374,
                -8.651205911034651
              ],
              [
                -6.213559879440112,
                7.9867924286293
              ],
              [
                11.779382028708966,
                0.038073181772972475
              ],
              [
                9.187600922825965,
                11.669406240174837
              ],
              [
                -15.783213193468868,
                -18.189652497164047
              ]
            ]
          ],
          type: 'Polygon'
        }
      }) as DPolygon).filledDeintersection.toGeoJSONFeature()).toEqual({
        geometry: {
          coordinates: [
            [
              [
                -15.783213193468868,
                -18.189652497164047
              ],
              [
                -9.703832555401181,
                -12.219491788868726
              ],
              [
                -5.20690368419726,
                -16.232887917562437
              ],
              [
                -9.652654039168993,
                -21.980446713087275
              ],
              [
                -2.32588822061561,
                -18.80412189510804
              ],
              [
                -5.20690368419726,
                -16.232887917562437
              ],
              [
                -1.8290829035629619,
                -11.865970752335175
              ],
              [
                9.586336477577618,
                -16.142048867245265
              ],
              [
                0.719359984234594,
                -8.571290627466423
              ],
              [
                4.067284146548742,
                -4.243024434035244
              ],
              [
                15.766737576221374,
                -8.651205911034651
              ],
              [
                6.237148673920752,
                -1.4377783105214896
              ],
              [
                8.499491843658584,
                1.4870261309111843
              ],
              [
                11.779382028708966,
                0.038073181772972475
              ],
              [
                10.795182035110892,
                4.454942297622196
              ],
              [
                13.374324247714213,
                7.789311149975774
              ],
              [
                12.477169249523087,
                9.563014247548352
              ],
              [
                10.163294918676355,
                7.290710136920219
              ],
              [
                9.187600922825965,
                11.669406240174837
              ],
              [
                2.7838196020194363,
                4.01203144620446
              ],
              [
                -6.213559879440112,
                7.9867924286293
              ],
              [
                1.331575266192262,
                2.275498198931005
              ],
              [
                -2.1581518152134267,
                -1.8973719932738398
              ],
              [
                -10.99838653645449,
                1.4334980499083656
              ],
              [
                -4.215680308341549,
                -4.357678807618777
              ],
              [
                -8.427682266056266,
                -9.39421519251464
              ],
              [
                -16.082264859532557,
                -6.526901078693157
              ],
              [
                -10.326037613732304,
                -11.664189393860816
              ],
              [
                -15.783213193468868,
                -18.189652497164047
              ]
            ],
            [
              [
                -9.703832555401181,
                -12.219491788868726
              ],
              [
                -10.326037613732304,
                -11.664189393860816
              ],
              [
                -8.427682266056266,
                -9.39421519251464
              ],
              [
                -7.268882810964591,
                -9.828287461263137
              ],
              [
                -9.703832555401181,
                -12.219491788868726
              ]
            ],
            [
              [
                -7.268882810964591,
                -9.828287461263137
              ],
              [
                -2.869023654445435,
                -5.507474565653228
              ],
              [
                0.719359984234594,
                -8.571290627466423
              ],
              [
                -1.8290829035629619,
                -11.865970752335175
              ],
              [
                -7.268882810964591,
                -9.828287461263137
              ]
            ],
            [
              [
                -2.869023654445435,
                -5.507474565653228
              ],
              [
                -4.215680308341549,
                -4.357678807618777
              ],
              [
                -2.1581518152134267,
                -1.8973719932738398
              ],
              [
                -0.015113869082409406,
                -2.7048370800343884
              ],
              [
                -2.869023654445435,
                -5.507474565653228
              ]
            ],
            [
              [
                -0.015113869082409406,
                -2.7048370800343884
              ],
              [
                3.435009417171275,
                0.683302552708434
              ],
              [
                6.237148673920752,
                -1.4377783105214896
              ],
              [
                4.067284146548742,
                -4.243024434035244
              ],
              [
                -0.015113869082409406,
                -2.7048370800343884
              ]
            ],
            [
              [
                3.435009417171275,
                0.683302552708434
              ],
              [
                1.331575266192262,
                2.275498198931005
              ],
              [
                2.7838196020194363,
                4.01203144620446
              ],
              [
                5.570876084270943,
                2.780797020192401
              ],
              [
                3.435009417171275,
                0.683302552708434
              ]
            ],
            [
              [
                5.570876084270943,
                2.780797020192401
              ],
              [
                10.163294918676355,
                7.290710136920219
              ],
              [
                10.795182035110892,
                4.454942297622196
              ],
              [
                8.499491843658584,
                1.4870261309111843
              ],
              [
                5.570876084270943,
                2.780797020192401
              ]
            ]
          ],
          type: 'Polygon'
        },
        properties: {},
        type: 'Feature'
      });
    });
  });

  describe('valid', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40)
      ]).valid).toBe(false);
    });
    test('2', () => {
      expect(new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40),
        new DPoint(50, 50)
      ]).valid).toBe(false);
    });
    test('3', () => {
      expect(new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40),
        new DPoint(50, 50),
        new DPoint(70, 70)
      ]).valid).toBe(true);
    });
  });

  describe('first', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40),
        new DPoint(50, 50),
        new DPoint(70, 70)
      ]).first).toEqual({
        x: 10,
        y: 20,
        z: undefined,
        properties: {}
      });
    });
  });

  describe('second', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40),
        new DPoint(50, 50),
        new DPoint(70, 70)
      ]).second).toEqual({
        x: 30,
        y: 40,
        z: undefined,
        properties: {}
      });
    });
  });

  describe('last', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40),
        new DPoint(50, 50),
        new DPoint(70, 70)
      ]).last).toEqual({
        x: 70,
        y: 70,
        z: undefined,
        properties: {}
      });
    });
  });

  describe('minAreaRectangle', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40),
        new DPoint(50, 50),
        new DPoint(70, 70)
      ]).minAreaRectangle).toEqual({
        pPoints: [
          {
            properties: {},
            x: 50.00000000000001,
            y: 50.00000000000001,
            z: undefined
          },
          {
            properties: {},
            x: 10.000000000000002,
            y: 20,
            z: undefined
          },
          {
            properties: {},
            x: 7.600000000000004,
            y: 23.199999999999996,
            z: undefined
          },
          {
            properties: {},
            x: 47.600000000000016,
            y: 53.2,
            z: undefined
          },
          {
            properties: {},
            x: 50.00000000000001,
            y: 50.00000000000001,
            z: undefined
          }
        ],
        holes: [],
        properties: {},
        searchStore: {}
      });
    });
  });

  describe('convex', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(1, 1),
        new DPoint(5, 5),
        new DPoint(9, 1),
        new DPoint(4, 3),
        new DPoint(1, 1)
      ]).convex).toEqual({
        holes: [],
        properties: {},
        searchStore: {},
        pPoints: [
          {
            x: 9,
            y: 1,
            z: undefined,
            properties: {}
          },
          {
            x: 1,
            y: 1,
            z: undefined,
            properties: {}
          },
          {
            x: 5,
            y: 5,
            z: undefined,
            properties: {}
          },
          {
            x: 9,
            y: 1,
            z: undefined,
            properties: {}
          }
        ]
      });
    });
    test('2', () => {
      expect(new DPolygon([
        new DPoint(1, 1),
        new DPoint(5, 5),
        new DPoint(9, 1),
        new DPoint(4, 3),
        new DPoint(1, 1)
      ]).reverse().convex).toEqual({
        holes: [],
        properties: {},
        searchStore: {},
        pPoints: [
          {
            x: 1,
            y: 1,
            z: undefined,
            properties: {}
          },
          {
            x: 9,
            y: 1,
            z: undefined,
            properties: {}
          },
          {
            x: 5,
            y: 5,
            z: undefined,
            properties: {}
          },
          {
            x: 1,
            y: 1,
            z: undefined,
            properties: {}
          }
        ]
      });
    });
  });

  describe('hasSimpleIntersection', () => {
    test('1', () => {
      expect(DPolygon.createSquareBySize(new DPoint(10, 10))
        .hasSimpleIntersection(DPolygon.createSquareBySize(new DPoint(10, 10))
          .loop()
          .move(20, 0)
          .run())).toBe(false);
    });
    test('2', () => {
      expect(DPolygon.createSquareBySize(new DPoint(10, 10))
        .hasSimpleIntersection(DPolygon.createSquareBySize(new DPoint(10, 10))
          .loop()
          .move(9, 9)
          .run())).toBe(true);
    });
  });

  describe('isClockwise', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(1, 1),
        new DPoint(5, 5),
        new DPoint(9, 1),
        new DPoint(4, 4),
        new DPoint(1, 1)
      ]).isClockwise).toEqual(false);
    });
    test('2', () => {
      expect(new DPolygon([
        new DPoint(1, 1),
        new DPoint(5, 5),
        new DPoint(9, 1),
        new DPoint(4, 4),
        new DPoint(1, 1)
      ]).reverse().isClockwise).toEqual(true);
    });
  });

  describe('clockWise', () => {
    const t = new DPolygon([
      new DPoint(1, 1),
      new DPoint(5, 5),
      new DPoint(9, 1),
      new DPoint(4, 4),
      new DPoint(1, 1)
    ]);
    test('1', () => {
      expect(t.clone().clockWise.equal(t.clone().reverse())).toEqual(true);
    });
    test('2', () => {
      expect(t.clone().reverse().clockWise.equal(t.clone().reverse())).toEqual(true);
    });
  });

  describe('noHoles', () => {
    test('2', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((35 10, 45 45, 15 40, 10 20, 35 10), ' +
        '(20 30, 35 35, 30 20, 20 30))').noHoles.points).toEqual([
        {
          x: 35,
          y: 10,
          z: undefined,
          properties: {}
        },
        {
          x: 45,
          y: 45,
          z: undefined,
          properties: {}
        },
        {
          x: 15,
          y: 40,
          z: undefined,
          properties: {}
        },
        {
          x: 10,
          y: 20,
          z: undefined,
          properties: {}
        },
        {
          x: 35,
          y: 10,
          z: undefined,
          properties: {}
        }
      ]);
    });
  });

  describe('minAreaRectangleSize', () => {
    test('1', () => {
      expect(DPolygon.minAreaRectangleSize(new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40),
        new DPoint(50, 50),
        new DPoint(70, 70)
      ]).minAreaRectangle)).toEqual({
        x: 50.00000000000001,
        y: 3.9999999999999916,
        z: undefined,
        properties: {}
      });
    });
  });

  describe('intersection', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(10, 10),
        new DPoint(20, 20)
      ]).extend.intersection(new DPoint(10, 10).findLine(new DPoint(20, 20)))).toEqual([
        {
          x: 10,
          y: 10,
          z: undefined,
          properties: {}
        },
        {
          x: 20,
          y: 20,
          z: undefined,
          properties: {}
        },
        {
          x: 20,
          y: 20,
          z: undefined,
          properties: {}
        },
        {
          x: 10,
          y: 10,
          z: undefined,
          properties: {}
        }
      ]);
    });
  });

  describe('setCenter', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(10, 10),
        new DPoint(20, 20)
      ]).setCenter(new DPoint(10, 20)).points).toEqual([
        {
          x: 5,
          y: 15,
          z: undefined,
          properties: {}
        },
        {
          x: 15,
          y: 25,
          z: undefined,
          properties: {}
        }
      ]);
    });
  });

  describe('toWKT', () => {
    test('1', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((35 10, 45 45, 15 40, 10 20, 35 10), ' +
        '(20 30, 35 35, 30 20, 20 30))').toWKT()).toBe('POLYGON ((35 10, 45 45, 15 40, 10 20, 35 10), ' +
        '(20 30, 35 35, 30 20, 20 30))');
    });
    test('2', () => {
      expect(DPolygon.parseFromWKT('LINESTRING (35 10 1, 45 45 1, 15 40 1, 10 20 1)')
        .toWKT(DPolygon.WKT_LINESTRING, true)).toBe('LINESTRING (35 10 1, 45 45 1, 15 40 1, 10 20 1)');
    });
  });

  describe('minAreaRectangleDirection', () => {
    test('1', () => {
      expect(DPolygon.minAreaRectangleDirection(new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40),
        new DPoint(50, 50),
        new DPoint(70, 70)
      ]).minAreaRectangle)).toBe(2.498091544796509);
    });
    test('2', () => {
      expect(DPolygon.minAreaRectangleDirection(new DPolygon())).toBe(0);
    });
    test('3', () => {
      expect(DPolygon.minAreaRectangleDirection(new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40),
        new DPoint(50, 50),
        new DPoint(70, 70)
      ]).minAreaRectangle.reverse())).toBe(2.498091544796509);
    });
  });

  describe('toDash', () => {
    test('1', () => {
      expect(DPolygon.toDash(new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40),
        new DPoint(50, 50),
        new DPoint(70, 70)
      ]).divideToPieces(8))).toEqual([
        {
          holes: [],
          pPoints: [
            {
              properties: {},
              x: 10,
              y: 20,
              z: undefined
            },
            {
              properties: {
                pieceBorder: true
              },
              x: 16.976423537605235,
              y: 26.976423537605235,
              z: undefined
            }
          ],
          properties: {},
          searchStore: {}
        },
        {
          holes: [],
          pPoints: [
            {
              properties: {
                pieceBorder: true
              },
              x: 23.95284707521047,
              y: 33.95284707521047,
              z: undefined
            },
            {
              properties: {},
              x: 30,
              y: 40,
              z: undefined
            },
            {
              properties: {
                pieceBorder: true
              },
              x: 31.175444679663237,
              y: 40.58772233983162,
              z: undefined
            }
          ],
          properties: {},
          searchStore: {}
        },
        {
          holes: [],
          pPoints: [
            {
              properties: {
                pieceBorder: true
              },
              x: 40,
              y: 45,
              z: undefined
            },
            {
              properties: {
                pieceBorder: true
              },
              x: 48.824555320336756,
              y: 49.41227766016838,
              z: undefined
            }
          ],
          properties: {},
          searchStore: {}
        },
        {
          holes: [],
          pPoints: [
            {
              properties: {
                pieceBorder: true
              },
              x: 56.04715292478952,
              y: 56.04715292478952,
              z: undefined
            },
            {
              properties: {
                pieceBorder: true
              },
              x: 63.02357646239476,
              y: 63.02357646239476,
              z: undefined
            }
          ],
          properties: {},
          searchStore: {}
        },
        {
          holes: [],
          pPoints: [
            {
              properties: {
                pieceBorder: true
              },
              x: 70,
              y: 70,
              z: undefined
            }
          ],
          properties: {},
          searchStore: {}
        }
      ]);
    });
  });

  describe('divideToPieces', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(10, 20),
        new DPoint(30, 40),
        new DPoint(50, 50),
        new DPoint(70, 70)
      ]).divideToPieces(8)).toEqual({
        holes: [],
        pPoints: [
          {
            properties: {},
            x: 10,
            y: 20,
            z: undefined
          },
          {
            properties: {
              pieceBorder: true
            },
            x: 16.976423537605235,
            y: 26.976423537605235,
            z: undefined
          },
          {
            properties: {
              pieceBorder: true
            },
            x: 23.95284707521047,
            y: 33.95284707521047,
            z: undefined
          },
          {
            properties: {},
            x: 30,
            y: 40,
            z: undefined
          },
          {
            properties: {
              pieceBorder: true
            },
            x: 31.175444679663237,
            y: 40.58772233983162,
            z: undefined
          },
          {
            properties: {
              pieceBorder: true
            },
            x: 40,
            y: 45,
            z: undefined
          },
          {
            properties: {
              pieceBorder: true
            },
            x: 48.824555320336756,
            y: 49.41227766016838,
            z: undefined
          },
          {
            properties: {},
            x: 50,
            y: 50,
            z: undefined
          },
          {
            properties: {
              pieceBorder: true
            },
            x: 56.04715292478952,
            y: 56.04715292478952,
            z: undefined
          },
          {
            properties: {
              pieceBorder: true
            },
            x: 63.02357646239476,
            y: 63.02357646239476,
            z: undefined
          },
          {
            properties: {
              pieceBorder: true
            },
            x: 70,
            y: 70,
            z: undefined
          }
        ],
        properties: {},
        searchStore: {}
      });
    });
    test('2', () => {
      expect(new DPolygon([
        new DPoint(0, 10),
        new DPoint(0, 20),
        new DPoint(0, 30)
      ]).divideToPieces(2)).toEqual({
        holes: [],
        pPoints: [
          {
            properties: {},
            x: 0,
            y: 10,
            z: undefined
          },
          {
            properties: {
              pieceBorder: true
            },
            x: 0,
            y: 20,
            z: undefined
          },
          {
            properties: {
              pieceBorder: true
            },
            x: 0,
            y: 30,
            z: undefined
          }
        ],
        properties: {},
        searchStore: {}
      });
    });
    test('3', () => {
      expect(new DPolygon([
        new DPoint(10, 10, 10),
        new DPoint(20, 20, 20)
      ]).divideToPieces(5, true))
        .toEqual({
          holes: [],
          pPoints: [
            {
              properties: {},
              x: 10,
              y: 10,
              z: 10
            },
            {
              properties: {
                pieceBorder: true
              },
              x: 12,
              y: 12,
              z: 12
            },
            {
              properties: {
                pieceBorder: true
              },
              x: 14,
              y: 14,
              z: 14
            },
            {
              properties: {
                pieceBorder: true
              },
              x: 16,
              y: 16,
              z: 16
            },
            {
              properties: {
                pieceBorder: true
              },
              x: 18,
              y: 18,
              z: 18
            },
            {
              properties: {
                pieceBorder: true
              },
              x: 20,
              y: 20,
              z: 20
            }
          ],
          properties: {},
          searchStore: {}
        });
    });
    test('4', () => {
      expect(new DPolygon([
        new DPoint(10, 10, 10),
        new DPoint(20, 20, 20),
        new DPoint(30, 30, 10)
      ]).divideToPieces(10, true))
        .toEqual({
          holes: [],
          pPoints: [
            {
              properties: {},
              x: 10,
              y: 10,
              z: 10
            },
            {
              properties: {
                pieceBorder: true
              },
              x: 12,
              y: 12,
              z: 12
            },
            {
              properties: {
                pieceBorder: true
              },
              x: 14,
              y: 14,
              z: 14
            },
            {
              properties: {
                pieceBorder: true
              },
              x: 16,
              y: 16,
              z: 16
            },
            {
              properties: {
                pieceBorder: true
              },
              x: 18,
              y: 18,
              z: 18
            },
            {
              properties: {
                pieceBorder: true
              },
              x: 20,
              y: 20,
              z: 20
            },
            {
              properties: {
                pieceBorder: true
              },
              x: 22,
              y: 22,
              z: 18
            },
            {
              properties: {
                pieceBorder: true
              },
              x: 24,
              y: 24,
              z: 16
            },
            {
              properties: {
                pieceBorder: true
              },
              x: 26,
              y: 26,
              z: 14
            },
            {
              properties: {
                pieceBorder: true
              },
              x: 28,
              y: 28,
              z: 12
            },
            {
              properties: {
                pieceBorder: true
              },
              x: 30,
              y: 30,
              z: 10
            }
          ],
          properties: {},
          searchStore: {}
        });
    });
    test('4', () => {
      expect(JSON.stringify((DPolygon.parse({
        type: 'Feature',
        properties: {},
        geometry: {
          type: 'LineString',
          coordinates: [
            [
              55.273731,
              25.196951
            ],
            [
              55.273693,
              25.197035
            ],
            [
              55.273633,
              25.197108
            ],
            [
              55.273555,
              25.197164
            ],
            [
              55.273463,
              25.197201
            ],
            [
              55.273364,
              25.197215
            ],
            [
              55.273264,
              25.197205
            ],
            [
              55.27317,
              25.197173
            ],
            [
              55.273087,
              25.19712
            ],
            [
              55.273042,
              25.197124
            ],
            [
              55.272998,
              25.197134
            ],
            [
              55.272956,
              25.19715
            ],
            [
              55.272926,
              25.197165
            ],
            [
              55.272897,
              25.197183
            ],
            [
              55.272847,
              25.197226
            ],
            [
              55.272802,
              25.197274
            ],
            [
              55.272768,
              25.197329
            ],
            [
              55.272731,
              25.197412
            ],
            [
              55.272702,
              25.197497
            ],
            [
              55.272683,
              25.197562
            ],
            [
              55.27267,
              25.197629
            ],
            [
              55.272664,
              25.197697
            ],
            [
              55.272664,
              25.197764
            ],
            [
              55.272671,
              25.197832
            ],
            [
              55.272684,
              25.197873
            ],
            [
              55.272705,
              25.197911
            ],
            [
              55.272733,
              25.197946
            ],
            [
              55.272767,
              25.197976
            ],
            [
              55.272822,
              25.197997
            ],
            [
              55.272868,
              25.198032
            ],
            [
              55.2729,
              25.198078
            ],
            [
              55.272917,
              25.19813
            ],
            [
              55.272916,
              25.198185
            ],
            [
              55.272898,
              25.198236
            ],
            [
              55.272868,
              25.198277
            ],
            [
              55.272828,
              25.198308
            ],
            [
              55.27278,
              25.19833
            ],
            [
              55.272735,
              25.198339
            ],
            [
              55.27269,
              25.198338
            ],
            [
              55.272646,
              25.198329
            ],
            [
              55.272594,
              25.198347
            ],
            [
              55.272566,
              25.198376
            ],
            [
              55.272544,
              25.198409
            ],
            [
              55.272527,
              25.198445
            ],
            [
              55.27251,
              25.198489
            ],
            [
              55.272501,
              25.198534
            ],
            [
              55.272498,
              25.198579
            ],
            [
              55.272502,
              25.198625
            ],
            [
              55.272513,
              25.19867
            ],
            [
              55.272531,
              25.198704
            ],
            [
              55.272552,
              25.198737
            ],
            [
              55.272576,
              25.198768
            ],
            [
              55.272603,
              25.198797
            ],
            [
              55.272751,
              25.19886
            ],
            [
              55.272902,
              25.198917
            ],
            [
              55.273056,
              25.198965
            ],
            [
              55.273213,
              25.199006
            ],
            [
              55.273397,
              25.199046
            ],
            [
              55.273533,
              25.199073
            ],
            [
              55.273724,
              25.199104
            ],
            [
              55.273796,
              25.199119
            ],
            [
              55.274037,
              25.199173
            ],
            [
              55.274194,
              25.199208
            ],
            [
              55.274577,
              25.199292
            ],
            [
              55.275036,
              25.199407
            ],
            [
              55.275318,
              25.199472
            ],
            [
              55.275525,
              25.199514
            ],
            [
              55.275735,
              25.199547
            ],
            [
              55.275977,
              25.199581
            ],
            [
              55.276135,
              25.199607
            ],
            [
              55.276351,
              25.199667
            ],
            [
              55.276464,
              25.199715
            ],
            [
              55.276604,
              25.199785
            ],
            [
              55.276741,
              25.199866
            ],
            [
              55.27687,
              25.19996
            ],
            [
              55.27699,
              25.200063
            ],
            [
              55.277102,
              25.200173
            ],
            [
              55.277205,
              25.20029
            ],
            [
              55.277298,
              25.200414
            ],
            [
              55.277535,
              25.20086
            ],
            [
              55.277553,
              25.200895
            ],
            [
              55.277554,
              25.200904
            ],
            [
              55.277566,
              25.20094
            ],
            [
              55.277572,
              25.200977
            ],
            [
              55.27757,
              25.201015
            ],
            [
              55.277561,
              25.201052
            ],
            [
              55.277546,
              25.201087
            ],
            [
              55.277517,
              25.201154
            ],
            [
              55.277476,
              25.201216
            ],
            [
              55.277427,
              25.201272
            ],
            [
              55.277266,
              25.201463
            ],
            [
              55.277261,
              25.201466
            ],
            [
              55.277042,
              25.201587
            ],
            [
              55.27649,
              25.201885
            ],
            [
              55.275376,
              25.202464
            ],
            [
              55.274903,
              25.202698
            ],
            [
              55.27431,
              25.202989
            ],
            [
              55.274189,
              25.20308
            ],
            [
              55.274072,
              25.203174
            ],
            [
              55.273959,
              25.203273
            ],
            [
              55.273851,
              25.203375
            ],
            [
              55.27371,
              25.203521
            ],
            [
              55.273565,
              25.203664
            ],
            [
              55.273418,
              25.203804
            ],
            [
              55.273267,
              25.203942
            ],
            [
              55.273236,
              25.203993
            ],
            [
              55.273202,
              25.204042
            ],
            [
              55.273165,
              25.20409
            ],
            [
              55.273126,
              25.204137
            ],
            [
              55.272942,
              25.204353
            ],
            [
              55.272907,
              25.204396
            ],
            [
              55.272877,
              25.204436
            ],
            [
              55.27284,
              25.204487
            ],
            [
              55.272814,
              25.204526
            ],
            [
              55.272615,
              25.204833
            ],
            [
              55.27258,
              25.204888
            ],
            [
              55.272539,
              25.204959
            ],
            [
              55.272498,
              25.205031
            ],
            [
              55.272458,
              25.205104
            ],
            [
              55.272419,
              25.205177
            ],
            [
              55.272382,
              25.205251
            ],
            [
              55.272258,
              25.205503
            ],
            [
              55.272224,
              25.205571
            ],
            [
              55.272187,
              25.205639
            ],
            [
              55.272147,
              25.205704
            ],
            [
              55.272104,
              25.205768
            ],
            [
              55.272037,
              25.205828
            ],
            [
              55.271963,
              25.205882
            ],
            [
              55.271884,
              25.205928
            ],
            [
              55.271799,
              25.205966
            ],
            [
              55.271711,
              25.205997
            ],
            [
              55.27162,
              25.206019
            ],
            [
              55.271527,
              25.206033
            ],
            [
              55.271432,
              25.206038
            ],
            [
              55.271338,
              25.206035
            ],
            [
              55.271245,
              25.206023
            ],
            [
              55.271153,
              25.206002
            ],
            [
              55.271064,
              25.205973
            ],
            [
              55.270979,
              25.205935
            ],
            [
              55.270899,
              25.20589
            ],
            [
              55.270824,
              25.205838
            ],
            [
              55.270755,
              25.20578
            ],
            [
              55.270693,
              25.205715
            ],
            [
              55.270615,
              25.205607
            ],
            [
              55.270541,
              25.205497
            ],
            [
              55.270471,
              25.205385
            ],
            [
              55.270103,
              25.204768
            ],
            [
              55.270051,
              25.204683
            ],
            [
              55.269999,
              25.204602
            ],
            [
              55.26973,
              25.204208
            ],
            [
              55.269652,
              25.204083
            ],
            [
              55.26958,
              25.203956
            ],
            [
              55.269511,
              25.203827
            ],
            [
              55.269285,
              25.203344
            ],
            [
              55.269199,
              25.203157
            ],
            [
              55.269107,
              25.202971
            ],
            [
              55.269011,
              25.202788
            ],
            [
              55.26891,
              25.202607
            ],
            [
              55.268628,
              25.202141
            ],
            [
              55.268578,
              25.202053
            ],
            [
              55.268533,
              25.201963
            ],
            [
              55.268347,
              25.201552
            ],
            [
              55.267601,
              25.200485
            ],
            [
              55.266651,
              25.19919
            ],
            [
              55.266262,
              25.19869
            ],
            [
              55.265935,
              25.198289
            ],
            [
              55.265602,
              25.197891
            ],
            [
              55.265264,
              25.197498
            ],
            [
              55.264572,
              25.196722
            ],
            [
              55.262065,
              25.193995
            ],
            [
              55.261914,
              25.19383
            ],
            [
              55.261024,
              25.192866
            ],
            [
              55.25757,
              25.189146
            ],
            [
              55.257284,
              25.188838
            ],
            [
              55.253157,
              25.184376
            ],
            [
              55.252773,
              25.183926
            ],
            [
              55.249429,
              25.180308
            ],
            [
              55.247552,
              25.178293
            ],
            [
              55.246058,
              25.176688
            ],
            [
              55.242752,
              25.173095
            ],
            [
              55.241304,
              25.171513
            ],
            [
              55.240456,
              25.170536
            ],
            [
              55.238538,
              25.168448
            ],
            [
              55.237465,
              25.167291
            ],
            [
              55.2358,
              25.165497
            ],
            [
              55.231725,
              25.161077
            ],
            [
              55.229651,
              25.158529
            ],
            [
              55.229299,
              25.158044
            ],
            [
              55.229078,
              25.157722
            ],
            [
              55.228863,
              25.157398
            ],
            [
              55.228652,
              25.157071
            ],
            [
              55.227599,
              25.155363
            ],
            [
              55.225104,
              25.151358
            ],
            [
              55.218543,
              25.140852
            ],
            [
              55.216141,
              25.13701
            ],
            [
              55.213561,
              25.132883
            ],
            [
              55.213434,
              25.132695
            ],
            [
              55.213304,
              25.132509
            ],
            [
              55.213169,
              25.132326
            ],
            [
              55.213032,
              25.132145
            ],
            [
              55.21289,
              25.131966
            ],
            [
              55.212746,
              25.131789
            ],
            [
              55.212151,
              25.131069
            ],
            [
              55.211865,
              25.130748
            ],
            [
              55.211572,
              25.130432
            ],
            [
              55.21127,
              25.130123
            ],
            [
              55.210961,
              25.129819
            ],
            [
              55.210645,
              25.129522
            ],
            [
              55.210322,
              25.129232
            ],
            [
              55.209992,
              25.128947
            ],
            [
              55.209654,
              25.12867
            ],
            [
              55.20931,
              25.128399
            ],
            [
              55.208882,
              25.128079
            ],
            [
              55.201331,
              25.122737
            ],
            [
              55.199443,
              25.121409
            ],
            [
              55.195852,
              25.118875
            ],
            [
              55.193246,
              25.117062
            ],
            [
              55.192739,
              25.116709
            ],
            [
              55.192615,
              25.116622
            ],
            [
              55.189843,
              25.114738
            ],
            [
              55.187787,
              25.113302
            ],
            [
              55.18515,
              25.111417
            ],
            [
              55.181147,
              25.108609
            ],
            [
              55.181013,
              25.108514
            ],
            [
              55.177108,
              25.105725
            ],
            [
              55.175313,
              25.104276
            ],
            [
              55.167153,
              25.097336
            ],
            [
              55.166227,
              25.096581
            ],
            [
              55.165349,
              25.09584
            ],
            [
              55.164655,
              25.095257
            ],
            [
              55.163991,
              25.094638
            ],
            [
              55.163001,
              25.093825
            ],
            [
              55.162884,
              25.093699
            ],
            [
              55.162762,
              25.093577
            ],
            [
              55.162636,
              25.093459
            ],
            [
              55.162506,
              25.093344
            ],
            [
              55.160331,
              25.091492
            ],
            [
              55.158143,
              25.089673
            ],
            [
              55.155694,
              25.087581
            ],
            [
              55.154293,
              25.086367
            ],
            [
              55.151873,
              25.084315
            ],
            [
              55.148166,
              25.081233
            ],
            [
              55.145573,
              25.079053
            ],
            [
              55.143848,
              25.077441
            ],
            [
              55.142422,
              25.075982
            ],
            [
              55.140677,
              25.074029
            ],
            [
              55.137679,
              25.070625
            ],
            [
              55.136645,
              25.069404
            ],
            [
              55.135168,
              25.067703
            ],
            [
              55.131957,
              25.064124
            ],
            [
              55.129855,
              25.061764
            ],
            [
              55.128586,
              25.060364
            ],
            [
              55.126537,
              25.058009
            ],
            [
              55.124583,
              25.055777
            ],
            [
              55.122167,
              25.052982
            ],
            [
              55.11989,
              25.050439
            ],
            [
              55.117109,
              25.047257
            ],
            [
              55.115254,
              25.045165
            ],
            [
              55.113704,
              25.043427
            ],
            [
              55.113418,
              25.043082
            ],
            [
              55.113116,
              25.042726
            ],
            [
              55.110991,
              25.040277
            ],
            [
              55.108131,
              25.037066
            ],
            [
              55.105993,
              25.034629
            ],
            [
              55.105185,
              25.033688
            ],
            [
              55.104794,
              25.033205
            ],
            [
              55.104412,
              25.032716
            ],
            [
              55.104038,
              25.032222
            ],
            [
              55.103672,
              25.031723
            ],
            [
              55.103315,
              25.031218
            ],
            [
              55.102971,
              25.030708
            ],
            [
              55.102633,
              25.030193
            ],
            [
              55.102304,
              25.029673
            ],
            [
              55.101984,
              25.029149
            ],
            [
              55.101646,
              25.028584
            ],
            [
              55.101393,
              25.02813
            ],
            [
              55.101324,
              25.028005
            ],
            [
              55.101281,
              25.027927
            ],
            [
              55.100749,
              25.026858
            ],
            [
              55.10032,
              25.025982
            ],
            [
              55.100062,
              25.02541
            ],
            [
              55.099821,
              25.024833
            ],
            [
              55.099582,
              25.024253
            ],
            [
              55.099358,
              25.023668
            ],
            [
              55.099146,
              25.023081
            ],
            [
              55.098947,
              25.022489
            ],
            [
              55.098801,
              25.022042
            ],
            [
              55.098663,
              25.021593
            ],
            [
              55.098532,
              25.021142
            ],
            [
              55.098409,
              25.020689
            ],
            [
              55.098292,
              25.020235
            ],
            [
              55.098205,
              25.019842
            ],
            [
              55.098121,
              25.019449
            ],
            [
              55.098042,
              25.019055
            ],
            [
              55.097967,
              25.01866
            ],
            [
              55.097641,
              25.016721
            ],
            [
              55.09723,
              25.014457
            ],
            [
              55.096959,
              25.012867
            ],
            [
              55.096279,
              25.008676
            ],
            [
              55.095577,
              25.004499
            ],
            [
              55.095306,
              25.003007
            ],
            [
              55.094914,
              25.000499
            ],
            [
              55.09448,
              24.997642
            ],
            [
              55.094117,
              24.995508
            ],
            [
              55.093772,
              24.993378
            ],
            [
              55.093491,
              24.991458
            ],
            [
              55.093031,
              24.988589
            ],
            [
              55.092727,
              24.986757
            ],
            [
              55.092216,
              24.983983
            ],
            [
              55.092129,
              24.983529
            ],
            [
              55.092034,
              24.983076
            ],
            [
              55.091933,
              24.982625
            ],
            [
              55.091825,
              24.982175
            ],
            [
              55.091709,
              24.981726
            ],
            [
              55.091587,
              24.981279
            ],
            [
              55.091502,
              24.980962
            ],
            [
              55.091411,
              24.980647
            ],
            [
              55.091315,
              24.980334
            ],
            [
              55.091212,
              24.980022
            ],
            [
              55.090759,
              24.978719
            ],
            [
              55.090269,
              24.977463
            ],
            [
              55.089752,
              24.976281
            ],
            [
              55.089609,
              24.975973
            ],
            [
              55.089154,
              24.975039
            ],
            [
              55.08863,
              24.974072
            ],
            [
              55.088604,
              24.974024
            ],
            [
              55.088322,
              24.97351
            ],
            [
              55.088033,
              24.972998
            ],
            [
              55.087739,
              24.97249
            ],
            [
              55.08538,
              24.968485
            ],
            [
              55.08445,
              24.966819
            ],
            [
              55.08405,
              24.966084
            ],
            [
              55.082913,
              24.964259
            ],
            [
              55.082787,
              24.964056
            ],
            [
              55.082665,
              24.963851
            ],
            [
              55.082058,
              24.962816
            ],
            [
              55.080697,
              24.960519
            ],
            [
              55.080492,
              24.96018
            ],
            [
              55.080282,
              24.959843
            ],
            [
              55.080069,
              24.959509
            ],
            [
              55.079649,
              24.958881
            ],
            [
              55.079546,
              24.958736
            ],
            [
              55.079441,
              24.958592
            ],
            [
              55.079225,
              24.958308
            ],
            [
              55.078242,
              24.957058
            ],
            [
              55.078072,
              24.956844
            ],
            [
              55.077897,
              24.956631
            ],
            [
              55.077719,
              24.956421
            ],
            [
              55.077536,
              24.956214
            ],
            [
              55.077179,
              24.955823
            ],
            [
              55.076811,
              24.955442
            ],
            [
              55.076437,
              24.955065
            ],
            [
              55.075806,
              24.954463
            ],
            [
              55.075605,
              24.954275
            ],
            [
              55.075398,
              24.954095
            ],
            [
              55.074764,
              24.953537
            ],
            [
              55.074517,
              24.953327
            ],
            [
              55.074267,
              24.953121
            ],
            [
              55.074013,
              24.952917
            ],
            [
              55.073757,
              24.952717
            ],
            [
              55.073049,
              24.952182
            ],
            [
              55.072444,
              24.951755
            ],
            [
              55.072025,
              24.951474
            ],
            [
              55.0716,
              24.9512
            ],
            [
              55.071169,
              24.950933
            ],
            [
              55.070732,
              24.950673
            ],
            [
              55.070375,
              24.950465
            ],
            [
              55.070015,
              24.950267
            ],
            [
              55.069337,
              24.94991
            ],
            [
              55.069014,
              24.949741
            ],
            [
              55.068005,
              24.949245
            ],
            [
              55.06771,
              24.949106
            ],
            [
              55.06741,
              24.948974
            ],
            [
              55.067106,
              24.948849
            ],
            [
              55.06607,
              24.94843
            ],
            [
              55.062769,
              24.947229
            ],
            [
              55.062569,
              24.947157
            ],
            [
              55.062367,
              24.947089
            ],
            [
              55.062163,
              24.947024
            ],
            [
              55.058579,
              24.945839
            ],
            [
              55.056166,
              24.945002
            ],
            [
              55.056148,
              24.944996
            ],
            [
              55.051521,
              24.943391
            ],
            [
              55.043781,
              24.94074
            ],
            [
              55.041854,
              24.940058
            ],
            [
              55.041325,
              24.939874
            ],
            [
              55.030885,
              24.936242
            ],
            [
              55.030297,
              24.936037
            ],
            [
              55.021408,
              24.932982
            ],
            [
              55.013946,
              24.930418
            ],
            [
              55.008917,
              24.928681
            ],
            [
              54.993163,
              24.923225
            ],
            [
              54.989458,
              24.921942
            ],
            [
              54.985429,
              24.92055
            ],
            [
              54.979633,
              24.918548
            ],
            [
              54.969347,
              24.91496
            ],
            [
              54.967743,
              24.914405
            ],
            [
              54.966134,
              24.913855
            ],
            [
              54.964492,
              24.913276
            ],
            [
              54.962715,
              24.912656
            ],
            [
              54.960852,
              24.912028
            ],
            [
              54.959782,
              24.911631
            ],
            [
              54.958817,
              24.911243
            ],
            [
              54.958286,
              24.911033
            ],
            [
              54.956944,
              24.910447
            ],
            [
              54.955284,
              24.909636
            ],
            [
              54.952424,
              24.908037
            ],
            [
              54.95167,
              24.907574
            ],
            [
              54.95011,
              24.906517
            ],
            [
              54.948789,
              24.905586
            ],
            [
              54.947207,
              24.90432
            ],
            [
              54.946291,
              24.903543
            ],
            [
              54.945916,
              24.903208
            ],
            [
              54.945526,
              24.902858
            ],
            [
              54.945363,
              24.902713
            ],
            [
              54.945215,
              24.902584
            ],
            [
              54.944851,
              24.902251
            ],
            [
              54.94449,
              24.901888
            ],
            [
              54.944206,
              24.901596
            ],
            [
              54.943698,
              24.901062
            ],
            [
              54.942308,
              24.899599
            ],
            [
              54.94154,
              24.89868
            ],
            [
              54.940606,
              24.897529
            ],
            [
              54.939901,
              24.896586
            ],
            [
              54.939203,
              24.895647
            ],
            [
              54.938542,
              24.894714
            ],
            [
              54.938167,
              24.894188
            ],
            [
              54.936825,
              24.892293
            ],
            [
              54.935347,
              24.890236
            ],
            [
              54.932709,
              24.886534
            ],
            [
              54.93211,
              24.885695
            ],
            [
              54.93194,
              24.88546
            ],
            [
              54.93155,
              24.884947
            ],
            [
              54.930833,
              24.884042
            ],
            [
              54.930258,
              24.883357
            ],
            [
              54.929665,
              24.882685
            ],
            [
              54.929216,
              24.882196
            ],
            [
              54.928758,
              24.881715
            ],
            [
              54.928291,
              24.881241
            ],
            [
              54.927998,
              24.880953
            ],
            [
              54.92788,
              24.880839
            ],
            [
              54.927702,
              24.880667
            ],
            [
              54.920602,
              24.873915
            ],
            [
              54.918011,
              24.871425
            ],
            [
              54.914154,
              24.867759
            ],
            [
              54.913294,
              24.866948
            ],
            [
              54.912901,
              24.866581
            ],
            [
              54.911686,
              24.865437
            ],
            [
              54.909602,
              24.863455
            ],
            [
              54.90896,
              24.862799
            ],
            [
              54.908707,
              24.862571
            ],
            [
              54.90558,
              24.859593
            ],
            [
              54.902994,
              24.857129
            ],
            [
              54.901139,
              24.855368
            ],
            [
              54.899932,
              24.854196
            ],
            [
              54.898939,
              24.853231
            ],
            [
              54.898603,
              24.85288
            ],
            [
              54.898273,
              24.852524
            ],
            [
              54.89795,
              24.852162
            ],
            [
              54.897635,
              24.851796
            ],
            [
              54.897327,
              24.851424
            ],
            [
              54.897026,
              24.851047
            ],
            [
              54.896733,
              24.850666
            ],
            [
              54.896447,
              24.85028
            ],
            [
              54.895225,
              24.848537
            ],
            [
              54.89373,
              24.846422
            ],
            [
              54.892232,
              24.844267
            ],
            [
              54.891178,
              24.842766
            ],
            [
              54.890124,
              24.841257
            ],
            [
              54.88802,
              24.838258
            ],
            [
              54.886538,
              24.836152
            ],
            [
              54.88108,
              24.828359
            ],
            [
              54.876793,
              24.82225
            ],
            [
              54.871584,
              24.814794
            ],
            [
              54.871292,
              24.814365
            ],
            [
              54.871018,
              24.813949
            ],
            [
              54.870766,
              24.813553
            ],
            [
              54.870519,
              24.813154
            ],
            [
              54.870279,
              24.812751
            ],
            [
              54.870045,
              24.812345
            ],
            [
              54.869817,
              24.811937
            ],
            [
              54.868725,
              24.8098
            ],
            [
              54.86822,
              24.808817
            ],
            [
              54.867874,
              24.808118
            ],
            [
              54.864665,
              24.801686
            ],
            [
              54.862739,
              24.797849
            ],
            [
              54.86264,
              24.797649
            ],
            [
              54.862468,
              24.797276
            ],
            [
              54.859828,
              24.791984
            ],
            [
              54.857087,
              24.786487
            ],
            [
              54.855157,
              24.782617
            ],
            [
              54.855115,
              24.782534
            ],
            [
              54.853996,
              24.780289
            ],
            [
              54.849052,
              24.770455
            ],
            [
              54.847937,
              24.768467
            ],
            [
              54.847052,
              24.767119
            ],
            [
              54.843885,
              24.762887
            ],
            [
              54.830822,
              24.745646
            ],
            [
              54.828957,
              24.743163
            ],
            [
              54.825202,
              24.738144
            ],
            [
              54.824345,
              24.737017
            ],
            [
              54.823756,
              24.736241
            ],
            [
              54.823132,
              24.735441
            ],
            [
              54.822466,
              24.734645
            ],
            [
              54.821835,
              24.73395
            ],
            [
              54.820911,
              24.733016
            ],
            [
              54.820313,
              24.732469
            ],
            [
              54.819689,
              24.731901
            ],
            [
              54.81886,
              24.731206
            ],
            [
              54.812138,
              24.725415
            ],
            [
              54.805982,
              24.720143
            ],
            [
              54.799846,
              24.714903
            ],
            [
              54.789983,
              24.70648
            ],
            [
              54.786694,
              24.703652
            ],
            [
              54.786325,
              24.703325
            ],
            [
              54.784944,
              24.701949
            ],
            [
              54.784512,
              24.701495
            ],
            [
              54.784051,
              24.700986
            ],
            [
              54.783715,
              24.700593
            ],
            [
              54.782928,
              24.699575
            ],
            [
              54.78106,
              24.697123
            ],
            [
              54.779646,
              24.695265
            ],
            [
              54.77842,
              24.693594
            ],
            [
              54.776932,
              24.691633
            ],
            [
              54.775325,
              24.689516
            ],
            [
              54.773168,
              24.686617
            ],
            [
              54.771542,
              24.684487
            ],
            [
              54.769693,
              24.682136
            ],
            [
              54.768836,
              24.681004
            ],
            [
              54.766738,
              24.678484
            ],
            [
              54.764472,
              24.675362
            ],
            [
              54.762254,
              24.672444
            ],
            [
              54.760913,
              24.670669
            ],
            [
              54.757152,
              24.665751
            ],
            [
              54.754863,
              24.662735
            ],
            [
              54.75442,
              24.662178
            ],
            [
              54.753908,
              24.661558
            ],
            [
              54.752934,
              24.660412
            ],
            [
              54.751406,
              24.658776
            ],
            [
              54.75121,
              24.658575
            ],
            [
              54.751087,
              24.658436
            ],
            [
              54.750661,
              24.657988
            ],
            [
              54.750405,
              24.657716
            ],
            [
              54.749855,
              24.657139
            ],
            [
              54.749497,
              24.65675
            ],
            [
              54.748733,
              24.655928
            ],
            [
              54.748271,
              24.65543
            ],
            [
              54.747791,
              24.654923
            ],
            [
              54.747326,
              24.654422
            ],
            [
              54.74513,
              24.652127
            ],
            [
              54.744856,
              24.651831
            ],
            [
              54.744524,
              24.651477
            ],
            [
              54.743932,
              24.650847
            ],
            [
              54.74334,
              24.65022
            ],
            [
              54.742727,
              24.649576
            ],
            [
              54.739704,
              24.64637
            ],
            [
              54.733663,
              24.639961
            ],
            [
              54.732974,
              24.63923
            ],
            [
              54.732827,
              24.639075
            ],
            [
              54.732689,
              24.638928
            ],
            [
              54.731753,
              24.637936
            ],
            [
              54.731435,
              24.637598
            ],
            [
              54.730511,
              24.636618
            ],
            [
              54.730089,
              24.636171
            ],
            [
              54.728247,
              24.634218
            ],
            [
              54.727621,
              24.633553
            ],
            [
              54.721603,
              24.627152
            ],
            [
              54.719762,
              24.625184
            ],
            [
              54.719532,
              24.624917
            ],
            [
              54.71808,
              24.623051
            ],
            [
              54.717929,
              24.622809
            ],
            [
              54.717096,
              24.621495
            ],
            [
              54.716457,
              24.620234
            ],
            [
              54.715882,
              24.618987
            ],
            [
              54.715529,
              24.618223
            ],
            [
              54.714851,
              24.616784
            ],
            [
              54.714273,
              24.615404
            ],
            [
              54.713708,
              24.614141
            ],
            [
              54.71231,
              24.611039
            ],
            [
              54.711726,
              24.609773
            ],
            [
              54.710374,
              24.606671
            ],
            [
              54.709274,
              24.604299
            ],
            [
              54.707168,
              24.599503
            ],
            [
              54.707,
              24.599119
            ],
            [
              54.703931,
              24.592436
            ],
            [
              54.70133,
              24.586527
            ],
            [
              54.700309,
              24.584365
            ],
            [
              54.699778,
              24.583189
            ],
            [
              54.69843,
              24.580125
            ],
            [
              54.698288,
              24.579818
            ],
            [
              54.697827,
              24.57864
            ],
            [
              54.69773,
              24.578392
            ],
            [
              54.697369,
              24.57716
            ],
            [
              54.697327,
              24.57702
            ],
            [
              54.697001,
              24.57547
            ],
            [
              54.696654,
              24.57232
            ],
            [
              54.696353,
              24.569487
            ],
            [
              54.696185,
              24.567918
            ],
            [
              54.695895,
              24.565213
            ],
            [
              54.695641,
              24.562957
            ],
            [
              54.695337,
              24.560294
            ],
            [
              54.695043,
              24.557622
            ],
            [
              54.694828,
              24.556064
            ],
            [
              54.694675,
              24.554659
            ],
            [
              54.694634,
              24.554309
            ],
            [
              54.69457,
              24.553321
            ],
            [
              54.694468,
              24.552427
            ],
            [
              54.694372,
              24.551626
            ],
            [
              54.694295,
              24.550816
            ],
            [
              54.694124,
              24.549677
            ],
            [
              54.694049,
              24.549363
            ],
            [
              54.693877,
              24.548742
            ],
            [
              54.693691,
              24.54822
            ],
            [
              54.693496,
              24.547756
            ],
            [
              54.693267,
              24.547277
            ],
            [
              54.693035,
              24.546874
            ],
            [
              54.692789,
              24.546473
            ],
            [
              54.692515,
              24.546069
            ],
            [
              54.692007,
              24.545454
            ],
            [
              54.69185,
              24.545295
            ],
            [
              54.691529,
              24.544976
            ],
            [
              54.691226,
              24.544699
            ],
            [
              54.690806,
              24.544359
            ],
            [
              54.69022,
              24.543897
            ],
            [
              54.689669,
              24.543485
            ],
            [
              54.68887,
              24.542855
            ],
            [
              54.687769,
              24.541876
            ],
            [
              54.687218,
              24.541332
            ],
            [
              54.686697,
              24.540765
            ],
            [
              54.686131,
              24.540088
            ],
            [
              54.685025,
              24.538622
            ],
            [
              54.684247,
              24.537585
            ],
            [
              54.683646,
              24.536798
            ],
            [
              54.683055,
              24.53603
            ],
            [
              54.682536,
              24.535353
            ],
            [
              54.680812,
              24.53313
            ],
            [
              54.678747,
              24.530452
            ],
            [
              54.677389,
              24.528685
            ],
            [
              54.677005,
              24.528182
            ],
            [
              54.675659,
              24.526431
            ],
            [
              54.673299,
              24.523359
            ],
            [
              54.671674,
              24.521257
            ],
            [
              54.669629,
              24.518606
            ],
            [
              54.668555,
              24.517207
            ],
            [
              54.666498,
              24.514548
            ],
            [
              54.666242,
              24.514201
            ],
            [
              54.665668,
              24.513449
            ],
            [
              54.665097,
              24.512689
            ],
            [
              54.664383,
              24.511741
            ],
            [
              54.663451,
              24.51053
            ],
            [
              54.662934,
              24.509876
            ],
            [
              54.662182,
              24.508907
            ],
            [
              54.661344,
              24.507821
            ],
            [
              54.658404,
              24.504005
            ],
            [
              54.657862,
              24.503312
            ],
            [
              54.655895,
              24.5008
            ],
            [
              54.65393,
              24.49826
            ],
            [
              54.653313,
              24.49746
            ],
            [
              54.649303,
              24.492292
            ],
            [
              54.649226,
              24.492241
            ],
            [
              54.649155,
              24.492181
            ],
            [
              54.649092,
              24.492115
            ],
            [
              54.649037,
              24.492043
            ],
            [
              54.648326,
              24.491194
            ],
            [
              54.647909,
              24.490698
            ],
            [
              54.647069,
              24.489734
            ],
            [
              54.646579,
              24.489236
            ],
            [
              54.646435,
              24.48909
            ],
            [
              54.646314,
              24.488973
            ],
            [
              54.646104,
              24.488791
            ],
            [
              54.645981,
              24.488681
            ],
            [
              54.645684,
              24.488462
            ],
            [
              54.645395,
              24.488252
            ],
            [
              54.645246,
              24.488149
            ],
            [
              54.644948,
              24.48795
            ],
            [
              54.644732,
              24.487817
            ],
            [
              54.644548,
              24.487704
            ],
            [
              54.644008,
              24.487406
            ],
            [
              54.64375,
              24.487275
            ],
            [
              54.643542,
              24.487181
            ],
            [
              54.64338,
              24.487111
            ],
            [
              54.643193,
              24.487019
            ],
            [
              54.643052,
              24.48695
            ],
            [
              54.642847,
              24.486863
            ],
            [
              54.642662,
              24.486789
            ],
            [
              54.642448,
              24.486707
            ],
            [
              54.642288,
              24.486665
            ],
            [
              54.642071,
              24.486598
            ],
            [
              54.641878,
              24.486549
            ],
            [
              54.641502,
              24.486458
            ],
            [
              54.641435,
              24.486447
            ],
            [
              54.641156,
              24.486413
            ],
            [
              54.640792,
              24.486375
            ],
            [
              54.64052,
              24.486367
            ],
            [
              54.640291,
              24.486368
            ],
            [
              54.640094,
              24.48638
            ],
            [
              54.639804,
              24.486397
            ],
            [
              54.639605,
              24.486419
            ],
            [
              54.639355,
              24.486455
            ],
            [
              54.638495,
              24.486654
            ],
            [
              54.637573,
              24.48688
            ],
            [
              54.636588,
              24.487068
            ],
            [
              54.636033,
              24.487194
            ],
            [
              54.635937,
              24.487212
            ],
            [
              54.635759,
              24.487239
            ],
            [
              54.635593,
              24.48726
            ],
            [
              54.635409,
              24.487285
            ],
            [
              54.634771,
              24.487443
            ],
            [
              54.633121,
              24.48785
            ],
            [
              54.630967,
              24.488395
            ],
            [
              54.630245,
              24.488575
            ],
            [
              54.629267,
              24.488842
            ],
            [
              54.628504,
              24.489051
            ],
            [
              54.626581,
              24.489687
            ],
            [
              54.625063,
              24.490294
            ],
            [
              54.623655,
              24.490942
            ],
            [
              54.620248,
              24.492501
            ],
            [
              54.619861,
              24.492678
            ],
            [
              54.617912,
              24.49357
            ],
            [
              54.617404,
              24.493769
            ],
            [
              54.616862,
              24.493986
            ],
            [
              54.61635,
              24.494178
            ],
            [
              54.615208,
              24.494579
            ],
            [
              54.61512,
              24.49461
            ],
            [
              54.615089,
              24.494622
            ],
            [
              54.614561,
              24.4948
            ],
            [
              54.613567,
              24.495087
            ],
            [
              54.612503,
              24.495345
            ],
            [
              54.609376,
              24.496052
            ],
            [
              54.606724,
              24.496628
            ],
            [
              54.605389,
              24.496927
            ],
            [
              54.600968,
              24.497936
            ],
            [
              54.599907,
              24.49818
            ],
            [
              54.597431,
              24.498728
            ],
            [
              54.595273,
              24.499211
            ],
            [
              54.5909,
              24.500201
            ],
            [
              54.588954,
              24.500639
            ],
            [
              54.587884,
              24.500882
            ],
            [
              54.583074,
              24.501966
            ],
            [
              54.58258,
              24.502061
            ],
            [
              54.582224,
              24.502136
            ],
            [
              54.580163,
              24.502612
            ],
            [
              54.579784,
              24.502696
            ],
            [
              54.575843,
              24.503585
            ],
            [
              54.574807,
              24.503821
            ],
            [
              54.574476,
              24.503889
            ],
            [
              54.570903,
              24.504755
            ],
            [
              54.569875,
              24.504977
            ],
            [
              54.566916,
              24.505617
            ],
            [
              54.565631,
              24.505907
            ],
            [
              54.563172,
              24.506497
            ],
            [
              54.560822,
              24.507132
            ],
            [
              54.558712,
              24.507778
            ],
            [
              54.556321,
              24.508596
            ],
            [
              54.553922,
              24.509473
            ],
            [
              54.553026,
              24.509825
            ],
            [
              54.546936,
              24.512274
            ],
            [
              54.544895,
              24.513103
            ],
            [
              54.542979,
              24.513876
            ],
            [
              54.540989,
              24.51463
            ],
            [
              54.539785,
              24.515053
            ],
            [
              54.538837,
              24.515383
            ],
            [
              54.537592,
              24.515789
            ],
            [
              54.534333,
              24.516774
            ],
            [
              54.530819,
              24.517836
            ],
            [
              54.530385,
              24.517968
            ],
            [
              54.525076,
              24.519562
            ],
            [
              54.522943,
              24.520208
            ],
            [
              54.521732,
              24.5206
            ],
            [
              54.51967,
              24.52127
            ],
            [
              54.515602,
              24.522534
            ],
            [
              54.5147,
              24.522801
            ],
            [
              54.511249,
              24.523839
            ],
            [
              54.511128,
              24.523878
            ],
            [
              54.511104,
              24.523886
            ],
            [
              54.510381,
              24.524111
            ],
            [
              54.505806,
              24.525495
            ],
            [
              54.504491,
              24.52588
            ],
            [
              54.500926,
              24.526959
            ],
            [
              54.497059,
              24.528169
            ],
            [
              54.495732,
              24.52859
            ],
            [
              54.495138,
              24.528783
            ],
            [
              54.494564,
              24.528968
            ],
            [
              54.494253,
              24.529075
            ],
            [
              54.493934,
              24.529192
            ],
            [
              54.493619,
              24.529315
            ],
            [
              54.493381,
              24.529408
            ],
            [
              54.493146,
              24.529506
            ],
            [
              54.492913,
              24.529609
            ],
            [
              54.492504,
              24.529808
            ],
            [
              54.492333,
              24.529894
            ],
            [
              54.492247,
              24.529942
            ],
            [
              54.491988,
              24.530071
            ],
            [
              54.491851,
              24.530141
            ],
            [
              54.491674,
              24.530242
            ],
            [
              54.491232,
              24.530497
            ],
            [
              54.490985,
              24.530653
            ],
            [
              54.490743,
              24.530815
            ],
            [
              54.490431,
              24.531032
            ],
            [
              54.490125,
              24.531256
            ],
            [
              54.489974,
              24.531371
            ],
            [
              54.489825,
              24.531487
            ],
            [
              54.489623,
              24.531649
            ],
            [
              54.489424,
              24.531815
            ],
            [
              54.489229,
              24.531985
            ],
            [
              54.489003,
              24.53219
            ],
            [
              54.488782,
              24.5324
            ],
            [
              54.488567,
              24.532615
            ],
            [
              54.488357,
              24.532835
            ],
            [
              54.488159,
              24.533053
            ],
            [
              54.487966,
              24.533276
            ],
            [
              54.487779,
              24.533502
            ],
            [
              54.48751,
              24.53384
            ],
            [
              54.487377,
              24.53401
            ],
            [
              54.487248,
              24.534182
            ],
            [
              54.487096,
              24.534394
            ],
            [
              54.48695,
              24.53461
            ],
            [
              54.48681,
              24.534829
            ],
            [
              54.486676,
              24.535051
            ],
            [
              54.486542,
              24.535279
            ],
            [
              54.486414,
              24.535511
            ],
            [
              54.486289,
              24.535744
            ],
            [
              54.486039,
              24.536203
            ],
            [
              54.4842,
              24.539477
            ],
            [
              54.48407,
              24.539705
            ],
            [
              54.483934,
              24.539931
            ],
            [
              54.483785,
              24.540163
            ],
            [
              54.483629,
              24.540392
            ],
            [
              54.483439,
              24.54067
            ],
            [
              54.48324,
              24.540943
            ],
            [
              54.482938,
              24.541327
            ],
            [
              54.482637,
              24.54169
            ],
            [
              54.482405,
              24.541952
            ],
            [
              54.482108,
              24.542268
            ],
            [
              54.481369,
              24.542966
            ],
            [
              54.480875,
              24.543391
            ],
            [
              54.480663,
              24.543563
            ],
            [
              54.480448,
              24.543732
            ],
            [
              54.480188,
              24.543926
            ],
            [
              54.479923,
              24.544113
            ],
            [
              54.479654,
              24.544295
            ],
            [
              54.479432,
              24.544446
            ],
            [
              54.479206,
              24.544593
            ],
            [
              54.478978,
              24.544735
            ],
            [
              54.478691,
              24.544904
            ],
            [
              54.478399,
              24.545067
            ],
            [
              54.478103,
              24.545223
            ],
            [
              54.4778,
              24.545362
            ],
            [
              54.477494,
              24.545497
            ],
            [
              54.477186,
              24.545628
            ],
            [
              54.476862,
              24.545759
            ],
            [
              54.476536,
              24.545886
            ],
            [
              54.476207,
              24.546008
            ],
            [
              54.475636,
              24.546221
            ],
            [
              54.475437,
              24.546292
            ],
            [
              54.475231,
              24.546355
            ],
            [
              54.475024,
              24.546416
            ],
            [
              54.474752,
              24.546489
            ],
            [
              54.474504,
              24.546552
            ],
            [
              54.474285,
              24.5466
            ],
            [
              54.47394,
              24.546669
            ],
            [
              54.471275,
              24.547173
            ],
            [
              54.469867,
              24.547441
            ],
            [
              54.466898,
              24.547992
            ],
            [
              54.465054,
              24.548341
            ],
            [
              54.464408,
              24.548456
            ],
            [
              54.463526,
              24.548613
            ],
            [
              54.46217,
              24.548845
            ],
            [
              54.460968,
              24.549074
            ],
            [
              54.46041,
              24.549176
            ],
            [
              54.459813,
              24.549279
            ],
            [
              54.45944,
              24.54933
            ],
            [
              54.459093,
              24.549382
            ],
            [
              54.458573,
              24.549429
            ],
            [
              54.458311,
              24.549439
            ],
            [
              54.45805,
              24.549445
            ],
            [
              54.457788,
              24.549445
            ],
            [
              54.457526,
              24.549439
            ],
            [
              54.457264,
              24.549428
            ],
            [
              54.457003,
              24.549412
            ],
            [
              54.456742,
              24.549391
            ],
            [
              54.456482,
              24.549364
            ],
            [
              54.456223,
              24.549332
            ],
            [
              54.455964,
              24.549294
            ],
            [
              54.455707,
              24.549252
            ],
            [
              54.45545,
              24.549204
            ],
            [
              54.455195,
              24.54915
            ],
            [
              54.454939,
              24.549099
            ],
            [
              54.454628,
              24.549017
            ],
            [
              54.454321,
              24.548927
            ],
            [
              54.454016,
              24.548829
            ],
            [
              54.453714,
              24.548723
            ],
            [
              54.453416,
              24.548609
            ],
            [
              54.453121,
              24.548488
            ],
            [
              54.45304,
              24.548452
            ],
            [
              54.45283,
              24.54836
            ],
            [
              54.452,
              24.54792
            ],
            [
              54.451824,
              24.547826
            ],
            [
              54.451651,
              24.547727
            ],
            [
              54.451428,
              24.547593
            ],
            [
              54.451209,
              24.547452
            ],
            [
              54.450996,
              24.547304
            ],
            [
              54.450572,
              24.547019
            ],
            [
              54.450344,
              24.546849
            ],
            [
              54.45014,
              24.546696
            ],
            [
              54.449306,
              24.546053
            ],
            [
              54.448199,
              24.5452
            ],
            [
              54.447957,
              24.545021
            ],
            [
              54.44771,
              24.544847
            ],
            [
              54.447458,
              24.54468
            ],
            [
              54.4472,
              24.544518
            ],
            [
              54.446937,
              24.544362
            ],
            [
              54.44667,
              24.544212
            ],
            [
              54.446399,
              24.544069
            ],
            [
              54.446083,
              24.543916
            ],
            [
              54.44579,
              24.543785
            ],
            [
              54.445494,
              24.54366
            ],
            [
              54.445194,
              24.543541
            ],
            [
              54.444891,
              24.54343
            ],
            [
              54.444585,
              24.543325
            ],
            [
              54.444277,
              24.543227
            ],
            [
              54.443973,
              24.543127
            ],
            [
              54.443012,
              24.542811
            ],
            [
              54.442709,
              24.542719
            ],
            [
              54.442408,
              24.542622
            ],
            [
              54.442109,
              24.54252
            ],
            [
              54.441812,
              24.542414
            ],
            [
              54.441517,
              24.542303
            ],
            [
              54.441225,
              24.542188
            ],
            [
              54.441033,
              24.542109
            ],
            [
              54.440844,
              24.542025
            ],
            [
              54.440657,
              24.541938
            ],
            [
              54.440399,
              24.541809
            ],
            [
              54.440146,
              24.541672
            ],
            [
              54.439898,
              24.541527
            ],
            [
              54.439496,
              24.541255
            ],
            [
              54.439121,
              24.541001
            ],
            [
              54.438894,
              24.540835
            ],
            [
              54.438672,
              24.540662
            ],
            [
              54.438456,
              24.540483
            ],
            [
              54.438247,
              24.540298
            ],
            [
              54.438073,
              24.540135
            ],
            [
              54.437904,
              24.539968
            ],
            [
              54.43774,
              24.539797
            ],
            [
              54.437581,
              24.539622
            ],
            [
              54.437435,
              24.539453
            ],
            [
              54.437294,
              24.53928
            ],
            [
              54.437159,
              24.539104
            ],
            [
              54.436995,
              24.538878
            ],
            [
              54.436839,
              24.538647
            ],
            [
              54.436692,
              24.538411
            ],
            [
              54.43649,
              24.538053
            ],
            [
              54.436322,
              24.537726
            ],
            [
              54.435006,
              24.534969
            ],
            [
              54.434885,
              24.534726
            ],
            [
              54.434756,
              24.534488
            ],
            [
              54.434624,
              24.534264
            ],
            [
              54.434484,
              24.534044
            ],
            [
              54.434289,
              24.533757
            ],
            [
              54.434141,
              24.533553
            ],
            [
              54.433985,
              24.533353
            ],
            [
              54.433822,
              24.533158
            ],
            [
              54.433652,
              24.532968
            ],
            [
              54.433491,
              24.532798
            ],
            [
              54.433324,
              24.532632
            ],
            [
              54.433151,
              24.532471
            ],
            [
              54.432974,
              24.532315
            ],
            [
              54.432762,
              24.53214
            ],
            [
              54.43252,
              24.531943
            ],
            [
              54.432215,
              24.531727
            ],
            [
              54.431998,
              24.531581
            ],
            [
              54.431777,
              24.531441
            ],
            [
              54.431551,
              24.531308
            ],
            [
              54.431306,
              24.531172
            ],
            [
              54.431056,
              24.531043
            ],
            [
              54.430802,
              24.530921
            ],
            [
              54.430544,
              24.530807
            ],
            [
              54.430282,
              24.5307
            ],
            [
              54.42995,
              24.530577
            ],
            [
              54.42953,
              24.530446
            ],
            [
              54.429105,
              24.530327
            ],
            [
              54.428875,
              24.530273
            ],
            [
              54.428643,
              24.530224
            ],
            [
              54.42841,
              24.530181
            ],
            [
              54.428145,
              24.53014
            ],
            [
              54.427879,
              24.530105
            ],
            [
              54.427612,
              24.530078
            ],
            [
              54.427344,
              24.530058
            ],
            [
              54.427119,
              24.530047
            ],
            [
              54.426893,
              24.530041
            ],
            [
              54.426683,
              24.53004
            ],
            [
              54.426473,
              24.530045
            ],
            [
              54.426263,
              24.530053
            ],
            [
              54.425985,
              24.53007
            ],
            [
              54.425722,
              24.530095
            ],
            [
              54.422628,
              24.530461
            ],
            [
              54.422496,
              24.530479
            ],
            [
              54.422364,
              24.530502
            ],
            [
              54.422237,
              24.530529
            ],
            [
              54.422112,
              24.530561
            ],
            [
              54.420258,
              24.530809
            ],
            [
              54.419844,
              24.530863
            ],
            [
              54.419425,
              24.530872
            ],
            [
              54.419155,
              24.530891
            ],
            [
              54.418853,
              24.530905
            ],
            [
              54.418615,
              24.530912
            ],
            [
              54.418377,
              24.530915
            ],
            [
              54.41814,
              24.530913
            ],
            [
              54.417902,
              24.530906
            ],
            [
              54.417614,
              24.530891
            ],
            [
              54.417327,
              24.530868
            ],
            [
              54.417041,
              24.530838
            ],
            [
              54.416707,
              24.530797
            ],
            [
              54.416375,
              24.530746
            ],
            [
              54.416051,
              24.530688
            ],
            [
              54.415729,
              24.53062
            ],
            [
              54.415409,
              24.530544
            ],
            [
              54.41519,
              24.530488
            ],
            [
              54.414972,
              24.530428
            ],
            [
              54.414759,
              24.530364
            ],
            [
              54.414214,
              24.530178
            ],
            [
              54.413989,
              24.530101
            ],
            [
              54.413767,
              24.530019
            ],
            [
              54.413547,
              24.529931
            ],
            [
              54.413327,
              24.529837
            ],
            [
              54.41311,
              24.529737
            ],
            [
              54.412813,
              24.529591
            ],
            [
              54.412693,
              24.529532
            ],
            [
              54.412665,
              24.529518
            ],
            [
              54.41222,
              24.529284
            ],
            [
              54.412084,
              24.529206
            ],
            [
              54.4119,
              24.529095
            ],
            [
              54.411538,
              24.528836
            ],
            [
              54.411321,
              24.528675
            ],
            [
              54.411106,
              24.528512
            ],
            [
              54.410473,
              24.528024
            ],
            [
              54.408912,
              24.526819
            ],
            [
              54.406741,
              24.525182
            ],
            [
              54.405383,
              24.524137
            ],
            [
              54.398751,
              24.519165
            ],
            [
              54.397723,
              24.518382
            ],
            [
              54.397705,
              24.518368
            ],
            [
              54.397536,
              24.51824
            ],
            [
              54.396292,
              24.517305
            ],
            [
              54.395782,
              24.516924
            ],
            [
              54.395229,
              24.516528
            ],
            [
              54.395035,
              24.51642
            ],
            [
              54.394891,
              24.516311
            ],
            [
              54.394595,
              24.516088
            ],
            [
              54.394382,
              24.515968
            ],
            [
              54.394145,
              24.51585
            ],
            [
              54.393753,
              24.515689
            ],
            [
              54.393356,
              24.515546
            ],
            [
              54.392983,
              24.51545
            ],
            [
              54.392657,
              24.51538
            ],
            [
              54.392301,
              24.515329
            ],
            [
              54.391941,
              24.51528
            ],
            [
              54.390027,
              24.515032
            ],
            [
              54.386975,
              24.514569
            ],
            [
              54.38616,
              24.514446
            ],
            [
              54.385798,
              24.514399
            ],
            [
              54.385434,
              24.514356
            ],
            [
              54.385046,
              24.514317
            ],
            [
              54.384631,
              24.514279
            ],
            [
              54.383547,
              24.514201
            ],
            [
              54.38333,
              24.514191
            ],
            [
              54.383112,
              24.514186
            ],
            [
              54.382894,
              24.514186
            ],
            [
              54.382662,
              24.514198
            ],
            [
              54.382457,
              24.514223
            ],
            [
              54.381475,
              24.514444
            ],
            [
              54.381199,
              24.514489
            ],
            [
              54.38092,
              24.514506
            ],
            [
              54.38064,
              24.514494
            ],
            [
              54.380363,
              24.514454
            ],
            [
              54.380093,
              24.514385
            ],
            [
              54.379833,
              24.51429
            ],
            [
              54.379624,
              24.514193
            ],
            [
              54.379475,
              24.514104
            ],
            [
              54.379331,
              24.514009
            ],
            [
              54.379205,
              24.513918
            ],
            [
              54.379084,
              24.513822
            ],
            [
              54.378832,
              24.513634
            ],
            [
              54.378577,
              24.513451
            ],
            [
              54.378319,
              24.513271
            ],
            [
              54.378058,
              24.513095
            ],
            [
              54.377191,
              24.512538
            ],
            [
              54.377069,
              24.512455
            ],
            [
              54.376952,
              24.512365
            ],
            [
              54.376859,
              24.512283
            ],
            [
              54.37677,
              24.512196
            ],
            [
              54.376257,
              24.511677
            ],
            [
              54.375676,
              24.511113
            ],
            [
              54.369834,
              24.505382
            ],
            [
              54.369791,
              24.505343
            ],
            [
              54.369728,
              24.505279
            ],
            [
              54.369604,
              24.505164
            ],
            [
              54.36956,
              24.505123
            ],
            [
              54.36771,
              24.503378
            ],
            [
              54.366748,
              24.502462
            ],
            [
              54.366423,
              24.502164
            ],
            [
              54.366074,
              24.501827
            ],
            [
              54.365487,
              24.501271
            ],
            [
              54.364887,
              24.500736
            ],
            [
              54.364666,
              24.500533
            ],
            [
              54.364551,
              24.500435
            ],
            [
              54.364163,
              24.500131
            ],
            [
              54.36397,
              24.499976
            ],
            [
              54.362637,
              24.498959
            ],
            [
              54.36209,
              24.498504
            ],
            [
              54.361252,
              24.497812
            ],
            [
              54.360804,
              24.497422
            ],
            [
              54.360392,
              24.497074
            ],
            [
              54.359404,
              24.496262
            ],
            [
              54.35896,
              24.495925
            ],
            [
              54.358451,
              24.495543
            ],
            [
              54.357482,
              24.494856
            ],
            [
              54.357392,
              24.494786
            ],
            [
              54.357313,
              24.494718
            ],
            [
              54.35722,
              24.494632
            ],
            [
              54.357139,
              24.494541
            ],
            [
              54.355727,
              24.493562
            ],
            [
              54.355323,
              24.493277
            ],
            [
              54.353819,
              24.492214
            ],
            [
              54.353341,
              24.491854
            ],
            [
              54.353239,
              24.491767
            ],
            [
              54.352855,
              24.491438
            ],
            [
              54.352837,
              24.491425
            ],
            [
              54.352527,
              24.491144
            ],
            [
              54.352057,
              24.490662
            ],
            [
              54.35178,
              24.490353
            ],
            [
              54.351504,
              24.490031
            ],
            [
              54.351318,
              24.489787
            ],
            [
              54.351162,
              24.489569
            ],
            [
              54.350954,
              24.489271
            ],
            [
              54.350764,
              24.488965
            ],
            [
              54.350564,
              24.488628
            ],
            [
              54.350395,
              24.488312
            ],
            [
              54.349792,
              24.487108
            ],
            [
              54.349183,
              24.485874
            ],
            [
              54.347467,
              24.482412
            ],
            [
              54.346613,
              24.480695
            ],
            [
              54.345919,
              24.479299
            ],
            [
              54.345642,
              24.478731
            ],
            [
              54.345503,
              24.478441
            ],
            [
              54.345426,
              24.478304
            ],
            [
              54.34537,
              24.47819
            ],
            [
              54.345346,
              24.478144
            ],
            [
              54.345034,
              24.477531
            ],
            [
              54.344806,
              24.477116
            ],
            [
              54.344553,
              24.476693
            ],
            [
              54.344344,
              24.476394
            ],
            [
              54.344157,
              24.476127
            ],
            [
              54.343907,
              24.475793
            ],
            [
              54.343517,
              24.475314
            ],
            [
              54.342993,
              24.474746
            ],
            [
              54.342693,
              24.47446
            ],
            [
              54.342387,
              24.47419
            ],
            [
              54.341875,
              24.473773
            ],
            [
              54.341357,
              24.473384
            ],
            [
              54.341031,
              24.473163
            ],
            [
              54.340934,
              24.473101
            ],
            [
              54.340833,
              24.473042
            ],
            [
              54.340778,
              24.473009
            ],
            [
              54.337819,
              24.471235
            ],
            [
              54.337171,
              24.470846
            ],
            [
              54.336751,
              24.470604
            ],
            [
              54.336639,
              24.470541
            ],
            [
              54.336538,
              24.47048
            ],
            [
              54.336518,
              24.470469
            ],
            [
              54.336281,
              24.470327
            ],
            [
              54.334019,
              24.468976
            ],
            [
              54.333475,
              24.468648
            ],
            [
              54.332658,
              24.468159
            ],
            [
              54.332507,
              24.468065
            ],
            [
              54.332472,
              24.468043
            ],
            [
              54.331757,
              24.467613
            ],
            [
              54.330312,
              24.466743
            ],
            [
              54.329911,
              24.466503
            ],
            [
              54.329884,
              24.466459
            ],
            [
              54.329856,
              24.466422
            ],
            [
              54.329831,
              24.466395
            ],
            [
              54.329804,
              24.466369
            ],
            [
              54.329743,
              24.466325
            ],
            [
              54.329652,
              24.46627
            ],
            [
              54.329134,
              24.465959
            ],
            [
              54.3291,
              24.465935
            ],
            [
              54.329079,
              24.465915
            ],
            [
              54.329056,
              24.465879
            ],
            [
              54.329047,
              24.465853
            ],
            [
              54.329043,
              24.465829
            ],
            [
              54.329045,
              24.465796
            ],
            [
              54.329105,
              24.465717
            ],
            [
              54.32918,
              24.465613
            ],
            [
              54.329273,
              24.465496
            ],
            [
              54.329582,
              24.46511
            ],
            [
              54.329735,
              24.464918
            ],
            [
              54.329899,
              24.464713
            ],
            [
              54.330105,
              24.464395
            ],
            [
              54.330208,
              24.464257
            ],
            [
              54.329988,
              24.464108
            ],
            [
              54.329764,
              24.463957
            ],
            [
              54.32935,
              24.46368
            ],
            [
              54.329305,
              24.46365
            ],
            [
              54.329144,
              24.463542
            ],
            [
              54.329057,
              24.463484
            ],
            [
              54.328877,
              24.463361
            ],
            [
              54.328393,
              24.463026
            ],
            [
              54.328182,
              24.46288
            ],
            [
              54.328033,
              24.462779
            ],
            [
              54.327989,
              24.46275
            ],
            [
              54.327949,
              24.462716
            ],
            [
              54.327913,
              24.462677
            ],
            [
              54.327882,
              24.462637
            ],
            [
              54.327849,
              24.46263
            ],
            [
              54.327793,
              24.462654
            ],
            [
              54.327739,
              24.462689
            ],
            [
              54.327689,
              24.462728
            ],
            [
              54.327647,
              24.462769
            ],
            [
              54.327609,
              24.462813
            ],
            [
              54.327573,
              24.462858
            ],
            [
              54.327307,
              24.463191
            ],
            [
              54.327154,
              24.46338
            ],
            [
              54.326689,
              24.463952
            ],
            [
              54.326695,
              24.464088
            ],
            [
              54.326697,
              24.464119
            ],
            [
              54.326704,
              24.464148
            ],
            [
              54.326715,
              24.464177
            ],
            [
              54.326732,
              24.464205
            ],
            [
              54.326754,
              24.464229
            ],
            [
              54.32678,
              24.46425
            ],
            [
              54.326819,
              24.464274
            ],
            [
              54.32729,
              24.464521
            ],
            [
              54.327329,
              24.464488
            ],
            [
              54.327344,
              24.464475
            ],
            [
              54.327363,
              24.46446
            ],
            [
              54.327377,
              24.464448
            ],
            [
              54.327401,
              24.464414
            ],
            [
              54.327412,
              24.464374
            ],
            [
              54.327408,
              24.464334
            ],
            [
              54.327397,
              24.464304
            ],
            [
              54.327428,
              24.4643
            ],
            [
              54.327458,
              24.464304
            ],
            [
              54.327486,
              24.464316
            ]
          ]
        }
      } as Feature) as DPolygon).divideToPieces(145952).toArrayOfCoords()))
        .toMatchSnapshot();
    });
  });

  describe('filter', () => {
    test('1', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))').filter((p: DPoint) => p.x > 20)
        .toWKT()).toBe('POLYGON ((30 10, 40 40, 30 10))');
    });
  });

  describe('map', () => {
    test('1', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))').map((p) => {
        p.x = 3;
        return p;
      })
        .toWKT()).toBe('POLYGON ((3 10, 3 40, 3 40, 3 20, 3 10))');
    });
    test('2', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10),' +
        ' (25 18, 30 31, 21 32, 18 22, 25 18))').map((p) => {
        p.x = 3;
        return p;
      })
        .toWKT()).toBe('POLYGON ((3 10, 3 40, 3 40, 3 20, 3 10), (3 18, 3 31, 3 32, 3 22, 3 18))');
    });
  });

  describe('at', () => {
    test('1', () => {
      const t = DPolygon.parseFromWKT('POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))');
      expect(t.at(0)).toEqual({
        x: 30,
        y: 10,
        z: undefined,
        properties: {}
      });
      expect(t.at(5)).toEqual({
        x: 30,
        y: 10,
        z: undefined,
        properties: {}
      });
      expect(t.at(-2)).toEqual({
        x: 10,
        y: 20,
        z: undefined,
        properties: {}
      });
    });
  });

  describe('pop', () => {
    const t = new DPolygon([new DPoint(12, 34)]);
    test(('1'), () => {
      expect(t.pop()).toEqual({
        x: 12,
        y: 34,
        z: undefined,
        properties: {}
      });
    });
    test(('2'), () => {
      expect(t.pop()).toBe(undefined);
    });
  });

  describe('push', () => {
    const t = new DPolygon();
    test('1', () => {
      expect(t.push(new DPoint(12, 34))).toBe(1);
    });
    test('2', () => {
      expect(t).toEqual({
        holes: [],
        pPoints: [
          {
            x: 12,
            y: 34,
            z: undefined,
            properties: {}
          }
        ],
        properties: {},
        searchStore: {}
      });
    });
  });

  describe('shift', () => {
    const t = new DPolygon([new DPoint(12, 34)]);
    test(('1'), () => {
      expect(t.shift()).toEqual({
        x: 12,
        y: 34,
        z: undefined,
        properties: {}
      });
    });
    test(('2'), () => {
      expect(t.shift()).toBe(undefined);
    });
  });

  describe('unshift', () => {
    const t = new DPolygon();
    test('1', () => {
      expect(t.unshift(new DPoint(12, 34))).toBe(1);
    });
    test('2', () => {
      expect(t).toEqual({
        holes: [],
        pPoints: [
          {
            x: 12,
            y: 34,
            z: undefined,
            properties: {}
          }
        ],
        properties: {},
        searchStore: {}
      });
    });
  });

  describe('reverse', () => {
    test('1', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))').reverse()
        .toWKT()).toBe('POLYGON ((30 10, 10 20, 20 40, 40 40, 30 10))');
    });
  });

  describe('getValue', () => {
    test('1', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))')
        .getValue()).toBe('30,10,40,40,20,40,10,20,30,10');
    });
    test('2', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((35 10, 45 45, 15 40, 10 20, 35 10), (20 30, 35 35, 30 20, 20 30))')
        .getValue()).toBe('35,10,45,45,15,40,10,20,35,1020,30,35,35,30,20,20,30');
    });
  });

  describe('toString', () => {
    test('1', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))')
        .toString()).toBe('(30 10, 40 40, 20 40, 10 20, 30 10)');
    });
  });

  describe('close', () => {
    test('1', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))')
        .close()
        .toString()).toBe('(30 10, 40 40, 20 40, 10 20, 30 10)');
    });
    test('2', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((30 10, 40 40, 20 40, 10 20))')
        .close()
        .toString()).toBe('(30 10, 40 40, 20 40, 10 20, 30 10)');
    });
  });

  describe('open', () => {
    test('1', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))')
        .open()
        .toString()).toBe('(30 10, 40 40, 20 40, 10 20)');
    });
    test('2', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((30 10, 40 40, 20 40, 10 20))')
        .open()
        .toString()).toBe('(30 10, 40 40, 20 40, 10 20)');
    });
  });

  describe('add', () => {
    test('1', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((35 10, 45 45, 15 40), (20 30, 35 35))')
        .add(DPolygon.parseFromWKT('POLYGON ((10 20, 35 10), (30 20, 20 30))'))
        .toWKT()).toBe('POLYGON ((35 10, 45 45, 15 40, 10 20, 35 10), (20 30, 35 35), (30 20, 20 30))');
    });
  });

  describe('has', () => {
    const t = DPolygon.parseFromWKT('POLYGON ((35 10, 45 45, 15 40), (20 30, 35 35))');
    test('1', () => {
      expect(t.has(new DPoint(45, 45))).toBe(true);
    });
    test('2', () => {
      expect(t.has(DPoint.zero())).toBe(false);
    });
  });

  describe('clone', () => {
    const t1 = DPolygon.parseFromWKT('POLYGON ((35 10, 45 45, 15 40), (20 30, 35 35))');
    const t2 = t1.clone();
    test('1', () => {
      expect(t1.toWKT()).toBe(t2.toWKT());
    });
  });

  describe('cloneByDistanceProportions', () => {
    test('1', () => {
      expect(DPolygon.parseFromWKT('LINESTRING (0 0, 1 0, 10 0)').cloneByDistanceProportions([0, 0.1, 1])
        .toWKT(DPolygon.WKT_LINESTRING)).toBe('LINESTRING (0 0, 1 0, 10 0)');
    });
    test('2', () => {
      expect(DPolygon.parseFromWKT('LINESTRING (0 0, 1 0, 10 0)').cloneByDistanceProportions([0, 0.5, 1])
        .toWKT(DPolygon.WKT_LINESTRING)).toBe('LINESTRING (0 0, 1 0, 5 0, 10 0)');
    });
  });

  describe('middleLinestring', () => {
    test('1', () => {
      expect(DPolygon
        .parse([[1, 1], [2, 7], [3, 12], [4, 16], [5, 12], [6, 7], [7, 1]])
        .middleLinestring(DPolygon.parse([[1, 0], [4, 10], [7, 0]]))
        .toArrayOfCoords()).toStrictEqual([
        [1, 0.5],
        [2.0961588214479354, 5.487196071493119],
        [3.0959030492756936, 9.653010164252311],
        [4, 13],
        [4.904096950724306, 9.653010164252311],
        [5.903841178552065, 5.487196071493118],
        [7, 0.5]
      ]);
    });
    test('2', () => {
      expect((DPolygon
        .parse({
          type: 'Feature',
          properties: {},
          geometry: {
            coordinates: [
              [
                53.90376187451824,
                24.793433405138444
              ],
              [
                53.98931938282388,
                24.88477770574596
              ],
              [
                54.04065388780572,
                24.999775394733604
              ],
              [
                54.04568668241197,
                25.09825927347623
              ]
            ],
            type: 'LineString'
          }
        }) as DPolygon)
        .middleLinestring((DPolygon.parse({
          type: 'Feature',
          properties: {},
          geometry: {
            coordinates: [
              [
                53.924899611864106,
                24.659949886694136
              ],
              [
                54.07789656789251,
                24.746821879459333
              ],
              [
                54.17452622433029,
                24.84368111277925
              ],
              [
                54.19868363844037,
                24.966929868464092
              ],
              [
                54.19063116707122,
                25.104639756328766
              ]
            ],
            type: 'LineString'
          }
        })) as DPolygon).toGeoJSONFeature()).toStrictEqual({
        geometry: {
          coordinates: [
            [
              53.91433074319117,
              24.72669164591629
            ],
            [
              54.02732111055528,
              24.809087707598472
            ],
            [
              54.044311848519456,
              24.82652909648526
            ],
            [
              54.095095079235115,
              24.89373746159241
            ],
            [
              54.11730637336795,
              24.97129995093953
            ],
            [
              54.12004912864668,
              24.990795786932253
            ],
            [
              54.11815892474159,
              25.101449514902498
            ]
          ],
          type: 'LineString'
        },
        properties: {},
        type: 'Feature'
      });
    });
    test('3', () => {
      expect((DPolygon
        .parse({
          type: 'Feature',
          properties: {},
          geometry: {
            coordinates: [
              [
                52.93373732278516,
                25.712762554718267
              ],
              [
                53.39744423356544,
                24.730769661209095
              ],
              [
                54.39336021239825,
                25.665276855371204
              ]
            ],
            type: 'LineString'
          }
        }) as DPolygon)
        .middleLinestring((DPolygon.parse({
          type: 'Feature',
          properties: {},
          geometry: {
            coordinates: [
              [
                53.06020284390735,
                25.911995336365635
              ],
              [
                53.112896811041765,
                25.689022071436256
              ],
              [
                53.191937761741656,
                25.517951071658132
              ],
              [
                53.29205629929666,
                25.41804681945611
              ],
              [
                53.42379121713259,
                25.327585860105543
              ],
              [
                54.31431926169839,
                25.741244882973305
              ]
            ],
            type: 'LineString'
          }
        })) as DPolygon).toGeoJSONFeature()).toStrictEqual({
        geometry: {
          coordinates: [
            [
              52.996970083346255,
              25.81237894554195
            ],
            [
              53.093831788884486,
              25.55156316948788
            ],
            [
              53.19135096742416,
              25.34320371972639
            ],
            [
              53.28494045083767,
              25.201067585943605
            ],
            [
              53.39999072031441,
              25.051682586831916
            ],
            [
              53.42627547028428,
              25.03645093695956
            ],
            [
              54.35383973704832,
              25.703260869172254
            ]
          ],
          type: 'LineString'
        },
        properties: {},
        type: 'Feature'
      });
    });
    test('4', () => {
      expect((DPolygon
        .parse({
          type: 'Feature',
          properties: {},
          geometry: {
            coordinates: [
              [
                53.10587108952734,
                24.748639974217383
              ],
              [
                53.71198705495979,
                24.85868038617835
              ],
              [
                54.20942015762543,
                25.331868891150293
              ],
              [
                54.39752511241471,
                25.81826704677043
              ],
              [
                54.238680942281206,
                26.160189966281777
              ],
              [
                53.78610648359094,
                26.36782508365465
              ],
              [
                53.28449327251158,
                26.169158446302333
              ],
              [
                53.10892864863371,
                25.88744743406778
              ],
              [
                53.31375407051965,
                25.43908534064269
              ],
              [
                53.643064609944304,
                25.221885540680006
              ],
              [
                54.09451650258137,
                25.100814326433735
              ],
              [
                54.47490652322955,
                25.044020872502955
              ],
              [
                54.989060067622205,
                25.153797768859036
              ]
            ],
            type: 'LineString'
          }
        }) as DPolygon)
        .middleLinestring((DPolygon.parse({
          type: 'Feature',
          properties: {},
          geometry: {
            coordinates: [
              [
                53.01604809239234,
                24.998567159813618
              ],
              [
                53.684865711114696,
                25.15001399950792
              ],
              [
                54.119597163283856,
                25.633378424295614
              ],
              [
                54.02763474070974,
                26.058479828508382
              ],
              [
                53.463319874912116,
                26.009652247751802
              ],
              [
                53.49258064573189,
                25.625840773573742
              ],
              [
                54.44564575241108,
                25.24835383581042
              ],
              [
                54.88873742481357,
                25.35794673680627
              ]
            ],
            type: 'LineString'
          }
        })) as DPolygon).toGeoJSONFeature()).toStrictEqual({
        geometry: {
          coordinates: [
            [
              53.06095959095984,
              24.8736035670155
            ],
            [
              53.580413407859595,
              24.977624373896276
            ],
            [
              53.82013258799905,
              25.120121508752145
            ],
            [
              54.03158402919075,
              25.334828880946496
            ],
            [
              54.251241487572,
              25.717684243302397
            ],
            [
              54.25215907092229,
              25.73960362162248
            ],
            [
              54.152741800223666,
              26.01880696084909
            ],
            [
              54.0162899963528,
              26.162952303939726
            ],
            [
              53.8204745730753,
              26.205677002517078
            ],
            [
              53.37607071850098,
              26.089592600563755
            ],
            [
              53.37231163438149,
              26.086846107225323
            ],
            [
              53.29504734225745,
              25.831506421376922
            ],
            [
              53.344063732884976,
              25.66184067487656
            ],
            [
              53.49842794483027,
              25.494732552746406
            ],
            [
              53.79518244367167,
              25.33381121833697
            ],
            [
              54.17742444662399,
              25.211283238903235
            ],
            [
              54.40691494827685,
              25.154154351437285
            ],
            [
              54.49800369897213,
              25.155518770501686
            ],
            [
              54.93889874621789,
              25.255872252832653
            ]
          ],
          type: 'LineString'
        },
        properties: {},
        type: 'Feature'
      });
    });
  });

  describe('equal', () => {
    const t1 = DPolygon.parseFromWKT('POLYGON ((35 10, 45 45, 15 40), (20 30, 35 35))');
    const t2 = DPolygon.parseFromWKT('POLYGON ((45 45, 15 40, 35 10), (35 35, 20 30))');
    const t3 = DPolygon.parseFromWKT('POLYGON ((45 45, 15 40, 35 10), (35 35, 20 30, 0 0))');
    const t4 = DPolygon.parseFromWKT('POLYGON ((15 40, 35 10), (35 35, 20 30, 0 0))');
    test('1', () => {
      expect(t1.equal(t2)).toBe(true);
    });
    test('2', () => {
      expect(t1.equal(t3)).toBe(false);
    });
    test('3', () => {
      expect(t1.equal(null)).toBe(false);
    });
    test('3', () => {
      expect(t1.equal(t4)).toBe(false);
    });
  });

  describe('same', () => {
    const t1 = DPolygon.parseFromWKT('POLYGON ((35 10, 45 45, 15 40), (20 30, 35 35))');
    const t2 = DPolygon.parseFromWKT('POLYGON ((45 45, 15 40, 35 10), (35 35, 20 30))');
    const t3 = DPolygon.parseFromWKT('POLYGON ((45 45, 15 40, 35 10), (35 35, 20 30, 0 0))');
    const t4 = DPolygon.parseFromWKT('POLYGON ((45 45, 15 40), (35 35, 20 30, 0 0))');
    test('1', () => {
      expect(t1.same(t2)).toBe(true);
    });
    test('2', () => {
      expect(t1.same(t3)).toBe(true);
    });
    test('2', () => {
      expect(t1.same(t4)).toBe(false);
    });
  });

  describe('findIndex', () => {
    const t1 = DPolygon.parseFromWKT('POLYGON ((35 10, 45 45, 15 40))');
    test('1', () => {
      expect(t1.findIndex(new DPoint(45, 45))).toBe(1);
    });
    test('2', () => {
      expect(t1.findIndex(DPoint.zero())).toBe(-1);
    });
    test('3', () => {
      expect(t1.findIndex(t1.at(2))).toBe(2);
    });
  });

  describe('approximation', () => {
    test('1', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((40 40, 30 30, 40 20, 30 10))').approximation()
        .toString()).toBe('(40 40, 30 30, 40 20, 30 10)');
    });
    test('2', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((40 40, 30 30, 40 20, 30 10))').approximation(1000000000)
        .toString()).toBe('(40 40, 30 10)');
    });
  });

  describe('contain', () => {
    const t = DPolygon.parseFromWKT('POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))');
    test('1', () => {
      expect(t.contain(new DPoint(20, 20))).toBe(true);
    });
    test('2', () => {
      expect(t.contain(new DPoint(10, 20))).toBe(false);
    });
    test('3', () => {
      expect(t.contain(new DPoint(0, 0))).toBe(false);
    });
    test('4', () => {
      expect(t.contain(new DPoint(30, 40), true)).toBe(true);
    });
    test('5', () => {
      expect(t.contain(new DPoint(30, 40), false)).toBe(false);
    });
    test('6', () => {
      expect(t.contain(new DPoint(10, 20), true)).toBe(true);
    });
    test('7', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((' +
        '104.30941772460938 42.41554259064343,' +
        ' 139.97471004509413 44.11388932737724,' +
        ' 140.7854321633292 25.197157289769727,' +
        ' 104.30941772460938 22.935078076843972' +
        '))').contain(new DPoint(122.14206388485175, 33.5244837021106))).toBe(true);
    });
  });

  describe('onBorder', () => {
    const t = DPolygon.parseFromWKT('POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))');
    test('1', () => {
      expect(t.onBorder(new DPoint(20, 20))).toBe(false);
    });
    test('2', () => {
      expect(t.onBorder(new DPoint(10, 20))).toBe(true);
    });
    test('3', () => {
      expect(t.onBorder(new DPoint(0, 0))).toBe(false);
    });
    test('4', () => {
      expect(t.onBorder(new DPoint(30, 40))).toBe(true);
    });
  });

  describe('nextStart', () => {
    test('1', () => {
      const t1 = DPolygon.parseFromWKT('POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))');
      const t2 = DPolygon.parseFromWKT('POLYGON ((40 40, 20 40, 10 20, 30 10, 40 40))');
      expect(t1.clone().nextStart()
        .equal(t2)).toBe(true);
      expect(t1.clone().nextStart()
        .equal(t1)).toBe(true);
    });
  });

  describe('removeDuplicates', () => {
    test('1', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((30 10, 40 40, 40 40, 20 40, 40 40, 10 20, 30 10))')
        .removeDuplicates()
        .toWKT()).toBe('POLYGON ((30 10, 40 40, 20 40, 40 40, 10 20, 30 10))');
    });
  });

  // describe('drawPolygonOnCanvas', () => {
  //   test('1', () => {
  //     const [t] = createCanvas(100);
  //     DPolygon.parseFromWKT('POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))')
  //       .drawPolygonOnCanvas(
  //         t,
  //         '#ff0000',
  //         '#00ff00',
  //         '#0000ff',
  //         2
  //       );
  //     expect(t.toDataURL()).toMatchSnapshot();
  //   });
  //   test('2', () => {
  //     const [t] = createCanvas(100);
  //     DPolygon.parseFromWKT('POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))')
  //       .drawPolygonOnCanvas(
  //         t,
  //         undefined,
  //         '#00ff00'
  //       );
  //     expect(t.toDataURL()).toMatchSnapshot();
  //   });
  //   test('3', () => {
  //     const [t] = createCanvas(100);
  //     DPolygon.parseFromWKT('POINT (30 10)')
  //       .drawPolygonOnCanvas(
  //         t,
  //         '#ff0000',
  //         '#00ff00',
  //         '#0000ff',
  //         2
  //       );
  //     expect(t.toDataURL()).toMatchSnapshot();
  //   });
  // });

  // describe('clearPolygonOnCanvas', () => {
  //   test('1', () => {
  //     const [canvas] = createCanvas(150, 100);
  //     canvas.width = 150;
  //     canvas.height = 100;
  //     const ctx = canvas.getContext('2d')!;
  //     ctx.fillStyle = 'green';
  //     ctx.fillRect(0, 0, 150, 100);
  //     DPolygon.parseFromWKT('POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))')
  //       .clearPolygonOnCanvas(canvas);
  //     expect(canvas.toDataURL()).toMatchSnapshot();
  //   });
  // });

  describe('Contain - old', () => {
    describe('1', () => {
      const poly = DPolygon.parseFromWKT('POLYGON ((0 0, 0 2, 2 2, 2 0, 0 0))');
      test('1', () => {
        const point = DPoint.parseFromWKT('POINT (1 1)');
        expect(poly.contain(point)).toBe(true);
      });
      test('2', () => {
        const point = DPoint.parseFromWKT('POINT (1 3)');
        expect(poly.contain(point)).toBe(false);
      });
    });
    describe('2', () => {
      const poly = DPolygon.parseFromWKT('POLYGON ((1 8, 2 5, 5 8, 5 2, 1 2, 1 8), (2 7, 4 7, 4 3, 2 3, 2 7))');
      test('1', () => {
        const point = DPoint.parseFromWKT('POINT (2 6)');
        expect(poly.contain(point)).toBe(false);
      });
      test('2', () => {
        const point = DPoint.parseFromWKT('POINT (3 5)');
        expect(poly.contain(point)).toBe(true);
      });
    });
    describe('3', () => {
      const poly = DPolygon.parseFromWKT('POLYGON ((2 6, 4 6, 4 8, 8 8, 8 4, 6 4, 6 2, 2 2, 2 6))');
      test('1', () => {
        const point = DPoint.parseFromWKT('POINT (5 6)');
        expect(poly.contain(point)).toBe(true);
      });
    });
    describe('4', () => {
      const poly = DPolygon.parseFromWKT('POLYGON ((1 10, 10 10, 1 9,' +
        ' 10 9, 0 8, 10 8, 0 7, 9 7, 1 6, 7 6, 0 5, 9 5, ' +
        '1 4, 9 4, 0 3, 8 3, 0 2, 9 2, 0 1, 10 1, 0 0, 11 0, 1 10))');
      test('1', () => {
        const point = DPoint.parseFromWKT('POINT (5 6.1)');
        expect(poly.contain(point)).toBe(false);
      });
      test('2', () => {
        const point = DPoint.parseFromWKT('POINT (5 6)');
        expect(poly.contain(point)).toBe(false);
      });
      test('3', () => {
        const point = DPoint.parseFromWKT('POINT (5 5.1)');
        expect(poly.contain(point)).toBe(true);
      });
    });
  });

  test('fast search', () => {
    const poly = DPolygon.parseFromWKT('POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))');
    expect(poly.fastHas(new DPoint(11, 21))).toBe(false);
    expect(poly.fastHas(new DPoint(30, 10))).toBe(false);
    poly.prepareToFastSearch();
    expect(poly.fastHas(new DPoint(11, 21))).toBe(false);
    expect(poly.fastHas(new DPoint(10, 21))).toBe(false);
    expect(poly.fastHas(new DPoint(30, 10))).toBe(true);
    expect(poly.fastHas(new DPoint(30, 10, 7))).toBe(false);
  });

  describe('growingPiecesGenerator', () => {
    const poly = DPolygon.parseFromWKT('POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))').divideToPieces(4);
    test('1', () => {
      expect([...poly.growingPiecesGenerator()].map((v: DPolygon) => v.toString())).toEqual([
        '(30 10, 35.84890578305056 27.546717349151677)',
        '(30 10, 35.84890578305056 27.546717349151677, 40 40, 34.631048413342945 40)',
        '(30 10, 35.84890578305056 27.546717349151677, 40 40, 34.631048413342945 40, 20 40,' +
        ' 18.271601883432528 36.543203766865055)',
        '(30 10, 35.84890578305056 27.546717349151677, 40 40, 34.631048413342945 40, 20 40, 18.271601883432528' +
        ' 36.543203766865055, 10 20)',
        '(30 10, 35.84890578305056 27.546717349151677, 40 40, 34.631048413342945 40, 20 40, 18.271601883432528' +
        ' 36.543203766865055, 10 20, 26.543203766865055 11.728398116567472)'
      ]);
    });
  });

  describe('Parse', () => {
    test('LatLng', () => {
      const t = DPolygon.parse([{lat: 10, lng: 20}, {lat: 30, lng: 40}]);
      expect(t).toEqual({
        holes: [],
        properties: {},
        searchStore: {},
        pPoints: [
          {
            x: 20,
            y: 10,
            z: 0,
            properties: {}
          },
          {
            x: 40,
            y: 30,
            z: 0,
            properties: {}
          }
        ]
      });
    });
    test('Number[]', () => {
      const t = DPolygon.parse([[11, 12, 13, 14], [110, 120, 130, 140]]);
      expect(t).toEqual({
        holes: [],
        properties: {},
        searchStore: {},
        pPoints: [
          {
            x: 11,
            y: 12,
            z: 13,
            properties: {}
          },
          {
            x: 110,
            y: 120,
            z: 130,
            properties: {}
          }
        ]
      });
    });
    test('DCoord (2 elements)', () => {
      const t = DPolygon.parse([[110, 120], [111, 121]]);
      expect(t).toEqual({
        holes: [],
        properties: {},
        searchStore: {},
        pPoints: [
          {
            x: 110,
            y: 120,
            z: undefined,
            properties: {}
          },
          {
            x: 111,
            y: 121,
            z: undefined,
            properties: {}
          }
        ]
      });
    });
    test('DCoord (3 elements)', () => {
      const t = DPolygon.parse([[111, 121, 7]]);
      expect(t).toEqual({
        holes: [],
        properties: {},
        searchStore: {},
        pPoints: [
          {
            x: 111,
            y: 121,
            z: 7,
            properties: {}
          }
        ]
      });
    });
    test('Empty Array', () => {
      const t = DPoint.parse([]);
      expect(t).toEqual({
        properties: {},
        x: 0,
        y: 0,
        z: undefined
      });
    });
    test('LineString', () => {
      expect((DPolygon.parse({
        type: 'LineString',
        coordinates: [[30, 10], [10, 30], [40, 40]]
      }) as DPolygon).toArrayOfCoords()).toEqual([[30, 10], [10, 30], [40, 40]]);
    });
    test('Polygon', () => {
      expect((DPolygon.parse({
        type: 'Polygon',
        coordinates: [[[30, 10], [40, 40], [20, 40], [10, 20], [30, 10]]]
      }) as DPolygon).toArrayOfCoords()).toEqual([[30, 10], [40, 40], [20, 40], [10, 20], [30, 10]]);
    });
    test('Polygon 2', () => {
      const t = (DPolygon.parse({
        type: 'Polygon',
        coordinates: [
          [[35, 10], [45, 45], [15, 40], [10, 20], [35, 10]],
          [[20, 30], [35, 35], [30, 20], [20, 30]]
        ]
      }) as DPolygon);
      expect(t.toArrayOfCoords()).toEqual([[35, 10], [45, 45], [15, 40], [10, 20], [35, 10]]);
      expect(t.holes[0].toArrayOfCoords()).toEqual([[20, 30], [35, 35], [30, 20], [20, 30]]);
      expect(t.holes.length).toBe(1);
    });
    test('MultiPoint', () => {
      expect((DPolygon.parse({
        type: 'MultiPoint',
        coordinates: [[10, 40], [40, 30], [20, 20], [30, 10]]
      }) as DPolygon).toArrayOfCoords()).toEqual([[10, 40], [40, 30], [20, 20], [30, 10]]);
    });
    test('MultiLineString', () => {
      const [p1, p2] = DPolygon.parse({
        type: 'MultiLineString',
        coordinates: [
          [[10, 10], [20, 20], [10, 40]],
          [[40, 40], [30, 30], [40, 20], [30, 10]]
        ]
      }) as DPolygon[];
      expect(p1.toArrayOfCoords()).toEqual([[10, 10], [20, 20], [10, 40]]);
      expect(p2.toArrayOfCoords()).toEqual([[40, 40], [30, 30], [40, 20], [30, 10]]);
    });
    test('MultiPolygon', () => {
      const [p1, p2] = DPolygon.parse({
        type: 'MultiPolygon',
        coordinates: [
          [[[30, 20], [45, 40], [10, 40], [30, 20]]],
          [[[15, 5], [40, 10], [10, 20], [5, 10], [15, 5]]]
        ]
      }) as DPolygon[];
      expect(p1.toArrayOfCoords()).toEqual([[30, 20], [45, 40], [10, 40], [30, 20]]);
      expect(p2.toArrayOfCoords()).toEqual([[15, 5], [40, 10], [10, 20], [5, 10], [15, 5]]);
    });
    test('MultiPolygon 2', () => {
      const [p1, p2] = DPolygon.parse({
        type: 'MultiPolygon',
        coordinates: [
          [[[40.0, 40.0], [20.0, 45.0], [45.0, 30.0], [40.0, 40.0]]],
          [
            [[20.0, 35.0], [10.0, 30.0], [10.0, 10.0], [30.0, 5.0], [45.0, 20.0], [20.0, 35.0]],
            [[30.0, 20.0], [20.0, 15.0], [20.0, 25.0], [30.0, 20.0]]
          ]
        ]
      }) as DPolygon[];
      expect(p1.toArrayOfCoords()).toEqual([[40.0, 40.0], [20.0, 45.0], [45.0, 30.0], [40.0, 40.0]]);
      expect(p2.toArrayOfCoords())
        .toEqual([[20.0, 35.0], [10.0, 30.0], [10.0, 10.0], [30.0, 5.0], [45.0, 20.0], [20.0, 35.0]]);
      expect(p2.holes[0].toArrayOfCoords())
        .toEqual([[30.0, 20.0], [20.0, 15.0], [20.0, 25.0], [30.0, 20.0]]);
      expect(p2.holes.length).toBe(1);
    });
    test('GeometryCollection', () => {
      const [p1, p2] = DPolygon.parse({
        type: 'GeometryCollection',
        geometries: [
          {
            type: 'LineString',
            coordinates: [[10.0, 10.0], [20.0, 20.0], [10.0, 40.0]]
          },
          {
            type: 'Polygon',
            coordinates: [[[40.0, 40.0], [20.0, 45.0], [45.0, 30.0], [40.0, 40.0]]]
          }
        ]
      }) as DPolygon[];
      expect(p1.toArrayOfCoords()).toEqual([[10.0, 10.0], [20.0, 20.0], [10.0, 40.0]]);
      expect(p2.toArrayOfCoords())
        .toEqual([[40.0, 40.0], [20.0, 45.0], [45.0, 30.0], [40.0, 40.0]]);
    });
    test('Feature', () => {
      const t = DPolygon.parse({
        type: 'Feature',
        geometry: {
          type: 'LineString',
          coordinates: [[102, 0], [103, 1], [104, 0], [105, 1]]
        },
        properties: {
          prop0: 'value0',
          prop1: 0
        },
        id: 'aaa'
      });
      expect(t).toEqual({
        holes: [],
        pPoints: [
          {
            properties: {},
            x: 102,
            y: 0
          },
          {
            properties: {},
            x: 103,
            y: 1
          },
          {
            properties: {},
            x: 104,
            y: 0
          },
          {
            properties: {},
            x: 105,
            y: 1
          }
        ],
        properties: {
          prop0: 'value0',
          prop1: 0,
          id: 'aaa'
        },
        searchStore: {}
      });
      expect((t as DPolygon).properties.id).toEqual('aaa');
    });
    test('FeatureCollection', () => {
      const t = DPolygon.parse({
        type: 'FeatureCollection',
        features: [
          {
            type: 'Feature',
            geometry: {
              type: 'LineString',
              coordinates: [[102, 0], [103, 1], [104, 0], [105, 1]]
            },
            properties: {
              prop0: 'value0',
              prop1: 0.0,
              id: 'aaa'
            }
          },
          {
            type: 'Feature',
            geometry: {
              type: 'Polygon',
              coordinates: [[[100, 0], [101, 0], [101, 1], [100, 1], [100, 0]]]
            },
            properties: {
              prop0: 'value0',
              prop1: {
                this: 'that'
              }
            },
            id: 'bbb'
          }
        ]
      });
      expect(t).toEqual([
        {
          holes: [],
          pPoints: [
            {
              properties: {},
              x: 102,
              y: 0
            },
            {
              properties: {},
              x: 103,
              y: 1
            },
            {
              properties: {},
              x: 104,
              y: 0
            },
            {
              properties: {},
              x: 105,
              y: 1
            }
          ],
          properties: {
            prop0: 'value0',
            prop1: 0,
            id: 'aaa'
          },
          searchStore: {}
        },
        {
          holes: [],
          pPoints: [
            {
              properties: {},
              x: 100,
              y: 0
            },
            {
              properties: {},
              x: 101,
              y: 0
            },
            {
              properties: {},
              x: 101,
              y: 1
            },
            {
              properties: {},
              x: 100,
              y: 1
            },
            {
              properties: {},
              x: 100,
              y: 0
            }
          ],
          properties: {
            prop0: 'value0',
            prop1: {
              this: 'that'
            },
            id: 'bbb'
          },
          searchStore: {}
        }
      ]);
    });
    test('FeatureCollection 2', () => {
      const d = {
        type: 'FeatureCollection',
        name: 'abu_dhabi_admin',
        crs: {
          type: 'name',
          properties: {name: 'urn:ogc:def:crs:OGC:1.3:CRS84'}
        },
        features: [
          {
            type: 'Feature',
            properties: {
              OBJECTID: 1
            },
            geometry: {
              type: 'MultiPolygon',
              coordinates: [
                [
                  [
                    [52.795977806432631, 24.064926526667822],
                    [52.903033438072526, 24.036328841930946],
                    [52.900396263122879, 23.777403321927252]
                  ]
                ]
              ]
            }
          },
          {
            type: 'Feature',
            properties: {
              OBJECTID: 2
            },
            geometry: {
              type: 'MultiPolygon',
              coordinates: [
                [
                  [
                    [53.902835937659937, 23.735503326599943],
                    [53.903433154626079, 23.598628815231301],
                    [53.894695066213991, 23.597308948089616]
                  ]
                ]
              ]
            }
          }
        ]
      };
      expect(DPolygon.parse(d as any)).toEqual([
        {
          holes: [],
          pPoints: [
            {
              properties: {},
              x: 52.79597780643263,
              y: 24.064926526667822
            },
            {
              properties: {},
              x: 52.90303343807253,
              y: 24.036328841930946
            },
            {
              properties: {},
              x: 52.90039626312288,
              y: 23.777403321927252
            }
          ],
          properties: {
            OBJECTID: 1
          },
          searchStore: {}
        },
        {
          holes: [],
          pPoints: [
            {
              properties: {},
              x: 53.90283593765994,
              y: 23.735503326599943
            },
            {
              properties: {},
              x: 53.90343315462608,
              y: 23.5986288152313
            },
            {
              properties: {},
              x: 53.89469506621399,
              y: 23.597308948089616
            }
          ],
          properties: {
            OBJECTID: 2
          },
          searchStore: {}
        }
      ]);
    });
    test('xyz', () => {
      const t = DPolygon.parse([
        {x: 11, y: 12, z: 13},
        {x: 21, y: 22, z: 23},
        {x: 31, y: 32, z: 33}
      ]);
      expect(t).toMatchSnapshot();
    });
  });

  describe('toArrayOfCoords', () => {
    test('1', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))').toArrayOfCoords()).toEqual([
        [30, 10],
        [40, 40],
        [20, 40],
        [10, 20],
        [30, 10]
      ]);
    });
    test('2', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))').toArrayOfCoords('yxz')).toEqual([
        [10, 30],
        [40, 40],
        [40, 20],
        [20, 10],
        [10, 30]
      ]);
    });
  });

  describe('simpleDifference', () => {
    test('1', () => {
      const A = DPolygon.parseFromWKT('POLYGON ((2 8, 4 8, 4 6, 2 6, 2 8))');
      const B = DPolygon.parseFromWKT('POLYGON ((3 9, 3 7, 5 7, 5 9, 3 9))');

      const res1 = DPolygon.parseFromWKT('POLYGON ((3 9, 3 8, 4 8, 4 7, 5 7, 5 9, 3 9))');
      const res2 = DPolygon.parseFromWKT('POLYGON ((2 8, 3 8, 3 7, 4 7, 4 6, 2 6, 2 8))');

      const res = A.simpleDifference(B) as DPolygon;
      expect(res.equal(res1) || res.equal(res2)).toBe(true);
    });

    test('2', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((5 8, 5 5, 6 5, 6 8, 5 8))');
      const b = DPolygon.parseFromWKT('POLYGON ((4 7, 7 7, 7 6, 4 6, 4 7))');

      const res1 = DPolygon.parseFromWKT('POLYGON ((4 7, 5 7, 5 6, 4 6, 4 7))');
      const res2 = DPolygon.parseFromWKT('POLYGON ((6 7, 7 7, 7 6, 6 6, 6 7))');
      const res3 = DPolygon.parseFromWKT('POLYGON ((5 8, 6 8, 6 7, 5 7, 5 8))');
      const res4 = DPolygon.parseFromWKT('POLYGON ((5 6, 6 6, 6 5, 5 5, 5 6))');
      const r = a.simpleDifference(b) as DPolygon[];
      const [r1, r2] = r;
      expect((r1.equal(res1) && r2.equal(res2)) ||
        (r1.equal(res2) && r2.equal(res1)) ||
        (r1.equal(res3) && r2.equal(res4)) ||
        (r1.equal(res4) && r2.equal(res3))).toBe(true);
    });

    test('3', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((4 8, 7 8, 7 5, 4 5, 4 8))');
      const b = DPolygon.parseFromWKT('POLYGON ((5 7, 6 7, 6 6, 5 6, 5 7))');

      const res1 = null;
      const res2 = DPolygon.parseFromWKT('POLYGON ((4 8, 7 8, 7 5, 4 5, 4 8), (5 7, 6 7, 6 6, 5 6, 5 7))');

      const res = a.simpleDifference(b);
      expect(res === res1 || (res as DPolygon).equal(res2)).toBe(true);
    });

    test('4', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((3 9, 5 9, 4 7, 3 9))');
      const b = DPolygon.parseFromWKT('POLYGON ((3 7, 5 7, 5 5, 3 5, 3 7))');

      const res1 = DPolygon.parseFromWKT('POLYGON ((3 9, 5 9, 4 7, 3 9))');
      const res2 = DPolygon.parseFromWKT('POLYGON ((3 7, 4 7, 5 7, 5 5, 3 5, 3 7))');

      const res = a.simpleDifference(b) as DPolygon;
      expect(res.equal(res2) || res.equal(res1)).toBe(true);
    });

    test('5', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((3 8, 6 8, 6 5, 3 5, 3 8))');
      const b = DPolygon.parseFromWKT('POLYGON ((6 7, 9 7, 9 6, 6 6, 6 7))');

      const res1 = DPolygon.parseFromWKT('POLYGON ((9 6, 6 6, 6 7, 9 7, 9 6))');
      const res2 = DPolygon.parseFromWKT('POLYGON ((6 7, 6 6, 6 5, 3 5, 3 8, 6 8, 6 7))');

      const res = a.simpleDifference(b) as DPolygon;
      expect(res.equal(res2) || res.equal(res1)).toBe(true);
    });

    test('6', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((1 7, 3 7, 3 5, 1 5, 1 7))');
      const b = DPolygon.parseFromWKT('POLYGON ((6 8, 8 8, 8 3, 6 3, 6 8))');

      const res1 = DPolygon.parseFromWKT('POLYGON ((1 7, 3 7, 3 5, 1 5, 1 7))');
      const res2 = DPolygon.parseFromWKT('POLYGON ((6 8, 8 8, 8 3, 6 3, 6 8))');

      const res = a.simpleDifference(b) as DPolygon;
      expect(res.equal(res2) || res.equal(res1)).toBe(true);
    });

    test('7', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((2 5, 4 5, 4 3, 2 3, 2 5))');
      const b = DPolygon.parseFromWKT('POLYGON ((4 7, 4 5, 6 5, 6 7, 4 7))');

      const res1 = DPolygon.parseFromWKT('POLYGON ((2 5, 4 5, 4 3, 2 3, 2 5))');
      const res2 = DPolygon.parseFromWKT('POLYGON ((4 7, 4 5, 6 5, 6 7, 4 7))');

      const res = a.simpleDifference(b) as DPolygon;
      expect(res.equal(res2) || res.equal(res1)).toBe(true);
    });

    test('8', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((3 4, 3 7, 6 7, 6 4, 3 4))');
      const b = DPolygon.parseFromWKT('POLYGON ((3 5, 4 5, 4 4, 3 4, 3 5))');

      const res1 = DPolygon.parseFromWKT('POLYGON ((3 7, 6 7, 6 4, 4 4, 4 5, 3 5, 3 7))');
      const res2 = null;

      const res = a.simpleDifference(b);
      expect(res === res2 || (res as DPolygon).equal(res1)).toBe(true);
    });

    test('9', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((3 4, 7 4, 7 7, 3 7, 3 4))');
      const b = DPolygon.parseFromWKT('POLYGON ((4 4, 4 6, 5 6, 5 5, 6 5, 6 4, 4 4))');

      const res1 = DPolygon.parseFromWKT('POLYGON ((3 7, 3 4, 4 4, 4 6, 5 6, 5 5, 6 5, 6 4, 7 4, 7 7, 3 7))');
      const res2 = null;

      const res = a.simpleDifference(b);
      expect(res === res2 || (res as DPolygon).equal(res1)).toBe(true);
    });

    test('10', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((5 8, 4 6, 6 6, 5 8))');
      const b = DPolygon.parseFromWKT('POLYGON ((2 8, 7 8, 7 4, 2 3, 2 8))');

      const res1 = DPolygon.parseFromWKT('POLYGON ((2 8, 5 8, 7 8, 7 4, 2 3, 2 8), (5 8, 4 6, 6 6, 5 8))');
      const res2 = null;

      const res = a.simpleDifference(b);
      expect(res === res2 || (res as DPolygon).equal(res1)).toBe(true);
    });

    test('11', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((2 8, 7 8, 7 2, 2 2, 2 8))');
      const b = DPolygon.parseFromWKT('POLYGON ((5 6, 8 6, 7 3, 5 6))');

      const res1 = DPolygon.parseFromWKT('POLYGON ((7 6, 7 3, 8 6, 7 6))');
      const res2 = DPolygon.parseFromWKT('POLYGON ((7 8, 7 6, 5 6, 7 3, 7 2, 2 2, 2 8, 7 8))');

      const res = a.simpleDifference(b) as DPolygon;
      expect(res.equal(res1) || res.equal(res2)).toBe(true);
    });

    test('12', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((2 7, 9 7, 9 2, 2 2, 2 7))');
      const b = DPolygon.parseFromWKT('POLYGON ((3 9, 6 9, 7 7, 6 5, 8 3, 3 5, 4 7, 3 9))');

      const res1 = DPolygon.parseFromWKT('POLYGON ((3 9, 4 7, 7 7, 6 9, 3 9))');
      const res2 = DPolygon.parseFromWKT('POLYGON ((2 7, 4 7, 3 5, 8 3, 6 5, 7 7, 9 7, 9 2, 2 2, 2 7))');

      const res = a.simpleDifference(b) as DPolygon;
      expect(res.equal(res1) || res.equal(res2)).toBe(true);
    });

    test('13', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((1 9, 4 9, 4 2, 1 2, 1 9))');
      const b = DPolygon.parseFromWKT('POLYGON ((3 8, 6 8, 6 3, 3 3, 3 4, 5 4, 5 5, 3 5, 3 6, 5 6, 5 7, 3 7, 3 8))');

      const res1 = DPolygon.parseFromWKT('POLYGON ((1 9, 4 9, 4 8, 3 8, 3 7, 4 7, 4 6, 3 6, 3 5, 4 5, 4 4, 3 4,' +
        ' 3 3, 4 3, 4 2, 1 2, 1 9))');
      const res2 = DPolygon.parseFromWKT('POLYGON ((4 8, 6 8, 6 3, 4 3, 4 4, 5 4, 5 5, 4 5, 4 6, 5 6, 5 7, 4 7, 4 8))');

      const res = a.simpleDifference(b) as DPolygon;
      expect(res.equal(res1) || res.equal(res2)).toBe(true);
    });
  });

  describe('simpleUnion/simpleIntersection', () => {
    test('basic', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((2 2, 2 6, 6 6, 6 2))').close();
      const b = DPolygon.parseFromWKT('POLYGON ((4 4, 4 8, 8 8, 8 4))').close();

      const res1 = DPolygon.parseFromWKT('POLYGON ((6 2, 6 4, 8 4, 8 8, 4 8, 4 6, 2 6, 2 2))').close();
      const res2 = DPolygon.parseFromWKT('POLYGON ((6 4, 6 6, 4 6, 4 4))').close();

      expect(a.simpleUnion(b)!.equal(res1)).toBe(true);
      expect((a.simpleIntersection(b)! as DPolygon).equal(res2)).toBe(true);
    });

    test('Contain', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((2 2, 2 8, 8 8, 8 2))').close();
      const b = DPolygon.parseFromWKT('POLYGON ((4 4, 4 6, 6 6, 6 4))').close();

      const res1 = DPolygon.parseFromWKT('POLYGON ((2 2, 2 8, 8 8, 8 2))').close();
      const res2 = DPolygon.parseFromWKT('POLYGON ((4 4, 4 6, 6 6, 6 4))').close();

      expect(a.simpleUnion(b)!.equal(res1)).toBe(true);
      expect((a.simpleIntersection(b)! as DPolygon).equal(res2)).toBe(true);
    });

    test('Moon', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((2 2, 2 6, 6 6, 6 2))').close();
      const b = DPolygon.parseFromWKT('POLYGON ((4 8, 8 8, 8 4, 5 4, 7 7, 4 5))').close();

      const res1 = DPolygon.parseFromWKT('POLYGON ((2 2, 6 2, 6 4, 8 4, 8 8, 4 8, 4 6, 2 6, 2 2),' +
        ' (6 5.5, 6 6, 5.5 6, 7 7, 6 5.5))');
      const res2 = DPolygon.parseFromWKT('POLYGON ((6 4, 6 5.5, 5 4, 6 4))');
      const res3 = DPolygon.parseFromWKT('POLYGON ((5.5 6, 4 6, 4 5, 5.5 6))');

      expect(a.simpleUnion(b)!.equal(res1)).toBe(true);
      const res = a.simpleIntersection(b) as DPolygon[];
      const [r1, r2] = res;
      expect((r1.equal(res2) && r2.equal(res3)) || (r2.equal(res2) && r1.equal(res3))).toBe(true);
    });

    test('touch', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((2 2, 6 2, 6 6, 2 6))').close();
      const b = DPolygon.parseFromWKT('POLYGON ((6 3, 10 3, 10 5, 6 5))').close();
      const c = DPolygon.parseFromWKT('POLYGON ((6 6, 6 10, 10 10, 10 6))').close();
      const d = DPolygon.parseFromWKT('POLYGON ((4 6, 5 10, 3 10))').close();
      const e = DPolygon.parseFromWKT('POLYGON ((5 10, 3 10, 4 6))').close();

      const res1 = DPolygon.parseFromWKT('POLYGON ((2 2, 6 2, 6 3, 10 3, 10 5, 6 5, 6 6, 2 6))').close();
      const res2 = DPolygon.parseFromWKT('POLYGON ((6 6, 6 10, 10 10, 10 6, 6 6, 6 2, 2 2, 2 6))').close();
      const res3 = DPolygon.parseFromWKT('POLYGON ((4 6, 3 10, 5 10, 4 6, 6 6, 6 2, 2 2, 2 6))').close();

      expect(a.simpleIntersection(b)).toBe(null);
      expect(a.simpleIntersection(c)).toBe(null);
      expect(a.simpleIntersection(d)).toBe(null);

      expect(a.simpleUnion(b)!.equal(res1)).toBe(true);
      expect(a.simpleUnion(c)!.equal(res2)).toBe(true);
      expect(a.simpleUnion(d)!.equal(res3)).toBe(true);
      expect(a.simpleUnion(e)!.equal(res3)).toBe(true);
    });

    test('Touch inside', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((2 2, 10 2, 10 10, 2 10))').close();
      const b = DPolygon.parseFromWKT('POLYGON ((2 2, 4 2, 4 4, 2 4))').close();
      const c = DPolygon.parseFromWKT('POLYGON ((4 2, 6 2, 6 6, 4 6))').close();
      const d = DPolygon.parseFromWKT('POLYGON ((4 8, 6 8, 5 10))').close();

      expect((a.simpleIntersection(b)! as DPolygon).equal(b)).toBe(true);
      expect((a.simpleIntersection(c)! as DPolygon).equal(c)).toBe(true);
      expect((a.simpleIntersection(d)! as DPolygon).equal(d)).toBe(true);

      const res1 = DPolygon.parseFromWKT('POLYGON ((2 2, 4 2, 10 2, 10 10, 2 10, 2 4))').close();
      const res2 = DPolygon.parseFromWKT('POLYGON ((2 2, 4 2, 6 2, 10 2, 10 10, 2 10))').close();
      const res3 = DPolygon.parseFromWKT('POLYGON ((2 2, 10 2, 10 10, 5 10, 2 10))').close();

      expect((a.simpleUnion(b)! as DPolygon).equal(res1)).toBe(true);
      expect((a.simpleUnion(c)! as DPolygon).equal(res2)).toBe(true);
      expect((a.simpleUnion(d)! as DPolygon).equal(res3)).toBe(true);
    });

    test('Outside only', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((2 4, 8 4, 8 6, 2 6))').close();
      const b = DPolygon.parseFromWKT('POLYGON ((4 2, 6 2, 6 8, 4 8))').close();

      const res1 = DPolygon.parseFromWKT('POLYGON ((4 4, 6 4, 6 6, 4 6))').close();
      const res2 = DPolygon.parseFromWKT('POLYGON ((4 2, 6 2, 6 4, 8 4, 8 6, 6 6, 6 8, 4 8, 4 6,' +
        ' 2 6, 2 4, 4 4))').close();

      expect((a.simpleIntersection(b)! as DPolygon).equal(res1)).toBe(true);
      expect((a.simpleUnion(b)! as DPolygon).equal(res2)).toBe(true);
    });

    test('Border corners', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((2 2, 8 2, 8 10, 2 10))').close();
      const e = DPolygon.parseFromWKT('POLYGON ((7 6, 8 5, 9 6, 8 7))').close();

      const res1 = DPolygon.parseFromWKT('POLYGON ((8 5, 8 7, 7 6))').close();
      const res2 = DPolygon.parseFromWKT('POLYGON ((2 2, 8 2, 8 5, 9 6, 8 7, 8 10, 2 10))').close();

      expect((a.simpleIntersection(e)! as DPolygon).equal(res1)).toBe(true);
      expect((a.simpleUnion(e)! as DPolygon).equal(res2)).toBe(true);
    });

    test('Custom test 1', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((2 2, 6 2, 6 6, 2 6))').close();
      const b = DPolygon.parseFromWKT('POLYGON ((5 5, 7 5, 6 3))').close();

      const res1 = DPolygon.parseFromWKT('POLYGON ((6 3, 6 5, 5 5))').close();
      const res2 = DPolygon.parseFromWKT('POLYGON ((2 2, 6 2, 6 3, 7 5, 6 5, 6 6, 2 6))').close();

      expect((a.simpleIntersection(b)! as DPolygon).equal(res1)).toBe(true);
      expect((a.simpleUnion(b)! as DPolygon).equal(res2)).toBe(true);
    });

    test('Custom test 2', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((2 2, 6 2, 6 6, 2 6))').close();
      const b = DPolygon.parseFromWKT('POLYGON ((3 5, 4 5, 5 6, 4 7, 3 7, 4 6))').close();

      const res1 = DPolygon.parseFromWKT('POLYGON ((3 5, 4 5, 5 6, 4 6))').close();
      const res2 = DPolygon.parseFromWKT('POLYGON ((2 2, 6 2, 6 6, 5 6, 4 7, 3 7, 4 6, 2 6))').close();

      expect((a.simpleIntersection(b)! as DPolygon).equal(res1)).toBe(true);
      expect((a.simpleUnion(b)! as DPolygon).equal(res2)).toBe(true);
    });
  });

  describe('smartUnion', () => {
    test('1', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((1 8, 5 8, 5 2, 1 2, 1 8), (2 7, 4 7, 4 3, 2 3, 2 7))');
      const b = DPolygon.parseFromWKT('POLYGON ((3 1, 3 5, 8 5, 8 1, 3 1), (6 4, 6 2, 7 2, 7 4, 6 4))');

      const res = DPolygon.parseFromWKT('POLYGON ((1 8, 5 8, 5 5, 8 5, 8 1, 3 1, 3 2, 1 2, 1 8), (2 7, 4 7' +
        ', 4 3, 2 3, 2 7), (6 4, 6 2, 7 2, 7 4, 6 4))');
      expect(a.smartUnion(b)!.equal(res)).toBe(true);
    });
    test('2', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((1 8, 5 8, 5 2, 1 2, 1 8), (2 7, 4 7, 4 3, 2 3, 2 7))');
      const b = DPolygon.parseFromWKT('POLYGON ((3 1, 3 5, 8 5, 8 1, 3 1), (4 4, 7 4, 7 3, 4 3, 4 4))');

      const res = DPolygon.parseFromWKT('POLYGON ((1 8, 5 8, 5 5, 8 5, 8 1, 3 1, 3 2, 1 2, 1 8), (2 7, 4 7, 4 4,' +
        ' 7 4, 7 3, 4 3, 2 3, 2 7))');
      expect(a.smartUnion(b)!.equal(res)).toBe(true);
    });
    test('3', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((1 8, 1 2, 7 2, 7 3, 2 3, 2 5, 7 5, 7 6, 2 6, 2 7, 7 7, 7 8, 1 8))');
      const b = DPolygon.parseFromWKT('POLYGON ((3 9, 3 3, 4 3, 4 9, 5 9, 5 1, 6 1, 6 8, 7 8, 7 2, 8 2,' +
        ' 8 10, 3 10, 3 9))');

      const res = DPolygon.parseFromWKT('POLYGON ((1 8, 3 8, 3 9, 3 10, 8 10, 8 2, 7 2, 6 2, 6 1,' +
        ' 5 1, 5 2, 1 2, 1 8),' +
        ' (6 7, 7 7, 7 6, 6 6, 6 7),' +
        ' (4 7, 5 7, 5 6, 4 6, 4 7),' +
        ' (6 5, 7 5, 7 3, 6 3, 6 5),' +
        ' (4 3, 4 5, 5 5, 5 3, 4 3),' +
        ' (2 5, 3 5, 3 3, 2 3, 2 5),' +
        ' (2 7, 3 7, 3 6, 2 6, 2 7),' +
        ' (4 9, 5 9, 5 8, 4 8, 4 9))');
      expect(a.smartUnion(b)!.equal(res)).toBe(true);
    });
    test('4', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((6125404.576057136 2986490.5399693353, 6125404.576057136' +
        ' 2986377.0787554733,' +
        ' 6125420.69949279 2986377.0787554733, 6125420.69949279' +
        ' 2986490.5399693353, 6125404.576057136 2986490.5399693353))');
      const b = DPolygon.parseFromWKT('POLYGON ((6125469.069799753 2986387.2305482933,' +
        ' 6125469.069799753 2986375.2872626223,' +
        ' 6125368.149035845 2986375.2872626223, 6125368.149035845 2986401.5624910956,' +
        ' 6125453.543528381 2986401.5624910956, 6125453.543528381 2986427.2405552845,' +
        ' 6125357.997243024 2986427.2405552845, 6125357.997243024 2986451.724290908,' +
        ' 6125453.543528381 2986451.724290908, 6125453.543528381 2986497.705940736,' +
        ' 6125485.790399687 2986497.705940736, 6125485.790399687 2986387.2305482933,' +
        ' 6125469.069799753 2986387.2305482933))');

      const res = DPolygon.parseFromWKT('POLYGON ((6125404.576057136 2986451.724290908, 6125404.576057136' +
        ' 2986490.5399693353,' +
        ' 6125420.69949279 2986490.5399693353, 6125420.69949279 2986451.724290908,' +
        ' 6125453.543528381 2986451.724290908, 6125453.543528381 2986497.705940736,' +
        ' 6125485.790399687 2986497.705940736, 6125485.790399687 2986387.2305482933,' +
        ' 6125469.069799753 2986387.2305482933, 6125469.069799753 2986375.2872626223,' +
        ' 6125368.149035845 2986375.2872626223, 6125368.149035845 2986401.5624910956,' +
        ' 6125404.576057136 2986401.5624910956, 6125404.576057136 2986427.2405552845,' +
        ' 6125357.997243024 2986427.2405552845, 6125357.997243024 2986451.724290908,' +
        ' 6125404.576057136 2986451.724290908), (6125420.69949279 2986427.2405552845,' +
        ' 6125420.69949279 2986401.5624910956, 6125453.543528381 2986401.5624910956,' +
        ' 6125453.543528381 2986427.2405552845, 6125420.69949279 2986427.2405552845))');
      expect(a.smartUnion(b)!.equal(res)).toBe(true);
    });
    test('5', () => {
      const a = DPolygon.parseFromWKT('POLYGON ((6125378.897992946 2986489.' +
        '345640765, 6125378.897992946 2986380.0645768913,' +
        ' 6125362.177393007 2986380.0645768913, 6125362.177393007 2986499.4974335856,' +
        ' 6125362.7745572915 2986499.4974335856, 6125362.7745572915 2986510.843554975,' +
        ' 6125484.596071121 2986510.843554975, 6125484.596071121 2986489.345640765,' +
        ' 6125420.699492789 2986489.345640765, 6125420.699492789 2986377.0787554733,' +
        ' 6125404.576057136 2986377.0787554733, 6125404.576057136 2986489.345640765,' +
        ' 6125378.897992946 2986489.345640765))');
      const b = DPolygon.parseFromWKT('POLYGON ((6125469.069799753 2986387.' +
        '2305482933, 6125469.069799753 2986375.2872626223,' +
        ' 6125368.149035845 2986375.2872626223, 6125368.149035845 2986401.5624910956,' +
        ' 6125453.543528381 2986401.5624910956, 6125453.543528381 2986427.2405552845,' +
        ' 6125357.997243024 2986427.2405552845, 6125357.997243024 2986451.724290908,' +
        ' 6125453.543528381 2986451.724290908, 6125453.543528381 2986497.705940736,' +
        ' 6125485.790399687 2986497.705940736, 6125485.790399687 2986387.2305482933,' +
        ' 6125469.069799753 2986387.2305482933))');

      const res = DPolygon.parseFromWKT('POLYGON ((6125368.149035845 2986380.0645768913, 6125362.177393007 ' +
        '2986380.0645768913,' +
        ' 6125362.177393007 2986427.2405552845, 6125357.997243024 2986427.2405552845,' +
        ' 6125357.997243024 2986451.724290908, 6125362.177393007 2986451.724290908,' +
        ' 6125362.177393007 2986499.4974335856, 6125362.7745572915 2986499.4974335856,' +
        ' 6125362.7745572915 2986510.843554975, 6125484.596071121 2986510.843554975,' +
        ' 6125484.596071121 2986497.705940736, 6125485.790399687 2986497.705940736,' +
        ' 6125485.790399687 2986387.2305482933, 6125469.069799753 2986387.2305482933,' +
        ' 6125469.069799753 2986375.2872626223, 6125368.149035845 2986375.2872626223,' +
        ' 6125368.149035845 2986380.0645768913), (6125453.543528381 2986489.345640765,' +
        ' 6125420.699492789 2986489.345640765, 6125420.699492789 2986451.724290908,' +
        ' 6125453.543528381 2986451.724290908, 6125453.543528381 2986489.345640765),' +
        ' (6125420.699492789 2986427.2405552845, 6125420.699492789 2986401.5624910956,' +
        ' 6125453.543528381 2986401.5624910956, 6125453.543528381 2986427.2405552845,' +
        ' 6125420.699492789 2986427.2405552845), (6125404.576057136 2986401.5624910956,' +
        ' 6125404.576057136 2986427.2405552845, 6125378.897992946 2986427.2405552845,' +
        ' 6125378.897992946 2986401.5624910956, 6125404.576057136 2986401.5624910956),' +
        ' (6125404.576057136 2986451.724290908, 6125404.576057136 2986489.345640765,' +
        ' 6125378.897992946 2986489.345640765, 6125378.897992946 2986451.724290908,' +
        ' 6125404.576057136 2986451.724290908))');
      expect(a.smartUnion(b)!.equal(res)).toBe(true);
    });
  });

  describe('toTriangles', () => {
    test('1', () => {
      const p = new DPolygon([
        new DPoint(0, 0),
        new DPoint(10, 0),
        new DPoint(10, 10),
        new DPoint(0, 10)
      ]);
      expect(p.toTriangles().map((v: DPolygon) => v.toString())
        .join()).toBe('(0 0, 10 0, 10 10),(0 0, 10 10, 0 10)');
    });
    test('2', () => {
      const p = DPolygon.parseFromWKT('POLYGON ((1 1, 4 1, 4 2, 2 2, 2 3, 5 3, 5 4, 3 4, 3 5, 4 5, 4 6,' +
        ' 1 6, 1 5, 2 5, 2 4, 1 4))')
        .loop()
        .scale(10)
        .run()
        .close();
      expect(p
        .toTriangles()
        .map((v: DPolygon) => v.toString())
        .join()).toBe('(10 10, 40 10, 40 20),' +
        '(10 10, 40 20, 20 20),' +
        '(10 10, 20 20, 20 30),' +
        '(20 30, 50 30, 50 40),' +
        '(20 30, 50 40, 30 40),' +
        '(20 30, 30 40, 30 50),' +
        '(30 50, 40 50, 40 60),' +
        '(30 50, 40 60, 10 60),' +
        '(10 60, 10 50, 20 50),' +
        '(20 40, 10 40, 10 10),' +
        '(20 40, 10 10, 20 30),' +
        '(20 40, 20 30, 30 50),' +
        '(30 50, 10 60, 20 50),' +
        '(30 50, 20 50, 20 40)');
    });
    test('3', () => {
      const p = DPolygon.parseFromWKT('POLYGON ((1 1, 4 1, 4 2, 2 2, 2 3, 5 3, 5 4, 3 4, 3 5, 4 5, 4 6,' +
        ' 1 6, 1 5, 2 5, 2 4, 1 4), (1.2 1.2, 1.8 1.2, 1.8 3.8, 1.2 3.8))')
        .loop()
        .scale(10)
        .run()
        .close();
      const triangles = p.toTriangles();
      expect(triangles
        .map((v: DPolygon) => v.toString())
        .join()).toBe('(12 12, 12 38, 10 10),' +
        '(12 12, 10 10, 40 10),' +
        '(40 10, 40 20, 20 20),' +
        '(20 30, 50 30, 50 40),' +
        '(20 30, 50 40, 30 40),' +
        '(20 30, 30 40, 30 50),' +
        '(30 50, 40 50, 40 60),' +
        '(30 50, 40 60, 10 60),' +
        '(10 60, 10 50, 20 50),' +
        '(10 40, 10 10, 12 38),' +
        '(10 40, 12 38, 18 38),' +
        '(18 12, 12 12, 40 10),' +
        '(18 12, 40 10, 20 20),' +
        '(18 12, 20 20, 20 30),' +
        '(30 50, 10 60, 20 50),' +
        '(30 50, 20 50, 20 40),' +
        '(20 40, 10 40, 18 38),' +
        '(20 40, 18 38, 18 12),' +
        '(20 40, 18 12, 20 30),' +
        '(20 40, 20 30, 30 50)');
    });
    test('4', () => {
      const p = DPolygon.parseFromWKT('POLYGON ((40 20, 18 12, 12 12, 40 10))')
        .close();
      expect(p.toTriangles()
        .map((v: DPolygon) => v.toString())
        .join()).toBe('(18 12, 12 12, 40 10),(18 12, 40 10, 40 20)');
    });
    test('5', () => {
      const p = DPolygon.parseFromWKT('POLYGON ((1 1, 4 1, 4 2, 2 2, 2 3, 5 3, 5 4, 3 4, 3 5, 4 5, 4 6,' +
        ' 1 6, 1 5, 2 5, 2 4, 1 4), (1.2 1.2, 1.8 1.2, 1.8 3.8, 1.2 3.8), (3.2 3.2, 3.2 3.8, 3.8 3.8, 3.8 3.2))')
        .loop()
        .scale(10)
        .run()
        .close();
      const triangles = p.toTriangles();
      expect(triangles
        .map((v: DPolygon) => v.toString())
        .join()).toBe('(18 38, 32 32, 32 38),' +
        '(12 12, 12 38, 10 10),' +
        '(12 12, 10 10, 40 10),' +
        '(40 10, 40 20, 20 20),' +
        '(30 50, 40 50, 40 60),' +
        '(30 50, 40 60, 10 60),' +
        '(10 60, 10 50, 20 50),' +
        '(10 40, 10 10, 12 38),' +
        '(10 40, 12 38, 18 38),' +
        '(10 40, 18 38, 32 38),' +
        '(10 40, 32 38, 38 38),' +
        '(18 12, 12 12, 40 10),' +
        '(18 12, 40 10, 20 20),' +
        '(18 12, 20 20, 20 30),' +
        '(30 50, 10 60, 20 50),' +
        '(30 50, 20 50, 20 40),' +
        '(20 40, 10 40, 38 38),' +
        '(18 38, 18 12, 20 30),' +
        '(30 40, 30 50, 20 40),' +
        '(30 40, 20 40, 38 38),' +
        '(32 32, 18 38, 20 30),' +
        '(32 32, 20 30, 50 30),' +
        '(50 40, 30 40, 38 38),' +
        '(50 40, 38 38, 38 32),' +
        '(38 32, 32 32, 50 30),' +
        '(38 32, 50 30, 50 40)');
    });
    test('6', () => {
      expect(DPolygon.parse([[0, 0], [1, 1]]).toTriangles()).toEqual([]);
    });
    test('7', () => {
      expect(DPolygon.parse([[0, 0], [1, 1], [0, 1]]).toTriangles()
        .map((r) => r.toWKT())).toEqual(['POLYGON ((0 0, 1 1, 0 1, 0 0))']);
    });
    test('8', () => {
      expect(DPolygon.parse([[0, 0], [1, 1], [1, 1]]).toTriangles()).toEqual([]);
    });
    test('9', () => {
      expect(DPolygon.parse([[0, 0], [1, 1], [0, 1], [0, 1]]).toTriangles()
        .map((r) => r.toWKT())).toEqual(['POLYGON ((0 0, 1 1, 0 1, 0 0))']);
    });
    test('10', () => {
      const p = new DPolygon([
        new DPoint(0, 0),
        new DPoint(10, 0),
        new DPoint(10, 10),
        new DPoint(0, 10),
        new DPoint(0, 10)
      ]);
      expect(p.toTriangles().map((v: DPolygon) => v.toString())
        .join()).toBe('(0 0, 10 0, 10 10),(0 0, 10 10, 0 10)');
    });
  });

  describe('arrayOfTrianglesToVertices', () => {
    test('1', () => {
      const p = DPolygon.parseFromWKT('POLYGON ((1 1, 4 1, 4 2, 2 2, 2 3, 5 3, 5 4, 3 4, 3 5, 4 5, 4 6,' +
        ' 1 6, 1 5, 2 5, 2 4, 1 4), (1.2 1.2, 1.8 1.2, 1.8 3.8, 1.2 3.8), (32 32, 32 38, 38 38, 38 32))')
        .loop()
        .scale(10)
        .run()
        .close();
      expect(DPolygon.arrayOfTrianglesToVertices(p.toTriangles(), 1))
        .toEqual([
          12,
          12,
          1,
          12,
          38,
          1,
          10,
          10,
          1,
          12,
          12,
          1,
          10,
          10,
          1,
          40,
          10,
          1,
          40,
          10,
          1,
          40,
          20,
          1,
          20,
          20,
          1,
          20,
          30,
          1,
          50,
          30,
          1,
          50,
          40,
          1,
          20,
          30,
          1,
          50,
          40,
          1,
          30,
          40,
          1,
          20,
          30,
          1,
          30,
          40,
          1,
          30,
          50,
          1,
          30,
          50,
          1,
          40,
          50,
          1,
          40,
          60,
          1,
          30,
          50,
          1,
          40,
          60,
          1,
          10,
          60,
          1,
          10,
          60,
          1,
          10,
          50,
          1,
          20,
          50,
          1,
          10,
          40,
          1,
          10,
          10,
          1,
          12,
          38,
          1,
          10,
          40,
          1,
          12,
          38,
          1,
          18,
          38,
          1,
          18,
          12,
          1,
          12,
          12,
          1,
          40,
          10,
          1,
          18,
          12,
          1,
          40,
          10,
          1,
          20,
          20,
          1,
          18,
          12,
          1,
          20,
          20,
          1,
          20,
          30,
          1,
          30,
          50,
          1,
          10,
          60,
          1,
          20,
          50,
          1,
          30,
          50,
          1,
          20,
          50,
          1,
          20,
          40,
          1,
          20,
          40,
          1,
          10,
          40,
          1,
          18,
          38,
          1,
          20,
          40,
          1,
          18,
          38,
          1,
          18,
          12,
          1,
          20,
          40,
          1,
          18,
          12,
          1,
          20,
          30,
          1,
          20,
          40,
          1,
          20,
          30,
          1,
          30,
          50,
          1
        ]);
    });
    test('2', () => {
      const p = DPolygon.parseFromWKT('POLYGON ((1 1 1, 4 1 1, 4 2 1, 2 2 1, 2 3 1, 5 3 1, 5 4 1, 3 4 1, 3 5 1,' +
        ' 4 5 1, 4 6 1, 1 6 1, 1 5 1, 2 5 1, 2 4 1, 1 4 1), (1.2 1.2 1, 1.8 1.2 1, 1.8 3.8 1, 1.2 3.8 1),' +
        ' (32 32 1, 32 38 1, 38 38 1, 38 32 1))')
        .loop()
        .scale(10)
        .run()
        .close();
      expect(() => p.toTriangles()).toThrow('contains2 faild');
    });
  });

  describe('buffer', () => {
    test('line', () => {
      expect(new DPolygon([
        new DPoint(0, 0),
        new DPoint(10, 10)
      ]).buffer(2)
        .toWKT()).toBe('POLYGON ((8.585786437626904 11.414213562373096, 8.620918910525866 11.448494165902934,' +
        ' 8.656882090305963 11.481902250709918, 8.693654314092447 11.51441769301297,' +
        ' 8.731213431672709 11.546020906725474, 8.769536818838747 11.576692855253214,' +
        ' 8.808601391015133 11.60641506296129, 8.848383617164309 11.635169626303167,' +
        ' 8.888859533960796 11.66293922460509, 8.930004760225806 11.689707130499414,' +
        ' 8.971794511613556 11.715457220000545, 9.014203615540431 11.740173982217422,' +
        ' 9.057206526348004 11.76384252869671, 9.100777340690787 11.78644860239103,' +
        ' 9.144889813139436 11.807978586246886, 9.189517371990021 11.828419511407061,' +
        ' 9.23463313526982 11.847759065022574, 9.280209926930024 11.865985597669479,' +
        ' 9.32622029321556 11.883088130366042, 9.372636519202217 11.899056361186073,' +
        ' 9.419430645491076 11.913880671464417, 9.466574485050204 11.927552131590879,' +
        ' 9.514039640193472 11.940062506389088, 9.56179751968626 11.951404260077057,' +
        ' 9.609819355967744 11.96157056080646, 9.658076222479398 11.970555284777882,' +
        ' 9.706539051089276 11.978353019929562, 9.755178649601568 11.98495906919742,' +
        ' 9.803965719340878 11.990369453344394, 9.852870872800665 11.99458091335738,' +
        ' 9.901864651345164 11.997590912410345, 9.950917542954176 11.99939763739241,' +
        ' 10 12, 10.049082457045824 11.99939763739241, 10.098135348654836 11.997590912410345,' +
        ' 10.147129127199335 11.99458091335738, 10.196034280659122 11.990369453344394, 10.244821350398432' +
        ' 11.98495906919742, 10.293460948910724 11.978353019929562, 10.341923777520602 11.970555284777882,' +
        ' 10.390180644032256 11.96157056080646, 10.43820248031374 11.951404260077057, 10.485960359806528' +
        ' 11.940062506389088, 10.533425514949798 11.927552131590879, 10.580569354508924 11.913880671464417,' +
        ' 10.627363480797783 11.899056361186073, 10.67377970678444 11.883088130366042, 10.719790073069976' +
        ' 11.865985597669479, 10.76536686473018 11.847759065022574, 10.81048262800998 11.828419511407061,' +
        ' 10.855110186860564 11.807978586246886, 10.899222659309213 11.786448602391031, 10.942793473651996' +
        ' 11.76384252869671, 10.985796384459569 11.740173982217422, 11.028205488386444 11.715457220000545,' +
        ' 11.069995239774194 11.689707130499414, 11.111140466039204 11.66293922460509, 11.151616382835691' +
        ' 11.635169626303167, 11.191398608984867 11.60641506296129, 11.230463181161253 11.576692855253212,' +
        ' 11.268786568327291 11.546020906725474, 11.306345685907553 11.51441769301297, 11.343117909694037' +
        ' 11.481902250709918, 11.379081089474134 11.448494165902934, 11.414213562373096 11.414213562373096,' +
        ' 11.448494165902934 11.379081089474134, 11.481902250709918 11.343117909694037, 11.51441769301297' +
        ' 11.306345685907553, 11.546020906725474 11.268786568327291, 11.576692855253214 11.230463181161253,' +
        ' 11.60641506296129 11.191398608984867, 11.635169626303167 11.151616382835691, 11.66293922460509' +
        ' 11.111140466039204, 11.689707130499414 11.069995239774194, 11.715457220000545 11.028205488386444,' +
        ' 11.740173982217422 10.985796384459569, 11.76384252869671 10.942793473651996, 11.786448602391031' +
        ' 10.899222659309213, 11.807978586246886 10.855110186860564, 11.828419511407061 10.81048262800998,' +
        ' 11.847759065022574 10.76536686473018, 11.865985597669479 10.719790073069976, 11.88308813036604' +
        ' 10.67377970678444, 11.899056361186073 10.627363480797783, 11.913880671464417 10.580569354508924,' +
        ' 11.927552131590879 10.533425514949796, 11.940062506389088 10.485960359806528, 11.951404260077057' +
        ' 10.43820248031374, 11.96157056080646 10.390180644032258, 11.970555284777882 10.341923777520602,' +
        ' 11.978353019929562 10.293460948910724, 11.98495906919742 10.244821350398432, 11.990369453344394' +
        ' 10.196034280659122, 11.99458091335738 10.147129127199335, 11.997590912410345 10.098135348654836,' +
        ' 11.99939763739241 10.049082457045824, 12 10, 11.99939763739241 9.950917542954176, 11.997590912410345' +
        ' 9.901864651345164, 11.99458091335738 9.852870872800665, 11.990369453344394 9.803965719340878,' +
        ' 11.98495906919742 9.755178649601568, 11.978353019929562 9.706539051089276, 11.970555284777882' +
        ' 9.658076222479398, 11.96157056080646 9.609819355967742, 11.951404260077057 9.56179751968626,' +
        ' 11.940062506389088 9.514039640193472, 11.927552131590879 9.466574485050204, 11.913880671464417' +
        ' 9.419430645491076, 11.899056361186073 9.372636519202217, 11.88308813036604 9.32622029321556,' +
        ' 11.865985597669479 9.280209926930024, 11.847759065022574 9.23463313526982, 11.828419511407061' +
        ' 9.18951737199002, 11.807978586246886 9.144889813139436, 11.78644860239103 9.100777340690787,' +
        ' 11.76384252869671 9.057206526348004, 11.740173982217422 9.014203615540431, 11.715457220000545' +
        ' 8.971794511613556, 11.689707130499414 8.930004760225806, 11.66293922460509 8.888859533960796,' +
        ' 11.635169626303167 8.848383617164309, 11.60641506296129 8.808601391015133, 11.576692855253214' +
        ' 8.769536818838747, 11.546020906725474 8.731213431672709, 11.51441769301297 8.693654314092447,' +
        ' 11.481902250709918 8.656882090305963, 11.448494165902934 8.620918910525866, 11.414213562373096' +
        ' 8.585786437626904, 1.414213562373095 -1.414213562373095, 1.3790810894741339 -1.4484941659029338,' +
        ' 1.3431179096940369 -1.4819022507099182, 1.3063456859075537 -1.5144176930129691, 1.268786568327291' +
        ' -1.5460209067254738, 1.2304631811612536 -1.5766928552532125, 1.191398608984867 -1.6064150629612897,' +
        ' 1.1516163828356907 -1.6351696263031674, 1.1111404660392046 -1.6629392246050905, 1.0699952397741945' +
        ' -1.689707130499414, 1.0282054883864433 -1.7154572200005442, 0.9857963844595682 -1.7401739822174227,' +
        ' 0.9427934736519956 -1.7638425286967099, 0.8992226593092132 -1.7864486023910306, 0.8551101868605644' +
        ' -1.8079785862468867, 0.8104826280099797 -1.8284195114070614, 0.7653668647301797 -1.8477590650225735,' +
        ' 0.7197900730699766 -1.8659855976694777, 0.6737797067844401 -1.8830881303660416, 0.6273634807977831' +
        ' -1.8990563611860733, 0.5805693545089247 -1.9138806714644179, 0.5334255149497968 -1.9275521315908797,' +
        ' 0.48596035980652796 -1.940062506389088, 0.43820248031374 -1.951404260077057, 0.39018064403225666' +
        ' -1.9615705608064609, 0.34192377752060227 -1.9705552847778824, 0.2934609489107235 -1.978353019929562,' +
        ' 0.24482135039843256 -1.98495906919742, 0.19603428065912154 -1.9903694533443936, 0.1471291271993349' +
        ' -1.9945809133573804, 0.09813534865483625 -1.9975909124103448, 0.04908245704582453 -1.9993976373924085,' +
        ' 1.2246467991473532e-16 -2, -0.049082457045824285 -1.9993976373924085, -0.09813534865483602' +
        ' -1.9975909124103448, -0.14712912719933466 -1.9945809133573804, -0.1960342806591213 -1.9903694533443939,' +
        ' -0.2448213503984323 -1.98495906919742, -0.2934609489107233 -1.978353019929562, -0.34192377752060205' +
        ' -1.9705552847778827, -0.3901806440322564 -1.9615705608064609, -0.4382024803137393 -1.9514042600770571,' +
        ' -0.48596035980652774 -1.940062506389088, -0.5334255149497966 -1.9275521315908797, -0.5805693545089243' +
        ' -1.9138806714644179, -0.6273634807977828 -1.8990563611860733, -0.6737797067844399 -1.8830881303660416,' +
        ' -0.7197900730699763 -1.8659855976694777, -0.7653668647301795 -1.8477590650225735, -0.8104826280099795' +
        ' -1.8284195114070614, -0.8551101868605645 -1.8079785862468865, -0.8992226593092134 -1.7864486023910304,' +
        ' -0.9427934736519954 -1.76384252869671, -0.985796384459568 -1.740173982217423, -1.028205488386443' +
        ' -1.7154572200005442, -1.069995239774194 -1.6897071304994145, -1.111140466039204 -1.6629392246050907,' +
        ' -1.15161638283569 -1.6351696263031679, -1.1913986089848667 -1.6064150629612899, -1.2304631811612534' +
        ' -1.5766928552532127, -1.2687865683272908 -1.5460209067254742, -1.3063456859075537 -1.514417693012969,' +
        ' -1.3431179096940369 -1.481902250709918, -1.3790810894741339 -1.4484941659029338, -1.414213562373095' +
        ' -1.4142135623730951, -1.4484941659029336 -1.379081089474134, -1.4819022507099178 -1.343117909694037,' +
        ' -1.5144176930129687 -1.3063456859075542, -1.546020906725474 -1.268786568327291, -1.5766928552532125' +
        ' -1.2304631811612539, -1.6064150629612897 -1.191398608984867, -1.6351696263031676 -1.1516163828356902,' +
        ' -1.6629392246050907 -1.1111404660392044, -1.6897071304994142 -1.0699952397741943, -1.715457220000544' +
        ' -1.0282054883864435, -1.7401739822174227 -0.9857963844595683, -1.7638425286967099 -0.9427934736519957,' +
        ' -1.7864486023910304 -0.8992226593092137, -1.8079785862468865 -0.8551101868605648, -1.8284195114070614' +
        ' -0.8104826280099798, -1.8477590650225735 -0.7653668647301798, -1.8659855976694777 -0.7197900730699767,' +
        ' -1.8830881303660414 -0.6737797067844407, -1.8990563611860733 -0.6273634807977828, -1.9138806714644176' +
        ' -0.5805693545089248, -1.9275521315908797 -0.533425514949797, -1.940062506389088 -0.48596035980652813,' +
        ' -1.951404260077057 -0.4382024803137401, -1.9615705608064609 -0.3901806440322572, -1.9705552847778824' +
        ' -0.34192377752060243, -1.978353019929562 -0.2934609489107236, -1.98495906919742 -0.2448213503984327,' +
        ' -1.9903694533443936 -0.19603428065912165, -1.9945809133573804 -0.14712912719933546, -1.9975909124103448' +
        ' -0.09813534865483593, -1.9993976373924085 -0.04908245704582465, -2 -2.4492935982947064e-16,' +
        ' -1.9993976373924085 0.04908245704582416, -1.9975909124103448 0.09813534865483545, -1.9945809133573804' +
        ' 0.147129127199335, -1.9903694533443939 0.19603428065912118, -1.98495906919742 0.2448213503984322,' +
        ' -1.978353019929562 0.29346094891072316, -1.9705552847778827 0.34192377752060193, -1.9615705608064609' +
        ' 0.3901806440322567, -1.9514042600770571 0.4382024803137396, -1.940062506389088 0.48596035980652763,' +
        ' -1.92755213159088 0.5334255149497965, -1.9138806714644179 0.5805693545089242, -1.8990563611860736' +
        ' 0.6273634807977824, -1.8830881303660416 0.6737797067844401, -1.865985597669478 0.7197900730699762,' +
        ' -1.8477590650225737 0.7653668647301793, -1.8284195114070614 0.8104826280099794, -1.807978586246887' +
        ' 0.8551101868605636, -1.7864486023910306 0.8992226593092133, -1.76384252869671 0.9427934736519953,' +
        ' -1.740173982217423 0.9857963844595679, -1.7154572200005442 1.028205488386443, -1.6897071304994145' +
        ' 1.0699952397741939, -1.662939224605091 1.111140466039204, -1.6351696263031674 1.1516163828356907,' +
        ' -1.6064150629612899 1.1913986089848665, -1.5766928552532127 1.2304631811612534, -1.5460209067254742' +
        ' 1.2687865683272905, -1.5144176930129696 1.306345685907553, -1.4819022507099182 1.3431179096940369,' +
        ' -1.448494165902934 1.3790810894741337, -1.414213562373095 1.414213562373095, 8.585786437626904' +
        ' 11.414213562373096))');
    });
    test('polyline', () => {
      expect(new DPolygon([
        new DPoint(0, 0),
        new DPoint(10, 10),
        new DPoint(20, 0)
      ]).buffer(2)
        .toWKT()).toBe('POLYGON ((8.585786437626904 11.414213562373096, 8.620918910525866' +
        ' 11.448494165902934, 8.656882090305963 11.481902250709918, 8.693654314092447 11.51441769301297,' +
        ' 8.731213431672709 11.546020906725474, 8.769536818838747 11.576692855253214, 8.808601391015133' +
        ' 11.60641506296129, 8.848383617164309 11.635169626303167, 8.888859533960796 11.66293922460509,' +
        ' 8.930004760225806 11.689707130499414, 8.971794511613556 11.715457220000545, 9.014203615540431' +
        ' 11.740173982217422, 9.057206526348004 11.76384252869671, 9.100777340690787 11.78644860239103,' +
        ' 9.144889813139436 11.807978586246886, 9.189517371990021 11.828419511407061, 9.23463313526982' +
        ' 11.847759065022574, 9.280209926930024 11.865985597669479, 9.32622029321556 11.883088130366042,' +
        ' 9.372636519202217 11.899056361186073, 9.419430645491076 11.913880671464417, 9.466574485050204' +
        ' 11.927552131590879, 9.514039640193472 11.940062506389088, 9.56179751968626 11.951404260077057,' +
        ' 9.609819355967744 11.96157056080646, 9.658076222479398 11.970555284777882, 9.706539051089276' +
        ' 11.978353019929562, 9.755178649601568 11.98495906919742, 9.803965719340878 11.990369453344394,' +
        ' 9.852870872800665 11.99458091335738, 9.901864651345164 11.997590912410345, 9.950917542954176' +
        ' 11.99939763739241, 10 12, 10.049082457045824 11.99939763739241, 10.098135348654836 11.997590912410345,' +
        ' 10.147129127199335 11.99458091335738, 10.196034280659122 11.990369453344394, 10.244821350398432' +
        ' 11.98495906919742, 10.293460948910724 11.978353019929562, 10.341923777520602 11.970555284777882,' +
        ' 10.390180644032256 11.96157056080646, 10.43820248031374 11.951404260077057, 10.485960359806528' +
        ' 11.940062506389088, 10.533425514949798 11.927552131590879, 10.580569354508924 11.913880671464417,' +
        ' 10.627363480797783 11.899056361186073, 10.67377970678444 11.883088130366042, 10.719790073069976' +
        ' 11.865985597669479, 10.76536686473018 11.847759065022574, 10.81048262800998 11.828419511407061,' +
        ' 10.855110186860564 11.807978586246886, 10.899222659309213 11.786448602391031, 10.942793473651996' +
        ' 11.76384252869671, 10.985796384459569 11.740173982217422, 11.028205488386444 11.715457220000545,' +
        ' 11.069995239774194 11.689707130499414, 11.111140466039204 11.66293922460509, 11.151616382835691' +
        ' 11.635169626303167, 11.191398608984867 11.60641506296129, 11.230463181161253 11.576692855253212,' +
        ' 11.268786568327291 11.546020906725474, 11.306345685907553 11.51441769301297, 11.343117909694037' +
        ' 11.481902250709918, 11.379081089474134 11.448494165902934, 11.414213562373096 11.414213562373096,' +
        ' 21.414213562373096 1.414213562373095, 21.448494165902932 1.3790810894741337, 21.48190225070992' +
        ' 1.3431179096940367, 21.51441769301297 1.3063456859075535, 21.546020906725474 1.268786568327291,' +
        ' 21.576692855253214 1.2304631811612536, 21.60641506296129 1.1913986089848667, 21.635169626303167' +
        ' 1.1516163828356907, 21.66293922460509 1.1111404660392044, 21.689707130499414 1.0699952397741943,' +
        ' 21.715457220000545 1.0282054883864433, 21.740173982217424 0.9857963844595681, 21.76384252869671' +
        ' 0.9427934736519953, 21.78644860239103 0.8992226593092131, 21.807978586246886 0.8551101868605642,' +
        ' 21.828419511407063 0.8104826280099797, 21.847759065022572 0.7653668647301796, 21.86598559766948' +
        ' 0.7197900730699762, 21.88308813036604 0.6737797067844401, 21.899056361186073 0.627363480797783,' +
        ' 21.91388067146442 0.5805693545089247, 21.92755213159088 0.5334255149497967, 21.940062506389086' +
        ' 0.48596035980652785, 21.95140426007706 0.43820248031373965, 21.96157056080646 0.3901806440322565,' +
        ' 21.970555284777884 0.3419237775206024, 21.97835301992956 0.2934609489107234, 21.98495906919742' +
        ' 0.24482135039843245, 21.990369453344393 0.1960342806591212, 21.99458091335738 0.1471291271993348,' +
        ' 21.997590912410345 0.09813534865483614, 21.99939763739241 0.04908245704582463, 22 0, 21.99939763739241' +
        ' -0.04908245704582463, 21.997590912410345 -0.09813534865483614, 21.99458091335738 -0.1471291271993348,' +
        ' 21.990369453344393 -0.1960342806591212, 21.98495906919742 -0.24482135039843245, 21.97835301992956' +
        ' -0.2934609489107234, 21.970555284777884 -0.3419237775206024, 21.96157056080646 -0.3901806440322565,' +
        ' 21.95140426007706 -0.43820248031373943, 21.940062506389086 -0.48596035980652785, 21.92755213159088' +
        ' -0.5334255149497967, 21.91388067146442 -0.5805693545089246, 21.899056361186073 -0.627363480797783,' +
        ' 21.88308813036604 -0.67377970678444, 21.86598559766948 -0.7197900730699764, 21.847759065022572' +
        ' -0.7653668647301796, 21.828419511407063 -0.8104826280099796, 21.807978586246886 -0.8551101868605643,' +
        ' 21.78644860239103 -0.8992226593092131, 21.76384252869671 -0.9427934736519955, 21.740173982217424' +
        ' -0.9857963844595681, 21.715457220000545 -1.0282054883864433, 21.689707130499414 -1.0699952397741945,' +
        ' 21.66293922460509 -1.1111404660392044, 21.635169626303167 -1.1516163828356905, 21.60641506296129' +
        ' -1.1913986089848667, 21.576692855253214 -1.2304631811612536, 21.546020906725474 -1.2687865683272908,' +
        ' 21.51441769301297 -1.3063456859075535, 21.48190225070992 -1.3431179096940367, 21.448494165902932' +
        ' -1.3790810894741339, 21.414213562373096 -1.414213562373095, 21.379081089474134 -1.4484941659029338,' +
        ' 21.343117909694037 -1.4819022507099182, 21.306345685907555 -1.5144176930129691, 21.26878656832729' +
        ' -1.546020906725474, 21.230463181161255 -1.5766928552532125, 21.191398608984866 -1.6064150629612897,' +
        ' 21.15161638283569 -1.6351696263031674, 21.111140466039206 -1.6629392246050905, 21.069995239774194' +
        ' -1.689707130499414, 21.028205488386444 -1.7154572200005442, 20.98579638445957 -1.7401739822174227,' +
        ' 20.942793473651996 -1.7638425286967099, 20.899222659309213 -1.7864486023910306, 20.855110186860564' +
        ' -1.8079785862468867, 20.81048262800998 -1.8284195114070614, 20.76536686473018 -1.8477590650225735,' +
        ' 20.719790073069976 -1.8659855976694777, 20.67377970678444 -1.8830881303660414, 20.627363480797783' +
        ' -1.8990563611860733, 20.580569354508924 -1.9138806714644179, 20.533425514949798 -1.9275521315908797,' +
        ' 20.485960359806526 -1.940062506389088, 20.43820248031374 -1.951404260077057, 20.390180644032256' +
        ' -1.9615705608064609, 20.341923777520602 -1.9705552847778824, 20.293460948910724 -1.978353019929562,' +
        ' 20.244821350398432 -1.98495906919742, 20.19603428065912 -1.9903694533443936, 20.147129127199335' +
        ' -1.9945809133573804, 20.098135348654836 -1.9975909124103448, 20.049082457045824 -1.9993976373924085,' +
        ' 20 -2, 19.950917542954176 -1.9993976373924085, 19.901864651345164 -1.9975909124103448, 19.852870872800665' +
        ' -1.9945809133573804, 19.80396571934088 -1.9903694533443939, 19.755178649601568 -1.98495906919742,' +
        ' 19.706539051089276 -1.978353019929562, 19.658076222479398 -1.9705552847778827, 19.609819355967744' +
        ' -1.9615705608064609, 19.56179751968626 -1.9514042600770571, 19.514039640193474 -1.940062506389088,' +
        ' 19.466574485050202 -1.9275521315908797, 19.419430645491076 -1.9138806714644179, 19.372636519202217' +
        ' -1.8990563611860736, 19.32622029321556 -1.8830881303660414, 19.280209926930024 -1.8659855976694777,' +
        ' 19.23463313526982 -1.8477590650225735, 19.18951737199002 -1.8284195114070614, 19.144889813139436' +
        ' -1.807978586246887, 19.100777340690787 -1.7864486023910304, 19.057206526348004 -1.76384252869671,' +
        ' 19.01420361554043 -1.740173982217423, 18.971794511613556 -1.7154572200005442, 18.930004760225806' +
        ' -1.6897071304994145, 18.888859533960797 -1.6629392246050907, 18.84838361716431 -1.6351696263031674,' +
        ' 18.808601391015134 -1.6064150629612899, 18.769536818838745 -1.5766928552532127, 18.73121343167271' +
        ' -1.5460209067254742, 18.69365431409245 -1.5144176930129694, 18.656882090305963 -1.481902250709918,' +
        ' 18.620918910525866 -1.4484941659029338, 18.585786437626904 -1.414213562373095, 10 7.17157287525381,' +
        ' 1.414213562373095 -1.414213562373095, 1.3790810894741339 -1.4484941659029338, 1.3431179096940369' +
        ' -1.4819022507099182, 1.3063456859075537 -1.5144176930129691, 1.268786568327291 -1.5460209067254738,' +
        ' 1.2304631811612536 -1.5766928552532125, 1.191398608984867 -1.6064150629612897, 1.1516163828356907' +
        ' -1.6351696263031674, 1.1111404660392046 -1.6629392246050905, 1.0699952397741945 -1.689707130499414,' +
        ' 1.0282054883864433 -1.7154572200005442, 0.9857963844595682 -1.7401739822174227, 0.9427934736519956' +
        ' -1.7638425286967099, 0.8992226593092132 -1.7864486023910306, 0.8551101868605644 -1.8079785862468867,' +
        ' 0.8104826280099797 -1.8284195114070614, 0.7653668647301797 -1.8477590650225735, 0.7197900730699766' +
        ' -1.8659855976694777, 0.6737797067844401 -1.8830881303660416, 0.6273634807977831 -1.8990563611860733,' +
        ' 0.5805693545089247 -1.9138806714644179, 0.5334255149497968 -1.9275521315908797, 0.48596035980652796' +
        ' -1.940062506389088, 0.43820248031374 -1.951404260077057, 0.39018064403225666 -1.9615705608064609,' +
        ' 0.34192377752060227 -1.9705552847778824, 0.2934609489107235 -1.978353019929562, 0.24482135039843256' +
        ' -1.98495906919742, 0.19603428065912154 -1.9903694533443936, 0.1471291271993349 -1.9945809133573804,' +
        ' 0.09813534865483625 -1.9975909124103448, 0.04908245704582453 -1.9993976373924085, 1.2246467991473532e-16' +
        ' -2, -0.049082457045824285 -1.9993976373924085, -0.09813534865483602 -1.9975909124103448,' +
        ' -0.14712912719933466 -1.9945809133573804, -0.1960342806591213 -1.9903694533443939, -0.2448213503984323' +
        ' -1.98495906919742, -0.2934609489107233 -1.978353019929562, -0.34192377752060205 -1.9705552847778827,' +
        ' -0.3901806440322564 -1.9615705608064609, -0.4382024803137393 -1.9514042600770571, -0.48596035980652774' +
        ' -1.940062506389088, -0.5334255149497966 -1.9275521315908797, -0.5805693545089243 -1.9138806714644179,' +
        ' -0.6273634807977828 -1.8990563611860733, -0.6737797067844399 -1.8830881303660416, -0.7197900730699763' +
        ' -1.8659855976694777, -0.7653668647301795 -1.8477590650225735, -0.8104826280099795 -1.8284195114070614,' +
        ' -0.8551101868605645 -1.8079785862468865, -0.8992226593092134 -1.7864486023910304, -0.9427934736519954' +
        ' -1.76384252869671, -0.985796384459568 -1.740173982217423, -1.028205488386443 -1.7154572200005442,' +
        ' -1.069995239774194 -1.6897071304994145, -1.111140466039204 -1.6629392246050907, -1.15161638283569' +
        ' -1.6351696263031679, -1.1913986089848667 -1.6064150629612899, -1.2304631811612534 -1.5766928552532127,' +
        ' -1.2687865683272908 -1.5460209067254742, -1.3063456859075537 -1.514417693012969, -1.3431179096940369' +
        ' -1.481902250709918, -1.3790810894741339 -1.4484941659029338, -1.414213562373095 -1.4142135623730951,' +
        ' -1.4484941659029336 -1.379081089474134, -1.4819022507099178 -1.343117909694037, -1.5144176930129687' +
        ' -1.3063456859075542, -1.546020906725474 -1.268786568327291, -1.5766928552532125 -1.2304631811612539,' +
        ' -1.6064150629612897 -1.191398608984867, -1.6351696263031676 -1.1516163828356902, -1.6629392246050907' +
        ' -1.1111404660392044, -1.6897071304994142 -1.0699952397741943, -1.715457220000544 -1.0282054883864435,' +
        ' -1.7401739822174227 -0.9857963844595683, -1.7638425286967099 -0.9427934736519957, -1.7864486023910304' +
        ' -0.8992226593092137, -1.8079785862468865 -0.8551101868605648, -1.8284195114070614 -0.8104826280099798,' +
        ' -1.8477590650225735 -0.7653668647301798, -1.8659855976694777 -0.7197900730699767, -1.8830881303660414' +
        ' -0.6737797067844407, -1.8990563611860733 -0.6273634807977828, -1.9138806714644176 -0.5805693545089248,' +
        ' -1.9275521315908797 -0.533425514949797, -1.940062506389088 -0.48596035980652813, -1.951404260077057' +
        ' -0.4382024803137401, -1.9615705608064609 -0.3901806440322572, -1.9705552847778824 -0.34192377752060243,' +
        ' -1.978353019929562 -0.2934609489107236, -1.98495906919742 -0.2448213503984327, -1.9903694533443936' +
        ' -0.19603428065912165, -1.9945809133573804 -0.14712912719933546, -1.9975909124103448 -0.09813534865483593,' +
        ' -1.9993976373924085 -0.04908245704582465, -2 -2.4492935982947064e-16, -1.9993976373924085' +
        ' 0.04908245704582416, -1.9975909124103448 0.09813534865483545, -1.9945809133573804 0.147129127199335,' +
        ' -1.9903694533443939 0.19603428065912118, -1.98495906919742 0.2448213503984322, -1.978353019929562' +
        ' 0.29346094891072316, -1.9705552847778827 0.34192377752060193, -1.9615705608064609 0.3901806440322567,' +
        ' -1.9514042600770571 0.4382024803137396, -1.940062506389088 0.48596035980652763, -1.92755213159088' +
        ' 0.5334255149497965, -1.9138806714644179 0.5805693545089242, -1.8990563611860736 0.6273634807977824,' +
        ' -1.8830881303660416 0.6737797067844401, -1.865985597669478 0.7197900730699762, -1.8477590650225737' +
        ' 0.7653668647301793, -1.8284195114070614 0.8104826280099794, -1.807978586246887 0.8551101868605636,' +
        ' -1.7864486023910306 0.8992226593092133, -1.76384252869671 0.9427934736519953, -1.740173982217423' +
        ' 0.9857963844595679, -1.7154572200005442 1.028205488386443, -1.6897071304994145 1.0699952397741939,' +
        ' -1.662939224605091 1.111140466039204, -1.6351696263031674 1.1516163828356907, -1.6064150629612899' +
        ' 1.1913986089848665, -1.5766928552532127 1.2304631811612534, -1.5460209067254742 1.2687865683272905,' +
        ' -1.5144176930129696 1.306345685907553, -1.4819022507099182 1.3431179096940369, -1.448494165902934' +
        ' 1.3790810894741337, -1.414213562373095 1.414213562373095, 8.585786437626904 11.414213562373096))');
    });
    test('polygon', () => {
      expect(new DPolygon([
        new DPoint(10, 0),
        new DPoint(10, 10),
        new DPoint(0, 10),
        new DPoint(0, 0)
      ]).close()
        .buffer(2)
        .toWKT()).toBe('POLYGON ((10 -2, 0 -2, -0.049082457045824285 -1.9993976373924085,' +
        ' -0.09813534865483602 -1.9975909124103448, -0.14712912719933466 -1.9945809133573804,' +
        ' -0.1960342806591213 -1.9903694533443939, -0.2448213503984323 -1.98495906919742,' +
        ' -0.2934609489107233 -1.978353019929562, -0.3419237775206025 -1.9705552847778824,' +
        ' -0.3901806440322564 -1.9615705608064609, -0.4382024803137393 -1.9514042600770571,' +
        ' -0.48596035980652774 -1.940062506389088, -0.5334255149497966 -1.9275521315908797,' +
        ' -0.5805693545089243 -1.9138806714644179, -0.6273634807977828 -1.8990563611860733,' +
        ' -0.6737797067844399 -1.8830881303660416, -0.7197900730699763 -1.8659855976694777,' +
        ' -0.7653668647301795 -1.8477590650225735, -0.8104826280099795 -1.8284195114070614,' +
        ' -0.8551101868605645 -1.8079785862468865, -0.8992226593092134 -1.7864486023910304,' +
        ' -0.9427934736519954 -1.76384252869671, -0.985796384459568 -1.740173982217423,' +
        ' -1.028205488386443 -1.7154572200005442, -1.069995239774194 -1.6897071304994145,' +
        ' -1.111140466039204 -1.6629392246050907, -1.1516163828356907 -1.6351696263031674,' +
        ' -1.1913986089848667 -1.6064150629612899, -1.2304631811612534 -1.5766928552532127,' +
        ' -1.2687865683272908 -1.5460209067254742, -1.3063456859075537 -1.514417693012969,' +
        ' -1.3431179096940369 -1.481902250709918, -1.3790810894741339 -1.4484941659029338,' +
        ' -1.414213562373095 -1.4142135623730951, -1.4484941659029336 -1.379081089474134,' +
        ' -1.4819022507099178 -1.343117909694037, -1.5144176930129687 -1.3063456859075542,' +
        ' -1.546020906725474 -1.268786568327291, -1.5766928552532125 -1.2304631811612539,' +
        ' -1.6064150629612897 -1.191398608984867, -1.6351696263031672 -1.151616382835691,' +
        ' -1.6629392246050907 -1.1111404660392044, -1.6897071304994142 -1.0699952397741943,' +
        ' -1.715457220000544 -1.0282054883864435, -1.7401739822174227 -0.9857963844595683,' +
        ' -1.7638425286967099 -0.9427934736519957, -1.7864486023910304 -0.8992226593092137,' +
        ' -1.8079785862468867 -0.8551101868605641, -1.8284195114070614 -0.8104826280099798,' +
        ' -1.8477590650225735 -0.7653668647301798, -1.8659855976694777 -0.7197900730699767,' +
        ' -1.8830881303660414 -0.6737797067844407, -1.8990563611860733 -0.6273634807977828,' +
        ' -1.9138806714644176 -0.5805693545089248, -1.9275521315908797 -0.533425514949797,' +
        ' -1.940062506389088 -0.48596035980652813, -1.951404260077057 -0.4382024803137401,' +
        ' -1.9615705608064609 -0.3901806440322572, -1.9705552847778824 -0.34192377752060243,' +
        ' -1.978353019929562 -0.2934609489107236, -1.98495906919742 -0.2448213503984327,' +
        ' -1.9903694533443936 -0.19603428065912165, -1.9945809133573804 -0.14712912719933546,' +
        ' -1.9975909124103448 -0.09813534865483593, -1.9993976373924085 -0.04908245704582465,' +
        ' -2 0, -2 10, -1.9993976373924085 10.049082457045825, -1.9975909124103448 10.098135348654836,' +
        ' -1.9945809133573804 10.147129127199335, -1.9903694533443936 10.196034280659122,' +
        ' -1.98495906919742 10.244821350398432, -1.978353019929562 10.293460948910724,' +
        ' -1.9705552847778824 10.341923777520604, -1.9615705608064609 10.390180644032258,' +
        ' -1.951404260077057 10.43820248031374, -1.940062506389088 10.485960359806528,' +
        ' -1.9275521315908797 10.533425514949798, -1.9138806714644176 10.580569354508924,' +
        ' -1.8990563611860733 10.627363480797783, -1.8830881303660416 10.67377970678444,' +
        ' -1.8659855976694777 10.719790073069976, -1.8477590650225735 10.76536686473018,' +
        ' -1.8284195114070614 10.81048262800998, -1.8079785862468865 10.855110186860564,' +
        ' -1.7864486023910304 10.899222659309213, -1.7638425286967099 10.942793473651996,' +
        ' -1.7401739822174227 10.985796384459569, -1.715457220000544 11.028205488386444,' +
        ' -1.6897071304994142 11.069995239774194, -1.6629392246050907 11.111140466039204,' +
        ' -1.6351696263031672 11.151616382835691, -1.6064150629612897 11.191398608984867,' +
        ' -1.5766928552532125 11.230463181161253, -1.546020906725474 11.268786568327291,' +
        ' -1.5144176930129687 11.306345685907555, -1.4819022507099178 11.343117909694037,' +
        ' -1.4484941659029336 11.379081089474134, -1.414213562373095 11.414213562373096,' +
        ' -1.3790810894741339 11.448494165902934, -1.3431179096940369 11.481902250709918,' +
        ' -1.3063456859075537 11.51441769301297, -1.2687865683272908 11.546020906725474,' +
        ' -1.2304631811612534 11.576692855253214, -1.1913986089848667 11.60641506296129,' +
        ' -1.1516163828356907 11.635169626303167, -1.111140466039204 11.66293922460509,' +
        ' -1.069995239774194 11.689707130499414, -1.028205488386443 11.715457220000545,' +
        ' -0.985796384459568 11.740173982217422, -0.9427934736519954 11.76384252869671,' +
        ' -0.8992226593092134 11.78644860239103, -0.8551101868605637 11.807978586246886,' +
        ' -0.8104826280099795 11.828419511407061, -0.7653668647301795 11.847759065022574,' +
        ' -0.7197900730699763 11.865985597669479, -0.6737797067844399 11.883088130366042,' +
        ' -0.6273634807977828 11.899056361186073, -0.5805693545089243 11.913880671464417,' +
        ' -0.5334255149497966 11.927552131590879, -0.48596035980652774 11.940062506389088,' +
        ' -0.4382024803137393 11.951404260077057, -0.3901806440322564 11.96157056080646,' +
        ' -0.3419237775206025 11.970555284777882, -0.2934609489107233 11.978353019929562,' +
        ' -0.2448213503984323 11.98495906919742, -0.1960342806591213 11.990369453344394,' +
        ' -0.14712912719933466 11.99458091335738, -0.09813534865483602 11.997590912410345,' +
        ' -0.049082457045824285 11.99939763739241, 0 12, 10 12, 10.049082457045824 11.99939763739241,' +
        ' 10.098135348654836 11.997590912410345, 10.147129127199335 11.99458091335738,' +
        ' 10.196034280659122 11.990369453344394, 10.244821350398432 11.98495906919742,' +
        ' 10.293460948910724 11.978353019929562, 10.341923777520602 11.970555284777882,' +
        ' 10.390180644032256 11.96157056080646, 10.43820248031374 11.951404260077057,' +
        ' 10.485960359806528 11.940062506389088, 10.533425514949798 11.927552131590879,' +
        ' 10.580569354508924 11.913880671464417, 10.627363480797783 11.899056361186073,' +
        ' 10.67377970678444 11.883088130366042, 10.719790073069976 11.865985597669479,' +
        ' 10.76536686473018 11.847759065022574, 10.81048262800998 11.828419511407061,' +
        ' 10.855110186860564 11.807978586246886, 10.899222659309213 11.786448602391031,' +
        ' 10.942793473651996 11.76384252869671, 10.985796384459569 11.740173982217422,' +
        ' 11.028205488386444 11.715457220000545, 11.069995239774194 11.689707130499414,' +
        ' 11.111140466039204 11.66293922460509, 11.151616382835691 11.635169626303167,' +
        ' 11.191398608984867 11.60641506296129, 11.230463181161253 11.576692855253212,' +
        ' 11.268786568327291 11.546020906725474, 11.306345685907553 11.51441769301297,' +
        ' 11.343117909694037 11.481902250709918, 11.379081089474134 11.448494165902934,' +
        ' 11.414213562373096 11.414213562373096, 11.448494165902934 11.379081089474134,' +
        ' 11.481902250709918 11.343117909694037, 11.51441769301297 11.306345685907553,' +
        ' 11.546020906725474 11.268786568327291, 11.576692855253214 11.230463181161253,' +
        ' 11.60641506296129 11.191398608984867, 11.635169626303167 11.151616382835691,' +
        ' 11.66293922460509 11.111140466039204, 11.689707130499414 11.069995239774194,' +
        ' 11.715457220000545 11.028205488386444, 11.740173982217422 10.985796384459569,' +
        ' 11.76384252869671 10.942793473651996, 11.786448602391031 10.899222659309213,' +
        ' 11.807978586246886 10.855110186860564, 11.828419511407061 10.81048262800998,' +
        ' 11.847759065022574 10.76536686473018, 11.865985597669479 10.719790073069976,' +
        ' 11.883088130366042 10.67377970678444, 11.899056361186073 10.627363480797783,' +
        ' 11.913880671464417 10.580569354508924, 11.927552131590879 10.533425514949796,' +
        ' 11.940062506389088 10.485960359806528, 11.951404260077057 10.43820248031374,' +
        ' 11.96157056080646 10.390180644032256, 11.970555284777882 10.341923777520602,' +
        ' 11.978353019929562 10.293460948910724, 11.98495906919742 10.244821350398432,' +
        ' 11.990369453344394 10.196034280659122, 11.99458091335738 10.147129127199335,' +
        ' 11.997590912410345 10.098135348654836, 11.99939763739241 10.049082457045824,' +
        ' 12 10, 12 0, 11.99939763739241 -0.04908245704582441, 11.997590912410345 -0.09813534865483614,' +
        ' 11.99458091335738 -0.1471291271993348, 11.990369453344394 -0.19603428065912143,' +
        ' 11.98495906919742 -0.24482135039843245, 11.978353019929562 -0.2934609489107234,' +
        ' 11.970555284777882 -0.3419237775206026, 11.96157056080646 -0.3901806440322565,' +
        ' 11.951404260077057 -0.43820248031373943, 11.940062506389088 -0.48596035980652785,' +
        ' 11.927552131590879 -0.5334255149497967, 11.913880671464417 -0.5805693545089246,' +
        ' 11.899056361186073 -0.627363480797783, 11.883088130366042 -0.67377970678444,' +
        ' 11.865985597669479 -0.7197900730699764, 11.847759065022574 -0.7653668647301796,' +
        ' 11.828419511407061 -0.8104826280099796, 11.807978586246886 -0.8551101868605643,' +
        ' 11.786448602391031 -0.8992226593092131, 11.76384252869671 -0.9427934736519955,' +
        ' 11.740173982217422 -0.9857963844595681, 11.715457220000545 -1.0282054883864433,' +
        ' 11.689707130499414 -1.0699952397741945, 11.66293922460509 -1.1111404660392044,' +
        ' 11.635169626303167 -1.1516163828356907, 11.60641506296129 -1.1913986089848667,' +
        ' 11.576692855253214 -1.2304631811612536, 11.546020906725474 -1.268786568327291,' +
        ' 11.51441769301297 -1.3063456859075535, 11.481902250709918 -1.3431179096940367,' +
        ' 11.448494165902934 -1.3790810894741337, 11.414213562373096 -1.414213562373095,' +
        ' 11.379081089474134 -1.4484941659029338, 11.343117909694037 -1.4819022507099182,' +
        ' 11.306345685907553 -1.5144176930129691, 11.268786568327291 -1.5460209067254738,' +
        ' 11.230463181161253 -1.5766928552532125, 11.191398608984867 -1.6064150629612897,' +
        ' 11.151616382835691 -1.6351696263031674, 11.111140466039204 -1.6629392246050905,' +
        ' 11.069995239774194 -1.6897071304994142, 11.028205488386444 -1.7154572200005442,' +
        ' 10.985796384459569 -1.7401739822174227, 10.942793473651996 -1.7638425286967099,' +
        ' 10.899222659309213 -1.7864486023910306, 10.855110186860564 -1.8079785862468867,' +
        ' 10.81048262800998 -1.8284195114070614, 10.76536686473018 -1.8477590650225735,' +
        ' 10.719790073069976 -1.8659855976694777, 10.67377970678444 -1.8830881303660416,' +
        ' 10.627363480797783 -1.8990563611860733, 10.580569354508924 -1.9138806714644179,' +
        ' 10.533425514949798 -1.9275521315908797, 10.485960359806528 -1.940062506389088,' +
        ' 10.43820248031374 -1.9514042600770571, 10.390180644032256 -1.9615705608064609,' +
        ' 10.341923777520602 -1.9705552847778824, 10.293460948910724 -1.978353019929562,' +
        ' 10.244821350398432 -1.98495906919742, 10.196034280659122 -1.9903694533443936,' +
        ' 10.147129127199335 -1.9945809133573804, 10.098135348654836 -1.9975909124103448,' +
        ' 10.049082457045824 -1.9993976373924085, 10 -2))');
    });
    test('quadrant segments = 4', () => {
      expect(new DPolygon([
        new DPoint(10, 0),
        new DPoint(10, 10),
        new DPoint(0, 10),
        new DPoint(0, 0)
      ]).buffer(2, 4)
        .toWKT()).toBe('POLYGON ((8 8, 2 8, 2 0, 1.8477590650225735 -0.7653668647301796, 1.4142135623730951' +
        ' -1.414213562373095, 0.7653668647301797 -1.8477590650225735, 1.2246467991473532e-16 -2, -0.7653668647301795' +
        ' -1.8477590650225735, -1.414213562373095 -1.4142135623730951, -1.8477590650225735 -0.7653668647301798, -2 0,' +
        ' -2 10, -1.8477590650225735 10.76536686473018, -1.414213562373095 11.414213562373096, -0.7653668647301795' +
        ' 11.847759065022574, 0 12, 10 12, 10.76536686473018 11.847759065022574, 11.414213562373096' +
        ' 11.414213562373096, 11.847759065022574 10.76536686473018, 12 10, 12 0, 11.847759065022574' +
        ' -0.7653668647301796, 11.414213562373096 -1.414213562373095, 10.76536686473018 -1.8477590650225735,' +
        ' 10 -2, 9.23463313526982 -1.8477590650225735, 8.585786437626904 -1.4142135623730951, 8.152240934977426 ' +
        '-0.7653668647301798, 8 0, 8 8))');
    });
    test('CAP_FLAT', () => {
      expect(new DPolygon([
        new DPoint(10, 0),
        new DPoint(10, 10),
        new DPoint(0, 10)
      ]).buffer(2, 8, DPolygon.CAP_FLAT)
        .toWKT()).toBe('POLYGON ((8 8, 0 8, 0 12, 10 12, 10.390180644032256 11.96157056080646,' +
        ' 10.76536686473018 11.847759065022574, 11.111140466039204 11.66293922460509, 11.414213562373096' +
        ' 11.414213562373096, 11.66293922460509 11.111140466039204, 11.847759065022574 10.76536686473018,' +
        ' 11.96157056080646 10.390180644032256, 12 10, 12 0, 8 0, 8 8))');
    });
    test('CAP_SQUARE', () => {
      expect(new DPolygon([
        new DPoint(10, 0),
        new DPoint(10, 10),
        new DPoint(0, 10)
      ]).buffer(2, 8, DPolygon.CAP_SQUARE)
        .toWKT()).toBe('POLYGON ((8 8, 0 8, -2 8, -2 12, 10 12, 10.390180644032256 11.96157056080646,' +
        ' 10.76536686473018 11.847759065022574, 11.111140466039204 11.66293922460509, 11.414213562373096' +
        ' 11.414213562373096, 11.66293922460509 11.111140466039204, 11.847759065022574 10.76536686473018,' +
        ' 11.96157056080646 10.390180644032256, 12 10, 12 0, 12 -2, 8 -2, 8 8))');
    });
  });

  // describe('sideBuffers', () => {
  //   test('1', () => {
  //     const p = new DPolygon([
  //       new DPoint(3, 3),
  //       new DPoint(13, 3),
  //       new DPoint(13, 13),
  //       new DPoint(3, 13)
  //     ]);
  //     const [p1, p2] = p.sideBuffers(2);
  //     const [t] = createCanvas(new DPoint(16, 16));
  //     p1.drawPolygonOnCanvas(t, undefined, '#ff0000');
  //     p2.drawPolygonOnCanvas(t, undefined, '#00ff00');
  //     p.drawPolygonOnCanvas(t, undefined, '#0000ff');
  //
  //     expect(t.toDataURL()).toMatchSnapshot();
  //   });
  // });

  describe('getTrianglesPointIndexes', () => {
    test('1', () => {
      const p = new DPolygon([
        new DPoint(0, 0),
        new DPoint(10, 0),
        new DPoint(10, 10),
        new DPoint(0, 10)
      ]);
      expect(p.getTrianglesPointIndexes()).toEqual([0, 1, 2, 0, 2, 3]);
    });
    test('2', () => {
      const p = DPolygon.parseFromWKT('POLYGON ((1 1, 4 1, 4 2, 2 2, 2 3, 5 3, 5 4, 3 4, 3 5, 4 5, 4 6,' +
        ' 1 6, 1 5, 2 5, 2 4, 1 4))')
        .loop()
        .scale(10)
        .run()
        .close();
      expect(p
        .getTrianglesPointIndexes()).toEqual([
        0,
        1,
        2,
        0,
        2,
        3,
        0,
        3,
        4,
        4,
        5,
        6,
        4,
        6,
        7,
        4,
        7,
        8,
        8,
        9,
        10,
        8,
        10,
        11,
        11,
        12,
        13,
        14,
        15,
        0,
        14,
        0,
        4,
        14,
        4,
        8,
        8,
        11,
        13,
        8,
        13,
        14
      ]);
    });
    test('3', () => {
      const p = DPolygon.parseFromWKT('POLYGON ((1 1, 4 1, 4 2, 2 2, 2 3, 5 3, 5 4, 3 4, 3 5, 4 5, 4 6,' +
        ' 1 6, 1 5, 2 5, 2 4, 1 4), (1.2 1.2, 1.8 1.2, 1.8 3.8, 1.2 3.8))')
        .loop()
        .scale(10)
        .run()
        .close();
      const triangles = p.getTrianglesPointIndexes();
      expect(triangles).toEqual([
        17,
        20,
        0,
        17,
        0,
        1,
        1,
        2,
        3,
        4,
        5,
        6,
        4,
        6,
        7,
        4,
        7,
        8,
        8,
        9,
        10,
        8,
        10,
        11,
        11,
        12,
        13,
        15,
        0,
        20,
        15,
        20,
        19,
        18,
        17,
        1,
        18,
        1,
        3,
        18,
        3,
        4,
        8,
        11,
        13,
        8,
        13,
        14,
        14,
        15,
        19,
        14,
        19,
        18,
        14,
        18,
        4,
        14,
        4,
        8
      ]);
    });
    test('4', () => {
      const p = DPolygon.parseFromWKT('POLYGON ((40 20, 18 12, 12 12, 40 10))')
        .close();
      expect(p.getTrianglesPointIndexes()).toEqual([
        1,
        2,
        3,
        1,
        3,
        0
      ]);
    });
    test('5', () => {
      const p = DPolygon.parseFromWKT('POLYGON ((1 1, 4 1, 4 2, 2 2, 2 3, 5 3, 5 4, 3 4, 3 5, 4 5, 4 6,' +
        ' 1 6, 1 5, 2 5, 2 4, 1 4), (1.2 1.2, 1.8 1.2, 1.8 3.8, 1.2 3.8), (3.2 3.2, 3.2 3.8, 3.8 3.8, 3.8 3.2))')
        .loop()
        .scale(10)
        .run()
        .close();
      expect(p.getTrianglesPointIndexes()).toEqual([
        19,
        21,
        22,
        17,
        20,
        0,
        17,
        0,
        1,
        1,
        2,
        3,
        8,
        9,
        10,
        8,
        10,
        11,
        11,
        12,
        13,
        15,
        0,
        20,
        15,
        20,
        19,
        15,
        19,
        22,
        15,
        22,
        23,
        18,
        17,
        1,
        18,
        1,
        3,
        18,
        3,
        4,
        8,
        11,
        13,
        8,
        13,
        14,
        14,
        15,
        23,
        19,
        18,
        4,
        7,
        8,
        14,
        7,
        14,
        23,
        21,
        19,
        4,
        21,
        4,
        5,
        6,
        7,
        23,
        6,
        23,
        24,
        24,
        21,
        5,
        24,
        5,
        6
      ]);
    });
    test('6', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((' +
        '104.30941772460938 42.41554259064343,' +
        ' 139.97471004509413 44.11388932737724,' +
        ' 140.7854321633292 25.197157289769727,' +
        ' 104.30941772460938 22.935078076843972' +
        '))').getTrianglesPointIndexes()).toEqual([3, 2, 1, 3, 1, 0]);
    });
    test('7', () => {
      expect(DPolygon.parseFromWKT('POLYGON ((' +
        '104.30941772460938 22.935078076843972 4, ' +
        '140.7854321633292 25.197157289769727 4, ' +
        '139.97471004509413 44.11388932737724 4, ' +
        '104.30941772460938 42.41554259064343 4' +
        '))').getTrianglesPointIndexes()).toEqual([0, 1, 2, 0, 2, 3]);
    });
  });

  describe('bezier', () => {
    test('2 points', () => {
      expect(new DPolygon([new DPoint(0, 0), new DPoint(10, 10)]).bezier()
        .toWKT())
        .toBe('POLYGON ((' +
          '0 0, ' +
          '1 1, ' +
          '2 2, ' +
          '3.0000000000000004 3.0000000000000004, ' +
          '4 4, ' +
          '5 5, ' +
          '6 6, ' +
          '7 7, ' +
          '7.999999999999999 7.999999999999999, ' +
          '9 9, ' +
          '9.999999999999998 9.999999999999998, ' +
          '0 0' +
          '))');
    });
    test('2 points reverse', () => {
      expect(new DPolygon([new DPoint(10, 10), new DPoint(0, 0)]).bezier()
        .toWKT())
        .toBe('POLYGON ((' +
          '10 10, ' +
          '9 9, ' +
          '8 8, ' +
          '7 7, ' +
          '6 6, ' +
          '5 5, ' +
          '4 4, ' +
          '3 3, ' +
          '2.000000000000001 2.000000000000001, ' +
          '1 1, ' +
          '1.7763568394002505e-15 1.7763568394002505e-15, ' +
          '10 10' +
          '))');
    });
    test('3 points', () => {
      expect(new DPolygon([
        new DPoint(0, 50),
        new DPoint(30, 0),
        new DPoint(80, 50)
      ]).bezier()
        .toWKT()).toBe('POLYGON ((' +
        '0 50, ' +
        '6.2 41, ' +
        '12.8 34, ' +
        '19.800000000000004 29, ' +
        '27.200000000000003 26, ' +
        '35 25, ' +
        '43.2 26, ' +
        '51.8 29, ' +
        '60.8 34, ' +
        '70.19999999999999 40.99999999999999, ' +
        '79.99999999999999 49.999999999999986, ' +
        '0 50' +
        '))');
    });
    test('3 points reverse', () => {
      expect(new DPolygon([
        new DPoint(0, 50),
        new DPoint(30, 0),
        new DPoint(80, 50)
      ]).reverse()
        .bezier()
        .toWKT()).toBe('POLYGON ((' +
        '80 50, ' +
        '70.2 41, ' +
        '60.8 34, ' +
        '51.8 29, ' +
        '43.2 26, ' +
        '35 25, ' +
        '27.2 26, ' +
        '19.8 29, ' +
        '12.8 34, ' +
        '6.20000000000001 40.99999999999999, ' +
        '7.105427357601002e-15 49.999999999999986, ' +
        '80 50' +
        '))');
    });
  });

  describe('setGrowingHeight', () => {
    test('1', () => {
      const p = new DPolygon([
        new DPoint(1, 1),
        new DPoint(5, 5)
      ]);
      expect(p.setGrowingHeight(1, 5)).toEqual({
        holes: [],
        pPoints: [
          {
            properties: {},
            x: 1,
            y: 1,
            z: 1
          },
          {
            properties: {},
            x: 5,
            y: 5,
            z: 5
          }
        ],
        properties: {},
        searchStore: {}
      });
    });
    test('2', () => {
      const p = new DPolygon([
        new DPoint(1, 1),
        new DPoint(1, 10),
        new DPoint(10, 10),
        new DPoint(10, 1)
      ]);
      expect(p.setGrowingHeight(1, 4)).toEqual({
        holes: [],
        pPoints: [
          {
            properties: {},
            x: 1,
            y: 1,
            z: 1
          },
          {
            properties: {},
            x: 1,
            y: 10,
            z: 2
          },
          {
            properties: {},
            x: 10,
            y: 10,
            z: 3
          },
          {
            properties: {},
            x: 10,
            y: 1,
            z: 4
          }
        ],
        properties: {},
        searchStore: {}
      });
    });
  });

  describe('sort', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(1, 2),
        new DPoint(3, 2),
        new DPoint(2, 2),
        new DPoint(6, 2)
      ]).sort((a: DPoint, b: DPoint) => b.x - a.x)
        .toArrayOfCoords()).toEqual([[6, 2], [3, 2], [2, 2], [1, 2]]);
    });
  });

  describe('toGeoJSON', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(1, 2),
        new DPoint(3, 2),
        new DPoint(2, 2),
        new DPoint(6, 2)
      ]).toGeoJSON()).toEqual({
        type: 'LineString',
        coordinates: [[1, 2], [3, 2], [2, 2], [6, 2]]
      });
    });
    test('2', () => {
      expect(new DPolygon([
        new DPoint(1, 2),
        new DPoint(3, 2),
        new DPoint(2, 2),
        new DPoint(6, 2)
      ]).close()
        .toGeoJSON()).toEqual({
        type: 'Polygon',
        coordinates: [[[1, 2], [3, 2], [2, 2], [6, 2], [1, 2]]]
      });
    });
    test('3', () => {
      const t = new DPolygon([
        new DPoint(1, 2),
        new DPoint(3, 2),
        new DPoint(2, 2),
        new DPoint(6, 2)
      ]).close();
      t.holes.push(DPolygon.parse([
        [1, 1],
        [1.1, 1],
        [1, 1.1]
      ]));
      expect(t.toGeoJSON()).toEqual({
        type: 'Polygon',
        coordinates: [[[1, 2], [3, 2], [2, 2], [6, 2], [1, 2]], [[1, 1], [1.1, 1], [1, 1.1]]]
      });
    });
  });

  describe('toGeoJSONFeature', () => {
    test('1', () => {
      expect(new DPolygon([
        new DPoint(1, 2),
        new DPoint(3, 2),
        new DPoint(2, 2),
        new DPoint(6, 2)
      ]).toGeoJSONFeature()).toEqual({
        type: 'Feature',
        properties: {},
        geometry: {
          type: 'LineString',
          coordinates: [[1, 2], [3, 2], [2, 2], [6, 2]]
        }
      });
    });
    test('2', () => {
      expect(new DPolygon([
        new DPoint(1, 2),
        new DPoint(3, 2),
        new DPoint(2, 2),
        new DPoint(6, 2)
      ]).close()
        .toGeoJSONFeature()).toEqual({
        type: 'Feature',
        properties: {},
        geometry: {
          type: 'Polygon',
          coordinates: [[[1, 2], [3, 2], [2, 2], [6, 2], [1, 2]]]
        }
      });
    });
  });

  describe('toGeoJSONFeatureCollection', () => {
    test('1', () => {
      const t = DPolygon.toGeoJSONFeatureCollection([
        DPolygon.parse([[1, 2], [3, 4]]),
        DPolygon.parse([[5, 6], [7, 8], [9, 10]])
      ]);
      expect(t).toEqual({
        type: 'FeatureCollection',
        features: [
          {
            type: 'Feature',
            geometry: {
              type: 'LineString',
              coordinates: [[1, 2], [3, 4]]
            },
            properties: {}
          },
          {
            type: 'Feature',
            geometry: {
              type: 'LineString',
              coordinates: [[5, 6], [7, 8], [9, 10]]
            },
            properties: {}
          }
        ]
      });
    });
  });

  describe('innerCenter', () => {
    test('1', () => {
      expect((DPolygon.parse({
        type: 'Feature',
        properties: {},
        geometry: {
          coordinates: [
            [
              [
                -0.8425018702606053,
                -5.647743450108308
              ],
              [
                -0.8425018702606053,
                -7.160670018068856
              ],
              [
                13.959311825979285,
                -7.160670018068856
              ],
              [
                13.959311825979285,
                -5.647743450108308
              ],
              [
                -0.8425018702606053,
                -5.647743450108308
              ]
            ]
          ],
          type: 'Polygon'
        }
      }) as DPolygon).innerCenter.toGeoJSONFeature()).toEqual({
        geometry: {
          coordinates: [
            4.091436028486025,
            -6.656361162082007
          ],
          type: 'Point'
        },
        properties: {
          score: 7.439466303073019
        },
        type: 'Feature'
      });
    });
    test('2', () => {
      expect((DPolygon.parse({
        type: 'Feature',
        properties: {},
        geometry: {
          coordinates: [
            [
              [
                10.491458331432,
                5.078313807538223
              ],
              [
                26.054508160621253,
                -5.0582556782082975
              ],
              [
                40.60257647921142,
                15.140042059121924
              ],
              [
                20.64127343742507,
                20.927771048391065
              ],
              [
                32.73646977206701,
                13.171830563090026
              ],
              [
                23.85538155432269,
                5.751944344454884
              ],
              [
                10.491458331432,
                5.078313807538223
              ]
            ]
          ],
          type: 'Polygon'
        }
      }) as DPolygon).innerCenter.toGeoJSONFeature()).toEqual({
        geometry: {
          coordinates: [
            32.39814260186704,
            11.354605655555611
          ],
          type: 'Point'
        },
        properties: {
          score: 9.505688023477273
        },
        type: 'Feature'
      });
    });
  });
});
